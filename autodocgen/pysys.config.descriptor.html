

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pysys.config.descriptor &mdash; PySys v2.0  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="pysys.config.project" href="pysys.config.project.html" />
    <link rel="prev" title="pysys.config" href="pysys.config.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> PySys v2.0
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pysys/BaseTest.html">The BaseTest Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pysys/UserGuide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pysys/ProjectConfiguration.html">Project Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pysys/TestDescriptors.html">Test Descriptors</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="pysys.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pysys.baserunner.html">pysys.baserunner</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="pysys.config.html">pysys.config</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">pysys.config.descriptor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#testdescriptor">TestDescriptor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testmodesconfighelper">TestModesConfigHelper</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testmode">TestMode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#descriptorloader">DescriptorLoader</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pysys.config.project.html">pysys.config.project</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pysys.constants.html">pysys.constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="pysys.exceptions.html">pysys.exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="pysys.launcher.html">pysys.launcher</a></li>
<li class="toctree-l2"><a class="reference internal" href="pysys.mappers.html">pysys.mappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="pysys.process.html">pysys.process</a></li>
<li class="toctree-l2"><a class="reference internal" href="pysys.unit.html">pysys.unit</a></li>
<li class="toctree-l2"><a class="reference internal" href="pysys.utils.html">pysys.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="pysys.writer.html">pysys.writer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ChangeLog.html">Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PySys v2.0</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="pysys.html">API Reference</a> &raquo;</li>
        
          <li><a href="pysys.config.html">pysys.config</a> &raquo;</li>
        
      <li>pysys.config.descriptor</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/autodocgen/pysys.config.descriptor.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-pysys.config.descriptor">
<span id="pysys-config-descriptor"></span><h1>pysys.config.descriptor<a class="headerlink" href="#module-pysys.config.descriptor" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#pysys.config.descriptor.TestDescriptor" title="pysys.config.descriptor.TestDescriptor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TestDescriptor</span></code></a> class holds metadata for each testcase 
(<code class="docutils literal notranslate"><span class="pre">pysystest.*</span></code>) or directory (<code class="docutils literal notranslate"><span class="pre">pysysdirconfig.xml</span></code>), and the <a class="reference internal" href="#pysys.config.descriptor.DescriptorLoader" title="pysys.config.descriptor.DescriptorLoader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DescriptorLoader</span></code></a> 
class allows customization of the test discovery process.</p>
<div class="section" id="testdescriptor">
<h2>TestDescriptor<a class="headerlink" href="#testdescriptor" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pysys.config.descriptor.TestDescriptor">
<em class="property">class </em><code class="sig-prename descclassname">pysys.config.descriptor.</code><code class="sig-name descname">TestDescriptor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">id</span></em>, <em class="sig-param"><span class="n">type</span><span class="o">=</span><span class="default_value">'auto'</span></em>, <em class="sig-param"><span class="n">state</span><span class="o">=</span><span class="default_value">'runnable'</span></em>, <em class="sig-param"><span class="n">title</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">purpose</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">groups</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">modes</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">classname</span><span class="o">=</span><span class="default_value">'PySysTest'</span></em>, <em class="sig-param"><span class="n">module</span><span class="o">=</span><span class="default_value">'run.py'</span></em>, <em class="sig-param"><span class="n">input</span><span class="o">=</span><span class="default_value">'Input'</span></em>, <em class="sig-param"><span class="n">output</span><span class="o">=</span><span class="default_value">'Output'</span></em>, <em class="sig-param"><span class="n">reference</span><span class="o">=</span><span class="default_value">'Reference'</span></em>, <em class="sig-param"><span class="n">traceability</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">executionOrderHint</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">skippedReason</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">authors</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">created</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">testDir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">isDirConfig</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">userData</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/config/descriptor.html#TestDescriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.config.descriptor.TestDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Descriptor metadata for an individual testcase (<code class="docutils literal notranslate"><span class="pre">pysystest.*</span></code>) or defaults for tests under a directory 
subtree (<code class="docutils literal notranslate"><span class="pre">pysysdirconfig.xml</span></code>); see <a class="reference internal" href="../pysys/TestDescriptors.html"><span class="doc">Test Descriptors</span></a>.</p>
<p>The <a class="reference internal" href="#pysys.config.descriptor.DescriptorLoader" title="pysys.config.descriptor.DescriptorLoader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DescriptorLoader</span></code></a> class is responsible for determining the available 
descriptor instances.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>str</em>) – The absolute path of the testcase descriptor file.</p></li>
<li><p><strong>testDir</strong> (<em>str</em>) – The absolute path of the test, which is used to convert 
any relative paths into absolute paths.</p></li>
<li><p><strong>id</strong> (<em>str</em>) – The testcase identifier, or the id prefix if this is a 
directory config descriptor rather than a testcase descriptor. 
Includes a mode suffix if this is a multi-mode test.</p></li>
<li><p><strong>idWithoutMode</strong> (<em>str</em>) – The raw testcase identifier with no mode suffix.</p></li>
<li><p><strong>type</strong> (<em>str</em>) – The kind of test this is (<code class="docutils literal notranslate"><span class="pre">auto</span></code> or <code class="docutils literal notranslate"><span class="pre">manual</span></code>)</p></li>
<li><p><strong>skippedReason</strong> (<em>str</em>) – If set to a non-empty string, indicates that this 
testcase is skipped and provides the reason. If this is set then the test 
is skipped regardless of the value of <code class="xref py py-obj docutils literal notranslate"><span class="pre">state</span></code>.</p></li>
<li><p><strong>state</strong> (<em>str</em>) – The state of the testcase (runnable, deprecated or skipped). This field is deprecated - we 
recommend using <code class="xref py py-obj docutils literal notranslate"><span class="pre">skippedReason</span></code> instead, which provides a descriptive outcome to explain why.</p></li>
<li><p><strong>title</strong> (<em>str</em>) – The one-line title summarizing this testcase.</p></li>
<li><p><strong>purpose</strong> (<em>str</em>) – A detailed description of the purpose of the testcase.</p></li>
<li><p><strong>groups</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – A list of the user defined groups the testcase belongs to.</p></li>
<li><p><strong>modes</strong> (<em>list</em><em>[</em><a class="reference internal" href="#pysys.config.descriptor.TestMode" title="pysys.config.descriptor.TestMode"><em>TestMode</em></a><em>]</em>) – A list of the user defined modes the testcase can be run in.</p></li>
<li><p><strong>mode</strong> (<a class="reference internal" href="#pysys.config.descriptor.TestMode" title="pysys.config.descriptor.TestMode"><em>TestMode</em></a>) – <p>Specifies which of the possible modes this descriptor represents or None if the 
the descriptor has no modes. This field is only present after the 
raw descriptors have been expanded into multiple mode-specific descriptors. 
Note that after a descriptor is created from the on-disk file, the <code class="xref py py-obj docutils literal notranslate"><span class="pre">mode</span></code> attribute is not set until 
the later phase when multi-mode descriptors are cloned and expanded based on the selected modes.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">descriptor.mode.params</span></code> to get the parameter dictionary for this mode, 
and <code class="docutils literal notranslate"><span class="pre">descriptor.mode.isPrimary</span></code> to find out of this is a primary mode.</p>
</p></li>
<li><p><strong>classname</strong> (<em>str</em>) – The Python classname to be executed for this testcase.</p></li>
<li><p><strong>module</strong> (<em>str</em>) – The path to the python module containing the testcase class. Relative to testDir, or an absolute path.
If not set, the class is looked up in the PYTHONPATH.</p></li>
<li><p><strong>input</strong> (<em>str</em>) – The path to the input directory of the testcase. Relative to testDir, or an absolute path.</p></li>
<li><p><strong>output</strong> (<em>str</em>) – The path to the output parent directory of the testcase. Relative to testDir, or an absolute path.</p></li>
<li><p><strong>reference</strong> (<em>str</em>) – The path to the reference directory of the testcase. Relative to testDir, or an absolute path.</p></li>
<li><p><strong>traceability</strong> (<em>list</em>) – A list of the requirements covered by the testcase, typically keywords or bug/story ids.</p></li>
<li><p><strong>authors</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – A list of the names or user ids of people who contributed to the test.</p></li>
<li><p><strong>created</strong> (<em>str</em>) – The date when the test was created in yyyy-mm-dd format.</p></li>
<li><p><strong>executionOrderHint</strong> (<em>float</em>) – A float priority value used to determine the 
order in which testcases will be run; higher values are executed before 
low values. The default is 0.0.</p></li>
<li><p><strong>isDirConfig</strong> (<em>bool</em>) – True if this is a directory configuration, or False if 
it’s a normal testcase.</p></li>
<li><p><strong>userData</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>obj</em><em>]</em>) – A Python dictionary that can be used for storing user-defined data 
in the descriptor. In a pysystest.xml, this can be populated by one or more <code class="docutils literal notranslate"><span class="pre">user-data</span></code> elements, e.g. 
<code class="docutils literal notranslate"><span class="pre">&lt;data&gt;&lt;user-data</span> <span class="pre">name=&quot;key&quot;</span> <span class="pre">value=&quot;val</span> <span class="pre">${projectProperty}&quot;&lt;/user-data&gt;&lt;/data&gt;</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="pysys.config.descriptor.TestDescriptor.toDict">
<code class="sig-name descname">toDict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/config/descriptor.html#TestDescriptor.toDict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.config.descriptor.TestDescriptor.toDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts this descriptor to an (ordered) dict suitable for serialization.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="testmodesconfighelper">
<h2>TestModesConfigHelper<a class="headerlink" href="#testmodesconfighelper" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pysys.config.descriptor.TestModesConfigHelper">
<em class="property">class </em><code class="sig-prename descclassname">pysys.config.descriptor.</code><code class="sig-name descname">TestModesConfigHelper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inheritedModes</span></em>, <em class="sig-param"><span class="n">project</span></em>, <em class="sig-param"><span class="n">testDir</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/config/descriptor.html#TestModesConfigHelper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.config.descriptor.TestModesConfigHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A helper class that is passed to the lambda which defines test modes in a pysystest configuration. It provides access to 
the list of inherited modes, to project properties and also helper functions for combining multiple mode lists into 
one and for configuring a collection of modes as primary modes.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inheritedModes</strong> (<em>list</em><em>[</em><em>dict</em><em>[</em><em>str</em><em>,</em><em>obj</em><em>]</em><em>]</em>) – A list of the inherited modes, each defined by a dictionary containing a <code class="docutils literal notranslate"><span class="pre">mode</span></code> 
key and any number of additional parameters.</p></li>
<li><p><strong>constants</strong> – A reference to <a class="reference internal" href="pysys.constants.html#module-pysys.constants" title="pysys.constants"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants</span></code></a> which can be used to access constants such as <code class="docutils literal notranslate"><span class="pre">IS_WINDOWS</span></code> for 
platform-dependent mode configuration.</p></li>
<li><p><strong>pysys</strong> – A reference to the <a class="reference internal" href="pysys.html#module-pysys" title="pysys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys</span></code></a> module.</p></li>
<li><p><strong>import_module</strong> (<em>callable</em><em>[</em><em>str</em><em>]</em>) – A reference to the Python <code class="docutils literal notranslate"><span class="pre">importlib.import_module</span></code> function that can be used 
if you need to access functions from additional modules such as <code class="docutils literal notranslate"><span class="pre">sys</span></code>, <code class="docutils literal notranslate"><span class="pre">re</span></code>, etc.</p></li>
<li><p><strong>project</strong> (<a class="reference internal" href="pysys.config.project.html#pysys.config.project.Project" title="pysys.config.project.Project"><em>pysys.config.project.Project</em></a>) – The project configuration, from which you can read properties.</p></li>
<li><p><strong>testDir</strong> (<em>str</em>) – The test directory, i.e. the directory containing the <code class="docutils literal notranslate"><span class="pre">pysystest.*</span></code> file where this modes 
configuration is defined. This is not available when defining modes in <code class="docutils literal notranslate"><span class="pre">pysysdirconfig</span></code>, but only when the mode 
configuration is directly in the <code class="docutils literal notranslate"><span class="pre">pysystest.*</span></code> file.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="pysys.config.descriptor.TestModesConfigHelper.makeAllPrimary">
<code class="sig-name descname">makeAllPrimary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">modes</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/config/descriptor.html#TestModesConfigHelper.makeAllPrimary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.config.descriptor.TestModesConfigHelper.makeAllPrimary" title="Permalink to this definition">¶</a></dt>
<dd><p>Modifies the specified list (or dict) of modes so that all of them have isPrimary=True.</p>
<p>By default only the first mode in the mode list is “primary”, so the test will only run in that one mode by 
default during local development (unless you supply a <code class="docutils literal notranslate"><span class="pre">--modes</span></code> or <code class="docutils literal notranslate"><span class="pre">--ci</span></code> argument). This is optimal when 
using modes to validate the same behaviour/conditions in different execution environments e.g. 
browsers/databases etc. However when using modes to validate different <em>behaviours/conditions</em> (e.g. testing 
out different command line options) using a single PySysTest class, then you should have all your modes as 
“primary” as you want all of them to execute by default in a quick local test run.</p>
<p>You would typically combine test-specific behaviour modes with any inherited execution environment modes like 
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">lambda</span> <span class="n">modes</span><span class="p">:</span> <span class="n">modes</span><span class="o">.</span><span class="n">combineModeDimensions</span><span class="p">(</span>
        <span class="n">helper</span><span class="o">.</span><span class="n">inheritedModes</span><span class="p">,</span>
        <span class="n">helper</span><span class="o">.</span><span class="n">makeAllPrimary</span><span class="p">(</span>
                <span class="p">{</span>
                        <span class="s1">&#39;Usage&#39;</span><span class="p">:</span>        <span class="p">{</span><span class="s1">&#39;cmd&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;--help&#39;</span><span class="p">],</span> <span class="s1">&#39;expectedExitStatus&#39;</span><span class="p">:</span><span class="s1">&#39;==0&#39;</span><span class="p">},</span> 
                        <span class="s1">&#39;BadPort&#39;</span><span class="p">:</span>      <span class="p">{</span><span class="s1">&#39;cmd&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;--port&#39;</span><span class="p">,</span> <span class="s1">&#39;-1&#39;</span><span class="p">],</span>  <span class="s1">&#39;expectedExitStatus&#39;</span><span class="p">:</span><span class="s1">&#39;!=0&#39;</span><span class="p">},</span> 
                        <span class="s1">&#39;MissingPort&#39;</span><span class="p">:</span>  <span class="p">{</span><span class="s1">&#39;cmd&#39;</span><span class="p">:</span> <span class="p">[],</span>  <span class="s1">&#39;expectedExitStatus&#39;</span><span class="p">:</span><span class="s1">&#39;!=0&#39;</span><span class="p">},</span> 
                <span class="p">},</span> 
<span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>modes</strong> (<em>list</em><em>[</em><em>dict</em><em>[</em><em>str</em><em>,</em><em>obj</em><em>]</em><em>]</em><em>|dict</em><em>[</em><em>str</em><em>,</em><em>dict</em><em>[</em><em>str</em><em>,</em><em>obj</em><em>]</em><em>]</em>) – A list or dict of modes to be made primary.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list[dict[str,obj]] containing the modes, each with isPrimary set to true.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.config.descriptor.TestModesConfigHelper.combineModeDimensions">
<code class="sig-name descname">combineModeDimensions</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">dimensions</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/config/descriptor.html#TestModesConfigHelper.combineModeDimensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.config.descriptor.TestModesConfigHelper.combineModeDimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a single flat mode list containing all combinations that can be generated the specified mode lists.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">lambda</span> <span class="n">helper</span><span class="p">:</span> <span class="n">helper</span><span class="o">.</span><span class="n">combineModeDimensions</span><span class="p">(</span>
<span class="n">helper</span><span class="o">.</span><span class="n">inheritedModes</span><span class="p">,</span>
<span class="p">{</span>
        <span class="s1">&#39;MySQL&#39;</span><span class="p">:</span>  <span class="p">{</span><span class="s1">&#39;db&#39;</span><span class="p">:</span> <span class="s1">&#39;MySQL&#39;</span><span class="p">,</span>  <span class="s1">&#39;dbTimeoutSecs&#39;</span><span class="p">:</span><span class="mi">60</span><span class="p">},</span> 
        <span class="s1">&#39;SQLite&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;db&#39;</span><span class="p">:</span> <span class="s1">&#39;SQLite&#39;</span><span class="p">,</span> <span class="s1">&#39;dbTimeoutSecs&#39;</span><span class="p">:</span><span class="mi">120</span><span class="p">},</span>
        <span class="s1">&#39;Mock&#39;</span><span class="p">:</span>   <span class="p">{</span><span class="s1">&#39;db&#39;</span><span class="p">:</span> <span class="s1">&#39;Mock&#39;</span><span class="p">,</span>   <span class="s1">&#39;dbTimeoutSecs&#39;</span><span class="p">:</span><span class="mi">30</span><span class="p">},</span>
<span class="p">},</span>
<span class="c1"># can use dict or list format for each mode list, whichever is more convenient: </span>
<span class="p">[</span> 
        <span class="p">{</span><span class="s1">&#39;browser&#39;</span><span class="p">:</span><span class="s1">&#39;Chrome&#39;</span><span class="p">},</span> <span class="c1"># if mode is not explicitly specified it is auto-generated from the parameter(s)</span>
        <span class="p">{</span><span class="s1">&#39;browser&#39;</span><span class="p">:</span><span class="s1">&#39;Firefox&#39;</span><span class="p">},</span>
<span class="p">])</span>
</pre></div>
</div>
<p>would generate modes named:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MySQL_Chrome</span>
<span class="n">MySQL_Firefox</span>
<span class="n">SQLite_Chrome</span>
<span class="n">SQLite_Firefox</span>
<span class="n">Mock_Chrome</span>
<span class="n">Mock_Firefox</span>
</pre></div>
</div>
<p>NB: By default the first mode in each dimension is designated a <em>primary</em> mode (one that executes by default 
when no <code class="docutils literal notranslate"><span class="pre">--modes</span></code> or <code class="docutils literal notranslate"><span class="pre">--ci</span></code> argument is specified), but this can be overridden by setting <code class="docutils literal notranslate"><span class="pre">'isPrimary':</span> <span class="pre">True/False</span></code> 
in the dict for any mode. When mode dimensions are combined, the primary modes are AND-ed together, 
i.e. any where <em>all</em> mode dimensions were designated primary. 
So in the above case, since MySQL and Chrome are automatically set as 
primary modes, the MySQL_Chrome mode would be the (only) primary mode returned from this function.
When using modes for different execution environments/browsers etc you probably want only 
the first (typically fastest/simplest/most informative) mode to be primary; on the other hand if using modes to 
re-use the same PySysTest logic for against various behavioural tests (different input files/args etc) 
you should usually set all of the modes to be 
primary so that all of them are executed in your test runs during local development.</p>
<p>A common use case is to combine inherited modes from the parent pysysdirconfigs with a list of modes specific to 
this test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">lambda</span> <span class="n">helper</span><span class="p">:</span> <span class="n">helper</span><span class="o">.</span><span class="n">combineModeDimensions</span><span class="p">(</span>
        <span class="n">helper</span><span class="o">.</span><span class="n">inheritedModes</span><span class="p">,</span>

        <span class="n">helper</span><span class="o">.</span><span class="n">makeAllPrimary</span><span class="p">(</span>
                <span class="p">{</span>
                        <span class="s1">&#39;Usage&#39;</span><span class="p">:</span>         <span class="p">{</span><span class="s1">&#39;cmd&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;--help&#39;</span><span class="p">],</span> 
                                <span class="s1">&#39;expectedExitStatus&#39;</span><span class="p">:</span><span class="s1">&#39;==0&#39;</span><span class="p">,</span> <span class="s1">&#39;expectedMessage&#39;</span><span class="p">:</span><span class="kc">None</span><span class="p">},</span> 
                        <span class="s1">&#39;BadPort&#39;</span><span class="p">:</span>       <span class="p">{</span><span class="s1">&#39;cmd&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;--port&#39;</span><span class="p">,</span> <span class="s1">&#39;-1&#39;</span><span class="p">],</span>  
                                <span class="s1">&#39;expectedExitStatus&#39;</span><span class="p">:</span><span class="s1">&#39;!=0&#39;</span><span class="p">,</span> <span class="s1">&#39;expectedMessage&#39;</span><span class="p">:</span><span class="s1">&#39;Server failed: Invalid port number specified: -1&#39;</span><span class="p">},</span> 
                        <span class="s1">&#39;SetPortTwice&#39;</span><span class="p">:</span>  <span class="p">{</span><span class="s1">&#39;cmd&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;--port&#39;</span><span class="p">,</span> <span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;--config&#39;</span><span class="p">,</span> <span class="n">helper</span><span class="o">.</span><span class="n">testDir</span><span class="o">+</span><span class="s1">&#39;/myserverconfig.json&#39;</span><span class="p">],</span> 
                                <span class="s1">&#39;expectedExitStatus&#39;</span><span class="p">:</span><span class="s1">&#39;!=0&#39;</span><span class="p">,</span> <span class="s1">&#39;expectedMessage&#39;</span><span class="p">:</span><span class="s1">&#39;Server failed: Cannot specify port twice&#39;</span><span class="p">},</span> 
                <span class="p">}),</span> 
<span class="p">)</span>
</pre></div>
</div>
<p>This is a good way to use modes for the concept of parameterized subtests, since even if you don’t initially have 
any inherited modes, if in future you add some then everything will automatically work correctly.</p>
<p>NB: For efficiency reasons, don’t use the <code class="docutils literal notranslate"><span class="pre">combineModeDimensions</span></code> method in your configuration if you are 
<em>just</em> using the inherited modes unchanged.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dimensions</strong> (<em>list</em><em>[</em><em>dict</em><em>[</em><em>str</em><em>,</em><em>obj</em><em>]</em><em>]</em><em>|dict</em><em>[</em><em>str</em><em>,</em><em>dict</em><em>[</em><em>str</em><em>,</em><em>obj</em><em>]</em><em>]</em>) – Each argument passed to this function is a list of 
modes, each mode defined by a dict which may contain a <code class="docutils literal notranslate"><span class="pre">mode</span></code> key plus any number of parameters. 
Alternatively, each dimension can be a dict where the mode is the key and the value is a parameters dict.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list[dict[str,obj]] containing the flattened list of modes consisting of all combinations of the 
passed in. This can be further manipulated using Python list comprehensions (e.g. to exclude certain 
combinations) if desired.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="testmode">
<h2>TestMode<a class="headerlink" href="#testmode" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pysys.config.descriptor.TestMode">
<em class="property">class </em><code class="sig-prename descclassname">pysys.config.descriptor.</code><code class="sig-name descname">TestMode</code><a class="reference internal" href="../_modules/pysys/config/descriptor.html#TestMode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.config.descriptor.TestMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
<p>Represents a mode that a test can run in in a <a class="reference internal" href="#pysys.config.descriptor.TestDescriptor" title="pysys.config.descriptor.TestDescriptor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TestDescriptor</span></code></a>, and optionally a dict of parameters that define 
that mode.</p>
<p>To create one:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mode</span> <span class="o">=</span> <span class="n">TestMode</span><span class="p">(</span><span class="s1">&#39;MyMode&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;param1&#39;</span><span class="p">:</span> <span class="s1">&#39;value1&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>See the <code class="docutils literal notranslate"><span class="pre">mode</span></code> parameter/field in <a class="reference internal" href="#pysys.config.descriptor.TestDescriptor" title="pysys.config.descriptor.TestDescriptor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TestDescriptor</span></code></a> where this class is used.</p>
<p>This class is immutable, so create a new instance if you want to change something.</p>
<p>For convenience and compatibility, this TestMode subclasses a string holding the mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The name of the mode as a string.</p></li>
<li><p><strong>params</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>obj</em><em>]</em>) – A dictionary of parameters associated with this mode. The parameters are available to 
the test (as <code class="docutils literal notranslate"><span class="pre">self.mode.params</span></code>) and also assigned as instance fields on the test class when it 
runs in this mode.</p></li>
<li><p><strong>isPrimary</strong> (<em>bool</em>) – Indicates whether this is a primary mode, 
one that executes by default even when not explicity requested with a commnad line option such as <code class="docutils literal notranslate"><span class="pre">--modes=ALL</span></code>)</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
</dd></dl>

</div>
<div class="section" id="descriptorloader">
<h2>DescriptorLoader<a class="headerlink" href="#descriptorloader" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pysys.config.descriptor.DescriptorLoader">
<em class="property">class </em><code class="sig-prename descclassname">pysys.config.descriptor.</code><code class="sig-name descname">DescriptorLoader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">project</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/config/descriptor.html#DescriptorLoader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.config.descriptor.DescriptorLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class is responsible for locating and loading all available testcase 
descriptors.</p>
<p>A custom DescriptorLoader subclass can be provided to customize the test 
discovery process, typically by overriding <a class="reference internal" href="#pysys.config.descriptor.DescriptorLoader.loadDescriptors" title="pysys.config.descriptor.DescriptorLoader.loadDescriptors"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loadDescriptors</span></code></a> and modifying the 
returned list of descriptors and configuring your <code class="docutils literal notranslate"><span class="pre">pysysproject.xml</span></code> with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">descriptor</span><span class="o">-</span><span class="n">loader</span> <span class="n">module</span><span class="o">=</span><span class="s2">&quot;mypkg.custom&quot;</span> <span class="n">classname</span><span class="o">=</span><span class="s2">&quot;CustomDescriptorLoader&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>You could use this approach to add additional descriptor instances 
to represent non-PySys testcases found under the search directory, for example 
based on discovery of unit test classes.</p>
<p>Another key use case would be dynamically adding or changing descriptor 
settings such as the list of modes for each testcase or the 
executionOrderHint, perhaps based on a per-group basis. For example, 
you could modify descriptors in the “database-tests” group to have a 
dynamically generated list of modes identifying the possible database 
servers supported without having to hardcode that list into any descriptor 
files on disk, and allowing for different database modes on different 
platforms.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><p><strong>project</strong> (<a class="reference internal" href="pysys.config.project.html#pysys.config.project.Project" title="pysys.config.project.Project"><em>pysys.config.project.Project</em></a>) – The <a class="reference internal" href="pysys.config.project.html#pysys.config.project.Project" title="pysys.config.project.Project"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.config.project.Project</span></code></a> instance.</p>
</dd>
</dl>
<dl class="py method">
<dt id="pysys.config.descriptor.DescriptorLoader.loadDescriptors">
<code class="sig-name descname">loadDescriptors</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dir</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/config/descriptor.html#DescriptorLoader.loadDescriptors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.config.descriptor.DescriptorLoader.loadDescriptors" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all descriptors located under the specified directory, and 
return them as a list.</p>
<p>Subclasses may change the returned descriptors and/or add additional 
instances of their own to the list after calling the super implementation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">descriptors</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">CustomDescriptorLoader</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">loadDescriptors</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="o">...</span>
<span class="k">return</span> <span class="n">descriptors</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dir</strong> – The parent directory to search for runnable tests.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>List of <a class="reference internal" href="#pysys.config.descriptor.TestDescriptor" title="pysys.config.descriptor.TestDescriptor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.config.descriptor.TestDescriptor</span></code></a> objects 
which could be selected for execution.</p>
<p>If a test can be run in multiple modes there must be a single descriptor 
for it in the list returned from this method. Each multi-mode 
descriptor is later expanded out into separate mode-specific 
descriptors (at the same time as descriptor filtering based on 
command line arguments, and addition of project-level 
execution-order), before the final list is sorted and passed to 
<a class="reference internal" href="pysys.baserunner.html#pysys.baserunner.BaseRunner" title="pysys.baserunner.BaseRunner"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.baserunner.BaseRunner</span></code></a>.</p>
<p>The order of the returned list is random, so the caller is responsible 
for sorting this list to ensure deterministic behaviour.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="pysys.exceptions.html#pysys.exceptions.UserError" title="pysys.exceptions.UserError"><strong>UserError</strong></a> – Raised if no testcases can be found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.config.descriptor.DescriptorLoader._handleSubDirectory">
<code class="sig-name descname">_handleSubDirectory</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dir</span></em>, <em class="sig-param"><span class="n">subdirs</span></em>, <em class="sig-param"><span class="n">files</span></em>, <em class="sig-param"><span class="n">descriptors</span></em>, <em class="sig-param"><span class="n">parentDirDefaults</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/config/descriptor.html#DescriptorLoader._handleSubDirectory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.config.descriptor.DescriptorLoader._handleSubDirectory" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the handling of each sub-directory found while walking 
the directory tree during <a class="reference internal" href="#pysys.config.descriptor.DescriptorLoader.loadDescriptors" title="pysys.config.descriptor.DescriptorLoader.loadDescriptors"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loadDescriptors</span></code></a>.</p>
<p>Can be used to add test descriptors, and/or add custom logic for 
preventing PySys searching a particular part of the directory tree 
perhaps based on the presence of specific files or subdirectories 
within it.</p>
<p>This method is called before directories containing pysysignore 
files are stripped out.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dir</strong> (<em>str</em>) – The full path of the directory to be processed.
On Windows, this will be a long-path safe unicode string.</p></li>
<li><p><strong>subdirs</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – a list of the subdirectories under dir, which 
can be used to detect what kind of directory this is, and also can be modified by this method to prevent 
other loaders looking at subdirectories.</p></li>
<li><p><strong>files</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – a list of the files under dir, which 
can be used to detect what kind of directory this is, and also can be modified by this method to prevent 
other loaders looking at them.</p></li>
<li><p><strong>descriptors</strong> (<em>list</em><em>[</em><a class="reference internal" href="#pysys.config.descriptor.TestDescriptor" title="pysys.config.descriptor.TestDescriptor"><em>TestDescriptor</em></a><em>]</em>) – A list of <a class="reference internal" href="#pysys.config.descriptor.TestDescriptor" title="pysys.config.descriptor.TestDescriptor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TestDescriptor</span></code></a> items which this method 
can add to if desired.</p></li>
<li><p><strong>parentDirDefaults</strong> (<a class="reference internal" href="#pysys.config.descriptor.TestDescriptor" title="pysys.config.descriptor.TestDescriptor"><em>TestDescriptor</em></a>) – A <a class="reference internal" href="#pysys.config.descriptor.TestDescriptor" title="pysys.config.descriptor.TestDescriptor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TestDescriptor</span></code></a> containing defaults 
from the parent directory, or None if there are none. Test loaders may 
optionally merge some of this information with test-specific 
information when creating test descriptors.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – Reserved for future use. Pass this to the base class 
implementation when calling it.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If True, this part of the directory tree has been fully 
handled and PySys will not search under it any more. False to allow 
normal PySys handling of the directory to proceed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.config.descriptor.DescriptorLoader._parseTestDescriptor">
<code class="sig-name descname">_parseTestDescriptor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">descriptorfile</span></em>, <em class="sig-param"><span class="n">parentDirDefaults</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">isDirConfig</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/config/descriptor.html#DescriptorLoader._parseTestDescriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.config.descriptor.DescriptorLoader._parseTestDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a single descriptor file (typically an XML file, or a file of another type containing XML) for a 
testcase or directory configuration and returns the resulting descriptor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>descriptorfile</strong> – The absolute path of the descriptor file.</p></li>
<li><p><strong>parentDirDefaults</strong> – A <a class="reference internal" href="#pysys.config.descriptor.TestDescriptor" title="pysys.config.descriptor.TestDescriptor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TestDescriptor</span></code></a> instance containing 
defaults to inherit from the parent directory, or None if none was found.</p></li>
<li><p><strong>isDirConfig</strong> – False for normal test descriptors, True for a directory configuration.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The <a class="reference internal" href="#pysys.config.descriptor.TestDescriptor" title="pysys.config.descriptor.TestDescriptor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TestDescriptor</span></code></a> instance, or None if none should be 
added for this descriptor file. Note that subclasses may modify the 
contents of the returned instance.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="pysys.exceptions.html#pysys.exceptions.UserError" title="pysys.exceptions.UserError"><strong>UserError</strong></a> – If the descriptor is invalid and an error should be 
displayed to the user without any Python stacktrace. 
The exception message must contain the path of the descriptorfile.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pysys.config.project.html" class="btn btn-neutral float-right" title="pysys.config.project" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pysys.config.html" class="btn btn-neutral float-left" title="pysys.config" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2006-2021 M.B. Grieve; documentation last updated on 2021-08-22

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>