

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The BaseTest Class &mdash; PySys v2.1.dev1  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="User Guide" href="UserGuide.html" />
    <link rel="prev" title="Getting Started" href="../GettingStarted.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> PySys v2.1.dev1
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The BaseTest Class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#implementing-your-test-class">Implementing your test class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-configuration">Test configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#assertions-and-outcomes">Assertions and outcomes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#processes">Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#waiting">Waiting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#files">Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="#all-basetest-members">All BaseTest members</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="UserGuide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="ProjectConfiguration.html">Project Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="TestDescriptors.html">Test Descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autodocgen/pysys.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ChangeLog.html">Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PySys v2.1.dev1</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>The BaseTest Class</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/pysys/BaseTest.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-pysys.basetest">
<span id="the-basetest-class"></span><h1>The BaseTest Class<a class="headerlink" href="#module-pysys.basetest" title="Permalink to this headline">¶</a></h1>
<p>In PySys each test is a class which contains the methods needed to execute your
test logic and then to validate the results against the expected behaviour to produce a final “outcome” for the test.</p>
<p>All test classes inherit (directly or indirectly) from the <code class="docutils literal notranslate"><span class="pre">BaseTest</span></code> class, which provides everything you need to
create your own tests.</p>
<div class="section" id="implementing-your-test-class">
<h2>Implementing your test class<a class="headerlink" href="#implementing-your-test-class" title="Permalink to this headline">¶</a></h2>
<p>Each PySys test class must implement an <a class="reference internal" href="#pysys.basetest.BaseTest.execute" title="pysys.basetest.BaseTest.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute</span></code></a> method containing the main body of the test, and
(usually) a <a class="reference internal" href="#pysys.basetest.BaseTest.validate" title="pysys.basetest.BaseTest.validate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate</span></code></a> method containing the assertions that check for the expected result.
Sometimes you may also need to provide <a class="reference internal" href="#pysys.basetest.BaseTest.setup" title="pysys.basetest.BaseTest.setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup</span></code></a> and/or <a class="reference internal" href="#pysys.basetest.BaseTest.cleanup" title="pysys.basetest.BaseTest.cleanup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanup</span></code></a> functionality:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.setup" title="pysys.basetest.BaseTest.setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup</span></code></a>()</p></td>
<td><p>Contains setup actions to be executed before the test is executed.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.execute" title="pysys.basetest.BaseTest.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute</span></code></a>()</p></td>
<td><p>The method tests implement to perform the test execution steps.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.validate" title="pysys.basetest.BaseTest.validate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate</span></code></a>()</p></td>
<td><p>The method tests implement to perform assertions that check for the expected behaviour.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.addCleanupFunction" title="pysys.basetest.BaseTest.addCleanupFunction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">addCleanupFunction</span></code></a>(fn[, ignoreErrors])</p></td>
<td><p>Registers a function that will be called as part of the <a class="reference internal" href="#pysys.basetest.BaseTest.cleanup" title="pysys.basetest.BaseTest.cleanup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanup</span></code></a> of this object.</p></td>
</tr>
</tbody>
</table>
<p>Taken together, the PySys <code class="docutils literal notranslate"><span class="pre">setup()</span> <span class="pre">-&gt;</span> <span class="pre">execute()</span> <span class="pre">-&gt;</span> <span class="pre">validate()</span></code> methods correspond to the common
‘Arrange, Act, Assert’ testing paradigm.</p>
<p>At the end of each test, PySys automatically terminates all processes it
started, in the <a class="reference internal" href="#pysys.basetest.BaseTest.cleanup" title="pysys.basetest.BaseTest.cleanup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanup</span></code></a> method. If any additional custom cleanup steps are required, these can be added by calling
<a class="reference internal" href="#pysys.basetest.BaseTest.addCleanupFunction" title="pysys.basetest.BaseTest.addCleanupFunction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">addCleanupFunction</span></code></a>.</p>
<p>NB: Do not ever override the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> constructor of a test class; instead use <a class="reference internal" href="#pysys.basetest.BaseTest.setup" title="pysys.basetest.BaseTest.setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup</span></code></a> for any initialization,
which ensures orderly cleanup if an exception occurs during the setup process.</p>
</div>
<div class="section" id="test-configuration">
<h2>Test configuration<a class="headerlink" href="#test-configuration" title="Permalink to this headline">¶</a></h2>
<p>The input/output directories and other essential information about this test object and its parent project are
can be accessed via instance attributes on <code class="docutils literal notranslate"><span class="pre">self</span></code>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">self.input</span></code> <em>(str)</em>: Full path to the input directory of the testcase, which is where test-specific resources such as
configuration files are stored. The directory is the main <code class="docutils literal notranslate"><span class="pre">&lt;testDir&gt;</span></code> for projects created from PySys 2.0 onwards,
or <code class="docutils literal notranslate"><span class="pre">&lt;testdir&gt;/Input</span></code> for projects created earlier. The path can be customized in the pysysdirconfig at a
project, directory (or even testcase) level.</p>
<p>Here is an example of copying a configuration file template from the input directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">+</span><span class="s1">&#39;/serverconfig.xml&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">mappers</span><span class="o">=</span><span class="p">[</span><span class="k">lambda</span> <span class="n">line</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;@PORT@&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">myport</span><span class="p">))])</span>
</pre></div>
</div>
<p>When storing large text files in the input directory it is recommended to use compression; see
<a class="reference internal" href="#pysys.basetest.BaseTest.unpackArchive" title="pysys.basetest.BaseTest.unpackArchive"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.basetest.BaseTest.unpackArchive</span></code></a> for details of how to decompress input files.</p>
<p>Do <em>not</em> use the <code class="docutils literal notranslate"><span class="pre">self.input</span></code> field as a way to locate other resources that are in directories above Input/ (since
this will fail when the input directory is empty and using a version control system (e.g. git) that doesn’t commit
empty directories). For other test resource locations the recommended approach is to use <code class="docutils literal notranslate"><span class="pre">self.project.testRootDir</span></code>,
define a specific project property for the directory (if widely used), or if that’s not practical then use
<code class="docutils literal notranslate"><span class="pre">self.descriptor.testDir</span></code> to get the test directory.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.output</span></code> <em>(str)</em>: Full path to the output directory of the testcase, which is the only location to which the
test should write output files, temporary files and logs. The output directory is automatically created and
cleaned of existing content before the test runs to ensure separate runs do not influence each other.
There are separate output directories when a test is run for multiple cycles or in multiple modes.
The directory is usually <code class="docutils literal notranslate"><span class="pre">&lt;testdir&gt;/Output/&lt;outdir&gt;</span></code> but the path can be customized in the testcase descriptor and
the <code class="docutils literal notranslate"><span class="pre">--outdir</span></code> command line argument.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.reference</span></code> <em>(str)</em>: Full path to the reference directory of the testcase, which is where reference comparison files
are stored (typically for use with <a class="reference internal" href="#pysys.basetest.BaseTest.assertDiff" title="pysys.basetest.BaseTest.assertDiff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertDiff</span></code></a>).
The directory is usually <code class="docutils literal notranslate"><span class="pre">&lt;testdir&gt;/Reference</span></code> but the path can be customized in the testcase descriptor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.log</span></code> <em>(logging.Logger)</em>: The Python <code class="docutils literal notranslate"><span class="pre">Logger</span></code> instance that should be used to record progress and status
information. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting myserver on port </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">serverport</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.mode</span></code> (<a class="reference internal" href="../autodocgen/pysys.config.descriptor.html#pysys.config.descriptor.TestMode" title="pysys.config.descriptor.TestMode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.config.descriptor.TestMode</span></code></a>): The user-defined mode this test object is running. Tests can use
this to modify how the test executed based upon the mode, for example to allow the test to run against either a mock
or a real database. TestMode subclasses str so you can include this in situation where you need the name of the mode
such as when recording performance result, and you can also use the <code class="docutils literal notranslate"><span class="pre">.params</span></code> attribute to access any parameters
defined on the mode.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.testCycle</span></code> <em>(int)</em>: The cycle in which this test is running. Numbering starts from 1 in a multi-cycle test run.
The special value of 0 is used to indicate that this is not part of a multi-cycle run.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.descriptor</span></code> (<a class="reference internal" href="../autodocgen/pysys.config.descriptor.html#pysys.config.descriptor.TestDescriptor" title="pysys.config.descriptor.TestDescriptor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.config.descriptor.TestDescriptor</span></code></a>): The descriptor contains
information about this testcase such as the test id, groups and test type, and typically comes from the
test’s <code class="docutils literal notranslate"><span class="pre">pysystest.*</span></code> file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.runner</span></code> (<a class="reference internal" href="../autodocgen/pysys.baserunner.html#pysys.baserunner.BaseRunner" title="pysys.baserunner.BaseRunner"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.baserunner.BaseRunner</span></code></a>): A reference to the singleton runner instance that’s
responsible for orchestrating all the tests in this project. The runner is where any cross-test state can be held,
for example if you want to have multiple tests share use of a single server, VM, or other resource.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.project</span></code> (<a class="reference internal" href="../autodocgen/pysys.config.project.html#pysys.config.project.Project" title="pysys.config.project.Project"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.config.project.Project</span></code></a>): A reference to the singleton project instance containing the
configuration of this PySys test project as defined by <code class="docutils literal notranslate"><span class="pre">pysysproject.xml</span></code>.
The project can be used to access information such as the project properties which are shared across all tests
(e.g. for hosts and credentials).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.testPlugins</span></code> <em>(list[object])</em>: A list of any configured test plugin instances. This allows plugins
to access the functionality of other plugins if needed (for example looking them up by type in this list).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.disableCoverage</span></code> <em>(bool)</em>: Set this to True to request that no code coverage is generated for this test
(even when code coverage has been enabled for the PySys run), for example because this is a time-sensitive
or performance-measuring test. Typically this would be set in an individual testcase, or in the <a class="reference internal" href="#pysys.basetest.BaseTest.setup" title="pysys.basetest.BaseTest.setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup</span></code></a> method of
a <code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseTest</span></code> subclass based on groups in the <code class="docutils literal notranslate"><span class="pre">self.descriptor</span></code> that indicate what kind of test this is.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.disablePerformanceReporting</span></code> <em>(bool)</em>: Set this to True to request that no performance figures are recorded.
For example you might dynamically set this to True when a test is using options such as profiling or code coverage
that would make the results meaningless.</p></li>
</ul>
<p>Additional variables that affect only the behaviour of a single method are documented in the associated method.</p>
<p>There is also a field for each test plugin listed in the project configuration. Plugins provide additional
functionality such as methods for starting and working with a particular language or tool. A test plugin is
just a class with a method <code class="docutils literal notranslate"><span class="pre">setup(self,</span> <span class="pre">testobj)</span></code> (and no constructor arguments), that provides methods and
fields for use by tests. Each test plugin listed in the project configuration
with <code class="docutils literal notranslate"><span class="pre">&lt;test-plugin</span> <span class="pre">classname=&quot;...&quot;</span> <span class="pre">alias=&quot;...&quot;/&gt;</span></code> is instantiated for each
<code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseTest</span></code> instance, and can be accessed using <code class="docutils literal notranslate"><span class="pre">self.&lt;alias&gt;</span></code> on the test object. If you are using a third party
PySys test plugin, consult the documentation for the third party test plugin class to find out what methods and fields
are available using <code class="docutils literal notranslate"><span class="pre">self.&lt;alias&gt;.*</span></code>.</p>
<p>If you wish to support test parameters that can be overridden on the command line using <code class="docutils literal notranslate"><span class="pre">-Xkey=value</span></code>, just add a
static variable just after the <code class="docutils literal notranslate"><span class="pre">`class</span> <span class="pre">MyClass(BaseTest):</span></code> line containing the default value, and access it using
<code class="docutils literal notranslate"><span class="pre">self.key</span></code>. If a new value for that key is specified with <code class="docutils literal notranslate"><span class="pre">-Xkey=value</span></code>, that value will be set as an attribute by
the BaseTest constructor, with automatic conversion from string to the correct type if the default value is a
bool/int/float.</p>
</div>
<div class="section" id="assertions-and-outcomes">
<span id="id1"></span><h2>Assertions and outcomes<a class="headerlink" href="#assertions-and-outcomes" title="Permalink to this headline">¶</a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.assertThatGrep" title="pysys.basetest.BaseTest.assertThatGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThatGrep</span></code></a>(file, grepRegex[, …])</p></td>
<td><p>Perform a validation by using a regular expression to extract a “value” from a text file and then check  the extracted value using an <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a> conditionstring.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.assertGrep" title="pysys.basetest.BaseTest.assertGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertGrep</span></code></a>(file[, _expr, _unused, contains, …])</p></td>
<td><p>Perform a validation by checking for the presence or absence of a regular expression in the specified text file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.assertLineCount" title="pysys.basetest.BaseTest.assertLineCount"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertLineCount</span></code></a>(file[, _expr, _unused, …])</p></td>
<td><p>Perform a validation assert on the count of lines in a text file matching a specific regular expression.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.assertDiff" title="pysys.basetest.BaseTest.assertDiff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertDiff</span></code></a>(file1[, file2, filedir1, …])</p></td>
<td><p>Perform a validation by comparing the contents of two text files, typically a file from the  output directory against a file in the <code class="docutils literal notranslate"><span class="pre">&lt;testdir&gt;/Reference/</span></code> directory containing the expected output.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a>(conditionstring, …)</p></td>
<td><p>Performs equality/range tests or any general-purpose validation by evaluating a Python <code class="docutils literal notranslate"><span class="pre">eval()</span></code> expression  in the context of some named values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.assertLastGrep" title="pysys.basetest.BaseTest.assertLastGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertLastGrep</span></code></a>(file[, _expr, _unused, …])</p></td>
<td><p>Perform a validation assert on a regular expression occurring in the last line of a text file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.assertOrderedGrep" title="pysys.basetest.BaseTest.assertOrderedGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertOrderedGrep</span></code></a>(file[, _exprList, …])</p></td>
<td><p>Perform a validation assert on a list of regular expressions occurring in specified order in a text file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.assertPathExists" title="pysys.basetest.BaseTest.assertPathExists"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertPathExists</span></code></a>(path[, exists, abortOnError])</p></td>
<td><p>Perform a validation that the specified file or directory path exists  (or does not exist).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.abort" title="pysys.basetest.BaseTest.abort"><code class="xref py py-obj docutils literal notranslate"><span class="pre">abort</span></code></a>(outcome, outcomeReason[, callRecord])</p></td>
<td><p>Raise an AbortException with the specified outcome and reason.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.skipTest" title="pysys.basetest.BaseTest.skipTest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">skipTest</span></code></a>(outcomeReason[, callRecord])</p></td>
<td><p>Raise an AbortException that will set the test outcome to SKIPPED and  ensure that the rest of the execute() and validate() methods do not execute.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.addOutcome" title="pysys.basetest.BaseTest.addOutcome"><code class="xref py py-obj docutils literal notranslate"><span class="pre">addOutcome</span></code></a>(outcome[, outcomeReason, …])</p></td>
<td><p>Add a validation outcome (and optionally a reason string) to the validation list.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.getOutcome" title="pysys.basetest.BaseTest.getOutcome"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getOutcome</span></code></a>()</p></td>
<td><p>Get the final outcome for this test, based on the precedence order defined in <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.OUTCOMES" title="pysys.constants.OUTCOMES"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants.OUTCOMES</span></code></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.getOutcomeReason" title="pysys.basetest.BaseTest.getOutcomeReason"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getOutcomeReason</span></code></a>()</p></td>
<td><p>Get the reason string for the current overall outcome (if specified).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.getOutcomeLocation" title="pysys.basetest.BaseTest.getOutcomeLocation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getOutcomeLocation</span></code></a>()</p></td>
<td><p>Get the location in the Python source file where this location was added.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.reportPerformanceResult" title="pysys.basetest.BaseTest.reportPerformanceResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reportPerformanceResult</span></code></a>(value, resultKey, unit)</p></td>
<td><p>Reports a new performance number to the configured performance reporters, with an associated unique string key  that identifies it for comparison purposes.</p></td>
</tr>
</tbody>
</table>
<p>PySys has a library of assertion methods that are great for typical system testing validation tasks such as
checking log messages, diff’ing output files against a reference, and for more complex cases, evaluating arbitrary
Python expressions. All these methods are designed to give a really clear outcome reason if the assertion fails.
Note that by default assertion failures do not abort the test, so all the validation statements will be executed
even if some early ones fail.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertGrep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="s1">&#39; (ERROR|FATAL|WARN) .*&#39;</span><span class="p">,</span> <span class="n">contains</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertThatGrep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;Successfully authenticated user &quot;([^&quot;]*)&quot;&#39;</span><span class="p">,</span>
                <span class="s2">&quot;value == expected&quot;</span><span class="p">,</span> <span class="n">expected</span><span class="o">=</span><span class="s1">&#39;myuser&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s1">&#39;actualNumberOfLogFiles == expected&#39;</span><span class="p">,</span> <span class="n">actualNumberOfLogFiles__eval</span><span class="o">=</span><span class="s2">&quot;len(glob.glob(self.output+&#39;/myserver*.log&#39;))&quot;</span><span class="p">,</span> <span class="n">expected</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>The available test outcomes are listed in <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.OUTCOMES" title="pysys.constants.OUTCOMES"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants.OUTCOMES</span></code></a>.</p>
<p>There are some deprecated methods which we do not recommend using: <a class="reference internal" href="#pysys.basetest.BaseTest.assertEval" title="pysys.basetest.BaseTest.assertEval"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertEval</span></code></a>, <a class="reference internal" href="#pysys.basetest.BaseTest.assertTrue" title="pysys.basetest.BaseTest.assertTrue"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertTrue</span></code></a>, <a class="reference internal" href="#pysys.basetest.BaseTest.assertFalse" title="pysys.basetest.BaseTest.assertFalse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertFalse</span></code></a>
(<a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a> should be used instead of these).</p>
</div>
<div class="section" id="processes">
<h2>Processes<a class="headerlink" href="#processes" title="Permalink to this headline">¶</a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a>(command, arguments[, environs, …])</p></td>
<td><p>Start a process running in the foreground or background, and return  the <a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process" title="pysys.process.Process"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.Process</span></code></a> object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.startPython" title="pysys.basetest.BaseTest.startPython"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startPython</span></code></a>(arguments[, disableCoverage])</p></td>
<td><p>Start a Python process with the specified arguments.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.getNextAvailableTCPPort" title="pysys.basetest.BaseTest.getNextAvailableTCPPort"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getNextAvailableTCPPort</span></code></a>([hosts, …])</p></td>
<td><p>Allocate a free TCP port which can be used for starting a server on this machine.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.allocateUniqueStdOutErr" title="pysys.basetest.BaseTest.allocateUniqueStdOutErr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">allocateUniqueStdOutErr</span></code></a>(processKey)</p></td>
<td><p>Allocate unique filenames of the form <code class="docutils literal notranslate"><span class="pre">processKey[.n].out/.err</span></code>  which can be used for the <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a> <code class="docutils literal notranslate"><span class="pre">stdouterr</span></code> parameter.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.createEnvirons" title="pysys.basetest.BaseTest.createEnvirons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">createEnvirons</span></code></a>([overrides, addToLibPath, …])</p></td>
<td><p>Create a new customized dictionary of environment variables suitable  for passing to <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess()</span></code></a>’s <code class="docutils literal notranslate"><span class="pre">environs=</span></code> argument.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultEnvirons" title="pysys.basetest.BaseTest.getDefaultEnvirons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultEnvirons</span></code></a>([command])</p></td>
<td><p>Create a new dictionary of environment variables, suitable for passing to  <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess()</span></code></a>, with a minimal clean set of environment variables  for this platform, unaffected (as much as possible) by the  environment that the tests are being run under.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.signalProcess" title="pysys.basetest.BaseTest.signalProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">signalProcess</span></code></a>(process, signal[, abortOnError])</p></td>
<td><p>Send a signal to a running process.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.stopProcess" title="pysys.basetest.BaseTest.stopProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stopProcess</span></code></a>(process[, abortOnError])</p></td>
<td><p>Stops the specified process, if it is currently running.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.writeProcess" title="pysys.basetest.BaseTest.writeProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">writeProcess</span></code></a>(process, data[, addNewLine])</p></td>
<td><p>Write binary data to the stdin of a process.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.waitForBackgroundProcesses" title="pysys.basetest.BaseTest.waitForBackgroundProcesses"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForBackgroundProcesses</span></code></a>([includes, …])</p></td>
<td><p>Wait for any running background processes to terminate, then check that all background processes  completed with the expected exit status.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.startProcessMonitor" title="pysys.basetest.BaseTest.startProcessMonitor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcessMonitor</span></code></a>(process[, interval, …])</p></td>
<td><p>Start a background thread to monitor process statistics such as memory and CPU usage.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.stopProcessMonitor" title="pysys.basetest.BaseTest.stopProcessMonitor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stopProcessMonitor</span></code></a>(monitor)</p></td>
<td><p>Request a process monitor to stop.</p></td>
</tr>
</tbody>
</table>
<p>The most important part of a test’s <a class="reference internal" href="#pysys.basetest.BaseTest.execute" title="pysys.basetest.BaseTest.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute</span></code></a> method is starting the process(es) that you are testing. Always use
the <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a> method for this (or a wrapper such as <a class="reference internal" href="#pysys.basetest.BaseTest.startPython" title="pysys.basetest.BaseTest.startPython"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startPython</span></code></a>) rather than <code class="docutils literal notranslate"><span class="pre">os.system</span></code> or <code class="docutils literal notranslate"><span class="pre">subprocess</span></code>,
to ensure that PySys can cleanup all test processes at the end of the test.</p>
<p>This class also provides methods to dynamically allocate a free TCP server port,
and to monitor the memory/CPU usage of the processes it starts.</p>
</div>
<div class="section" id="waiting">
<h2>Waiting<a class="headerlink" href="#waiting" title="Permalink to this headline">¶</a></h2>
<p>PySys provides a number of methods that can be used in your <a class="reference internal" href="#pysys.basetest.BaseTest.execute" title="pysys.basetest.BaseTest.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute</span></code></a> method to wait for operations to complete,
of which the most commonly used is <a class="reference internal" href="#pysys.basetest.BaseTest.waitForGrep" title="pysys.basetest.BaseTest.waitForGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForGrep</span></code></a>.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.waitForGrep" title="pysys.basetest.BaseTest.waitForGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForGrep</span></code></a>(file[, expr, condition, …])</p></td>
<td><p>Wait for a regular expression line to be seen (one or more times) in a text file in the output  directory (waitForGrep was formerly known as <a class="reference internal" href="#pysys.basetest.BaseTest.waitForSignal" title="pysys.basetest.BaseTest.waitForSignal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForSignal</span></code></a>).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.waitForFile" title="pysys.basetest.BaseTest.waitForFile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForFile</span></code></a>(file[, filedir, timeout, …])</p></td>
<td><p>Wait for a file to exist on disk.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.waitForBackgroundProcesses" title="pysys.basetest.BaseTest.waitForBackgroundProcesses"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForBackgroundProcesses</span></code></a>([includes, …])</p></td>
<td><p>Wait for any running background processes to terminate, then check that all background processes  completed with the expected exit status.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.waitProcess" title="pysys.basetest.BaseTest.waitProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitProcess</span></code></a>(process[, timeout, …])</p></td>
<td><p>Wait for a background process to terminate.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.waitForSocket" title="pysys.basetest.BaseTest.waitForSocket"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForSocket</span></code></a>(port[, host, timeout, …])</p></td>
<td><p>Wait until it is possible to establish a socket connection to a  server running on the specified local or remote port.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.wait" title="pysys.basetest.BaseTest.wait"><code class="xref py py-obj docutils literal notranslate"><span class="pre">wait</span></code></a>(interval)</p></td>
<td><p>Wait for a specified period of time, and log a message to indicate this is happening.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.pollWait" title="pysys.basetest.BaseTest.pollWait"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pollWait</span></code></a>(secs)</p></td>
<td><p>Sleeps the current thread for the specified number of seconds, between polling/checking for some condition  to be met.</p></td>
</tr>
</tbody>
</table>
<p>Do not use <a class="reference internal" href="#pysys.basetest.BaseTest.wait" title="pysys.basetest.BaseTest.wait"><code class="xref py py-obj docutils literal notranslate"><span class="pre">wait</span></code></a> unless there is no alternative, since it makes tests both slower and more fragile than they ought to be.</p>
</div>
<div class="section" id="files">
<h2>Files<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h2>
<p>The helper methods for common file I/O operations are:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.copy" title="pysys.basetest.BaseTest.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code></a>(src, dest[, mappers, encoding, …])</p></td>
<td><p>Copy a directory or a single text or binary file, optionally tranforming the contents by filtering each line through a list of mapping functions.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.unpackArchive" title="pysys.basetest.BaseTest.unpackArchive"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unpackArchive</span></code></a>(archive[, dest, autoCleanup])</p></td>
<td><p>Unpacks the specified file(s) from an archive to a directory.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.mkdir" title="pysys.basetest.BaseTest.mkdir"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mkdir</span></code></a>(path)</p></td>
<td><p>Create a directory, with recursive creation of any parent directories.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.deleteDir" title="pysys.basetest.BaseTest.deleteDir"><code class="xref py py-obj docutils literal notranslate"><span class="pre">deleteDir</span></code></a>(path, **kwargs)</p></td>
<td><p>Recursively delete the specified directory.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.deleteFile" title="pysys.basetest.BaseTest.deleteFile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">deleteFile</span></code></a>(path, **kwargs)</p></td>
<td><p>Delete the specified file, with optional retries and ignoring of errors.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.grep" title="pysys.basetest.BaseTest.grep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grep</span></code></a>(path, expr[, encoding, reFlags, mappers])</p></td>
<td><p>Returns the first occurrence of a regular expression in the specified file, or raises an exception if not found.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.grepOrNone" title="pysys.basetest.BaseTest.grepOrNone"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grepOrNone</span></code></a>(path, expr[, encoding, reFlags, …])</p></td>
<td><p>Returns the first occurrence of a regular expression in the specified file, or None if not found.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.grepAll" title="pysys.basetest.BaseTest.grepAll"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grepAll</span></code></a>(path, expr[, encoding, reFlags, mappers])</p></td>
<td><p>Returns a list of all the occurrences of a regular expression in the specified file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.logFileContents" title="pysys.basetest.BaseTest.logFileContents"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logFileContents</span></code></a>(path[, includes, excludes, …])</p></td>
<td><p>Logs some or all of the lines from the specified file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.write_text" title="pysys.basetest.BaseTest.write_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">write_text</span></code></a>(file, text[, encoding])</p></td>
<td><p>Writes the specified characters to a file in the output directory.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding</span></code></a>(file, **xargs)</p></td>
<td><p>Specifies what encoding should be used to read or write the specified  text file.</p></td>
</tr>
</tbody>
</table>
<p>To get the configured input/output directories for this test see <a class="reference internal" href="#test-configuration">Test configuration</a>.</p>
<p>For additional file/directory helper functions such as support for loading JSON and properties files,
see the <a class="reference internal" href="../autodocgen/pysys.utils.fileutils.html#module-pysys.utils.fileutils" title="pysys.utils.fileutils"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.utils.fileutils</span></code></a> module.</p>
</div>
<div class="section" id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.compareVersions" title="pysys.basetest.BaseTest.compareVersions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compareVersions</span></code></a>(v1, v2)</p></td>
<td><p>Compares two alphanumeric dotted version strings to see which is more recent.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.logValueDiff" title="pysys.basetest.BaseTest.logValueDiff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logValueDiff</span></code></a>([actual, expected, logFunction])</p></td>
<td><p>Logs the differences between two values in a human-friendly way, on multiple lines (as displayed by <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.disableLogging" title="pysys.basetest.BaseTest.disableLogging"><code class="xref py py-obj docutils literal notranslate"><span class="pre">disableLogging</span></code></a>()</p></td>
<td><p>Temporarily stops logging for the current thread.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.startBackgroundThread" title="pysys.basetest.BaseTest.startBackgroundThread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startBackgroundThread</span></code></a>(name, target[, …])</p></td>
<td><p>Start a new background thread that will invoke the specified <code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code>  function.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.pythonDocTest" title="pysys.basetest.BaseTest.pythonDocTest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pythonDocTest</span></code></a>(pythonFile[, pythonPath, …])</p></td>
<td><p>Execute the Python doctests that exist in the specified python file;  adds a FAILED outcome if any do not pass.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.startManualTester" title="pysys.basetest.BaseTest.startManualTester"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startManualTester</span></code></a>(file[, filedir, state, …])</p></td>
<td><p>Start the manual tester, which provides a UI to guide a human through the tests needed to implement this testcase.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.stopManualTester" title="pysys.basetest.BaseTest.stopManualTester"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stopManualTester</span></code></a>()</p></td>
<td><p>Stop the manual tester if running.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.waitManualTester" title="pysys.basetest.BaseTest.waitManualTester"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitManualTester</span></code></a>([timeout])</p></td>
<td><p>Wait for the manual tester to be stopped via user interaction.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysys.basetest.BaseTest.getBoolProperty" title="pysys.basetest.BaseTest.getBoolProperty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getBoolProperty</span></code></a>(propertyName[, default])</p></td>
<td><p>Get a True/False indicating whether the specified attribute is set  on this object (typically as a result of specifying -X on the command  line), or else from the project configuration.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="all-basetest-members">
<h2>All BaseTest members<a class="headerlink" href="#all-basetest-members" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pysys.basetest.BaseTest">
<em class="property">class </em><code class="sig-prename descclassname">pysys.basetest.</code><code class="sig-name descname">BaseTest</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">descriptor</span></em>, <em class="sig-param"><span class="n">outsubdir</span></em>, <em class="sig-param"><span class="n">runner</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../autodocgen/pysys.process.user.html#pysys.process.user.ProcessUser" title="pysys.process.user.ProcessUser"><code class="xref py py-class docutils literal notranslate"><span class="pre">pysys.process.user.ProcessUser</span></code></a></p>
<p>BaseTest is the base class of every individual PySys test class, and contains the methods needed to execute your 
test logic and then to validate the results against the expected behaviour.</p>
<p>Apart from the <a class="reference internal" href="#pysys.basetest.BaseTest.addOutcome" title="pysys.basetest.BaseTest.addOutcome"><code class="xref py py-obj docutils literal notranslate"><span class="pre">addOutcome</span></code></a> method this class is not thread-safe, so if 
you need to access it from multiple threads be sure to add your own locking 
around use of its fields and methods, including any cleanup functions.</p>
<dl class="py method">
<dt id="pysys.basetest.BaseTest.setup">
<code class="sig-name descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains setup actions to be executed before the test is executed.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">setup</span></code> method may be overridden by individual test classes, or (more commonly) in a custom <a class="reference internal" href="#pysys.basetest.BaseTest" title="pysys.basetest.BaseTest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseTest</span></code></a> 
subclass that provides common functionality for multiple individual tests. However before implementing a custom 
<code class="docutils literal notranslate"><span class="pre">BaseTest</span></code> subclass with its own <code class="docutils literal notranslate"><span class="pre">setup()</span></code> method, consider whether the PySys concept of test plugins would meet 
your needs.</p>
<p>If you do override this method, be sure to call <code class="docutils literal notranslate"><span class="pre">super(BASETEST_CLASS_HERE,</span> <span class="pre">self).setup()</span></code> to allow the 
setup commands from the base test to run.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">setup</span></code> throws an exception, the <a class="reference internal" href="#pysys.basetest.BaseTest.cleanup" title="pysys.basetest.BaseTest.cleanup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanup</span></code></a> method will still be called, to clean up any resources 
that were already allocated.</p>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.execute">
<code class="sig-name descname">execute</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>The method tests implement to perform the test execution steps.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – If this method was not implemented yet.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.validate">
<code class="sig-name descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>The method tests implement to perform assertions that check for the expected behaviour.</p>
<p>In some cases all of the required assertions (e.g. checking that a process ran without error etc) will have 
been performed in the <a class="reference internal" href="#pysys.basetest.BaseTest.execute" title="pysys.basetest.BaseTest.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute</span></code></a> method and so <a class="reference internal" href="#pysys.basetest.BaseTest.validate" title="pysys.basetest.BaseTest.validate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate</span></code></a> will be empty. However, where possible it is 
recommended to put assertions into the <code class="docutils literal notranslate"><span class="pre">validate</span></code> method for clarity, and so that the 
<code class="docutils literal notranslate"><span class="pre">pysys</span> <span class="pre">run</span> <span class="pre">--validateOnly</span></code> option can be used during test development.</p>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.cleanup">
<code class="sig-name descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains cleanup actions to be executed after the test’s <a class="reference internal" href="#pysys.basetest.BaseTest.execute" title="pysys.basetest.BaseTest.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute</span></code></a> and <a class="reference internal" href="#pysys.basetest.BaseTest.validate" title="pysys.basetest.BaseTest.validate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate</span></code></a> methods have completed.</p>
<p>The cleanup method automatically stops all processes that are still still running (assuming they were started 
with <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a>). It also stops all process monitors running in 
separate threads, and any instances of the manual tester user interface.</p>
<p>If any custom cleanup is required, use <a class="reference internal" href="#pysys.basetest.BaseTest.addCleanupFunction" title="pysys.basetest.BaseTest.addCleanupFunction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">addCleanupFunction</span></code></a> instead of overriding
this method.</p>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.addResource">
<code class="sig-name descname">addResource</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">resource</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.addResource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.addResource" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a resource which is owned by the test and therefore gets its <code class="docutils literal notranslate"><span class="pre">__del__</span></code> method called 
when the test is cleaned up.</p>
<dl class="field-list simple">
<dt class="field-odd">Deprecated</dt>
<dd class="field-odd"><p>Please use <a class="reference internal" href="#pysys.basetest.BaseTest.addCleanupFunction" title="pysys.basetest.BaseTest.addCleanupFunction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">addCleanupFunction</span></code></a> instead of this function.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.startProcessMonitor">
<code class="sig-name descname">startProcessMonitor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">process</span></em>, <em class="sig-param"><span class="n">interval</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">file</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">handlers</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">pmargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.startProcessMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.startProcessMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Start a background thread to monitor process statistics such as memory and CPU usage.</p>
<p>All process monitors are automatically stopped on completion of 
the test by <a class="reference internal" href="#pysys.basetest.BaseTest.cleanup" title="pysys.basetest.BaseTest.cleanup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseTest.cleanup</span></code></a>, but you may also wish to explicitly stop 
your process monitors by calling <a class="reference internal" href="../autodocgen/pysys.process.monitor.html#pysys.process.monitor.BaseProcessMonitor.stop" title="pysys.process.monitor.BaseProcessMonitor.stop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.monitor.BaseProcessMonitor.stop</span></code></a> before you begin 
shutting down processes at the end of a test to avoid unwanted spikes 
and noise in the last few samples of the data.</p>
<p>You can specify a <code class="xref py py-obj docutils literal notranslate"><span class="pre">file</span></code> and/or a list of <code class="xref py py-obj docutils literal notranslate"><span class="pre">handlers</span></code>. If you use 
<code class="xref py py-obj docutils literal notranslate"><span class="pre">file</span></code>, a default <a class="reference internal" href="../autodocgen/pysys.process.monitor.html#pysys.process.monitor.ProcessMonitorTextFileHandler" title="pysys.process.monitor.ProcessMonitorTextFileHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.monitor.ProcessMonitorTextFileHandler</span></code></a>
instance is created to produce tab-delimited lines with default columns 
specified by 
<a class="reference internal" href="../autodocgen/pysys.process.monitor.html#pysys.process.monitor.ProcessMonitorTextFileHandler.DEFAULT_COLUMNS" title="pysys.process.monitor.ProcessMonitorTextFileHandler.DEFAULT_COLUMNS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.monitor.ProcessMonitorTextFileHandler.DEFAULT_COLUMNS</span></code></a>. 
If you wish to customize this for an individual test create your own 
<code class="docutils literal notranslate"><span class="pre">ProcessMonitorTextFileHandler</span></code> instance and pass it to handlers instead. 
Additional default columns may be added in future releases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>process</strong> – The process handle returned from the <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a> method.</p></li>
<li><p><strong>interval</strong> – The polling interval in seconds between collection of 
monitoring statistics.</p></li>
<li><p><strong>file</strong> – <p>The name of a tab separated values (.tsv) file to write to, 
for example ‘monitor-myprocess.tsv’.</p>
<p>A default <a class="reference internal" href="../autodocgen/pysys.process.monitor.html#pysys.process.monitor.ProcessMonitorTextFileHandler" title="pysys.process.monitor.ProcessMonitorTextFileHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.monitor.ProcessMonitorTextFileHandler</span></code></a> instance is 
created if this parameter is specified, with default columns from 
<a class="reference internal" href="../autodocgen/pysys.process.monitor.html#pysys.process.monitor.ProcessMonitorTextFileHandler.DEFAULT_COLUMNS" title="pysys.process.monitor.ProcessMonitorTextFileHandler.DEFAULT_COLUMNS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.monitor.ProcessMonitorTextFileHandler.DEFAULT_COLUMNS</span></code></a>.</p>
</p></li>
<li><p><strong>handlers</strong> – A list of <a class="reference internal" href="../autodocgen/pysys.process.monitor.html#pysys.process.monitor.BaseProcessMonitorHandler" title="pysys.process.monitor.BaseProcessMonitorHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.monitor.BaseProcessMonitorHandler</span></code></a> 
instances (such as <a class="reference internal" href="../autodocgen/pysys.process.monitor.html#pysys.process.monitor.ProcessMonitorTextFileHandler" title="pysys.process.monitor.ProcessMonitorTextFileHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.monitor.ProcessMonitorTextFileHandler</span></code></a>), 
which will process monitoring data every polling interval. This can be 
used for recording results (for example in a file) or for dynamically 
analysing them and reporting problems.</p></li>
<li><p><strong>pmargs</strong> – Keyword arguments to allow advanced parameterization 
of the process monitor class, which will be passed to its 
constructor. It is an error to specify any parameters 
not supported by the process monitor class on each platform.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An object representing the process monitor 
(<a class="reference internal" href="../autodocgen/pysys.process.monitor.html#pysys.process.monitor.BaseProcessMonitor" title="pysys.process.monitor.BaseProcessMonitor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.monitor.BaseProcessMonitor</span></code></a>).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../autodocgen/pysys.process.monitor.html#pysys.process.monitor.BaseProcessMonitor" title="pysys.process.monitor.BaseProcessMonitor">pysys.process.monitor.BaseProcessMonitor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.stopProcessMonitor">
<code class="sig-name descname">stopProcessMonitor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">monitor</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.stopProcessMonitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.stopProcessMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Request a process monitor to stop.</p>
<p>This method is deprecated - just call <a class="reference internal" href="../autodocgen/pysys.process.monitor.html#pysys.process.monitor.BaseProcessMonitor.stop" title="pysys.process.monitor.BaseProcessMonitor.stop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.monitor.BaseProcessMonitor.stop</span></code></a> directly instead.</p>
<p>Waits for the monitor to fully stop if possible, but does not throw an exception if it fails.</p>
<p>All process monitors are automatically stopped and joined during cleanup, 
however you may wish to explicitly stop your process monitors 
before you begin shutting down processes at the end of a test to avoid 
unwanted spikes and noise in the last few samples of the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>monitor</strong> – The process monitor handle returned from the <a class="reference internal" href="#pysys.basetest.BaseTest.startProcessMonitor" title="pysys.basetest.BaseTest.startProcessMonitor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcessMonitor</span></code></a> method</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.startBackgroundThread">
<code class="sig-name descname">startBackgroundThread</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">target</span></em>, <em class="sig-param"><span class="n">kwargsForTarget</span><span class="o">=</span><span class="default_value">{}</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.startBackgroundThread"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.startBackgroundThread" title="Permalink to this definition">¶</a></dt>
<dd><p>Start a new background thread that will invoke the specified <code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code> 
function.</p>
<p>The target function will be invoked with the specified keyword 
arguments, preceded by the special keyword arguments <code class="xref py py-obj docutils literal notranslate"><span class="pre">stopping</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">log</span></code>. 
The <code class="xref py py-obj docutils literal notranslate"><span class="pre">stopping</span></code> argument is a Python <code class="xref py py-obj docutils literal notranslate"><span class="pre">threading.Event</span></code> instance that 
can be used to detect when the thread has been requested to terminate. 
It is recommended to use this event instead of <code class="xref py py-obj docutils literal notranslate"><span class="pre">time.sleep</span></code> to avoid 
waiting when the thread is meant to be finishing.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PySysTest</span><span class="p">(</span><span class="n">BaseTest</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">dosomething</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stopping</span><span class="p">,</span> <span class="n">log</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">pollingInterval</span><span class="p">):</span>
                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Message from my thread&#39;</span><span class="p">)</span>
                <span class="k">while</span> <span class="ow">not</span> <span class="n">stopping</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>

                        <span class="c1"># ... do stuff here</span>

                        <span class="c1"># sleep for pollingInterval, waking up if requested to stop; </span>
                        <span class="c1"># (hint: ensure this wait time is small to retain </span>
                        <span class="c1"># responsiveness to Ctrl+C interrupts)</span>
                        <span class="k">if</span> <span class="n">stopping</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">pollingInterval</span><span class="p">):</span> <span class="k">return</span>

        <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">startBackgroundThread</span><span class="p">(</span><span class="s1">&#39;DoSomething1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dosomething</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;param1&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;pollingInterval&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">})</span>
                <span class="o">...</span>
                <span class="n">t</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span> <span class="c1"># requests thread to stop but doesn&#39;t wait for it to stop</span>
                <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that <a class="reference internal" href="#pysys.basetest.BaseTest" title="pysys.basetest.BaseTest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseTest</span></code></a> is not thread-safe (apart from <a class="reference internal" href="#pysys.basetest.BaseTest.addOutcome" title="pysys.basetest.BaseTest.addOutcome"><code class="xref py py-obj docutils literal notranslate"><span class="pre">addOutcome</span></code></a>, 
<a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a> and the reading of fields like <code class="docutils literal notranslate"><span class="pre">self.output</span></code> that don’t 
change) so if you need to use its fields or methods from 
background threads, be sure to add your own locking to the foreground 
and background threads in your test, including any custom cleanup 
functions.</p>
<p>The BaseTest will stop and join all running background threads at the 
beginning of cleanup. If a thread doesn’t stop within the expected 
timeout period a <code class="xref py py-obj docutils literal notranslate"><span class="pre">constants.TIMEDOUT</span></code> outcome will be appended. 
If a thread’s <code class="docutils literal notranslate"><span class="pre">target</span></code> function raises an Exception then a 
<code class="xref py py-obj docutils literal notranslate"><span class="pre">constants.BLOCKED</span></code> outcome will be appended during cleanup or 
when it is joined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – A name for this thread that concisely describes its purpose. 
Should be unique within this test/owner instance. 
A prefix indicating the test/owner will be added to the provided name.</p></li>
<li><p><strong>target</strong> – The function or instance method that will be executed 
on the background thread. The function must accept a keyword argument 
named <code class="xref py py-obj docutils literal notranslate"><span class="pre">stopping</span></code> in addition to whichever keyword arguments are 
specified in <code class="xref py py-obj docutils literal notranslate"><span class="pre">kwargsForTarget</span></code>.</p></li>
<li><p><strong>kwargsForTarget</strong> – A dictionary of keyword arguments that will be 
passed to the target function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="../autodocgen/pysys.utils.threadutils.html#pysys.utils.threadutils.BackgroundThread" title="pysys.utils.threadutils.BackgroundThread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.utils.threadutils.BackgroundThread</span></code></a> instance 
wrapping the newly started thread.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../autodocgen/pysys.utils.threadutils.html#pysys.utils.threadutils.BackgroundThread" title="pysys.utils.threadutils.BackgroundThread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.utils.threadutils.BackgroundThread</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.startManualTester">
<code class="sig-name descname">startManualTester</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">filedir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">state</span><span class="o">=</span><span class="default_value">11</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">1800</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.startManualTester"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.startManualTester" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the manual tester, which provides a UI to guide a human through the tests needed to implement this testcase.</p>
<p>The manual tester user interface (UI) is used to describe a series of manual steps to be performed 
to execute and validate a test. Only a single instance of the UI can be running at any given time, and 
can be run either in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">FOREGROUND</span></code> (method will not return until the UI is closed or the timeout
occurs) or in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">BACKGROUND</span></code> (method will return straight away so automated actions may be performed 
concurrently). Should the UI be terminated due to expiry of the timeout, a <code class="xref py py-obj docutils literal notranslate"><span class="pre">TIMEDOUT</span></code> outcome will be 
added to the outcome list. The UI can be stopped via the <a class="reference internal" href="#pysys.basetest.BaseTest.stopManualTester" title="pysys.basetest.BaseTest.stopManualTester"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stopManualTester</span></code></a> method. An instance of the 
UI not explicitly stopped within a test will automatically be stopped via the <a class="reference internal" href="#pysys.basetest.BaseTest.cleanup" title="pysys.basetest.BaseTest.cleanup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanup</span></code></a> method of the 
BaseTest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – The name of the manual test xml input file</p></li>
<li><p><strong>filedir</strong> – The directory containing the manual test xml input file (defaults to the output subdirectory)</p></li>
<li><p><strong>state</strong> – Start the manual tester either in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">FOREGROUND</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">BACKGROUND</span></code> (defaults to <code class="xref py py-obj docutils literal notranslate"><span class="pre">FOREGROUND</span></code>)</p></li>
<li><p><strong>timeout</strong> – The timeout period after which to termintate a manual tester running in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">FOREGROUND</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.stopManualTester">
<code class="sig-name descname">stopManualTester</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.stopManualTester"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.stopManualTester" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the manual tester if running.</p>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.waitManualTester">
<code class="sig-name descname">waitManualTester</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">1800</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.waitManualTester"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.waitManualTester" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for the manual tester to be stopped via user interaction.</p>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.wait">
<code class="sig-name descname">wait</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">interval</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.wait"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for a specified period of time, and log a message to indicate this is happening.</p>
<p>Tests that rely on waiting for arbitrary times usually take longer to execute than necessary, and are fragile 
if the timings or machine load changes, so wherever possible use a method like <a class="reference internal" href="#pysys.basetest.BaseTest.waitForGrep" title="pysys.basetest.BaseTest.waitForGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForGrep</span></code></a> to 
wait for something specific instead.</p>
<p>See also <a class="reference internal" href="#pysys.basetest.BaseTest.pollWait" title="pysys.basetest.BaseTest.pollWait"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pollWait</span></code></a> which should be used when performing repeated polling to wait for a condition without logging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>interval</strong> – The time interval in seconds to wait.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.assertPathExists">
<code class="sig-name descname">assertPathExists</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">exists</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.assertPathExists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.assertPathExists" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a validation that the specified file or directory path exists 
(or does not exist).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – The path to be checked. This can be an absolute path or 
relative to the testcase output directory.</p></li>
<li><p><strong>exists</strong> – True if the path is asserted to exist, False if it 
should not.</p></li>
<li><p><strong>abortOnError</strong> – Set to True to make the test immediately abort if the
assertion fails.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the assertion succeeds, False if a failure outcome was appended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.assertEval">
<code class="sig-name descname">assertEval</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evalstring</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">formatparams</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.assertEval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.assertEval" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a validation by substituting named <code class="docutils literal notranslate"><span class="pre">{}</span></code> placeholder values into a Python expression such as 
<code class="docutils literal notranslate"><span class="pre">{expected}=={actual}</span></code> or <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">&lt;=</span> <span class="pre">{actual}</span> <span class="pre">&lt;=</span> <span class="pre">10</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Deprecated:</dt>
<dd class="field-odd"><p>Deprecated since 1.5.1 in favour of <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a> which is now significantly more powerful and should be 
used for new tests.</p>
</dd>
</dl>
<p>Example use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">assertEval</span><span class="p">(</span><span class="s1">&#39;os.path.getsize(</span><span class="si">{filename}</span><span class="s1">) &gt; </span><span class="si">{origFileSize}</span><span class="s1">&#39;</span><span class="p">,</span>         
        <span class="n">filename</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">+</span><span class="s1">&#39;/file.txt&#39;</span><span class="p">,</span> <span class="n">origFileSize</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>evalstring</strong> – <p>a string that will be formatted using <code class="docutils literal notranslate"><span class="pre">.format(...)</span></code>
with the specified parameters, and result in failure outcome if not true.</p>
<p>Parameters should be specified using {name} syntax, and quoting is not 
required as string values are automatically escaped using repr. 
e.g. ‘<code class="xref py py-obj docutils literal notranslate"><span class="pre">os.path.size({filename})</span> <span class="pre">&gt;</span> <span class="pre">{origFileSize}'</span></code>.</p>
<p>Do not use an f-string instead of explicitly passing formatparams, as 
with an f-string this method will not know the names of the substituted 
parameters which makes the intention of the assertion harder to 
understand from looking at the test output.</p>
<p>The global environment used for evaluation includes the <code class="docutils literal notranslate"><span class="pre">os.path</span></code>, <code class="docutils literal notranslate"><span class="pre">math</span></code>, <code class="docutils literal notranslate"><span class="pre">sys</span></code>, <code class="docutils literal notranslate"><span class="pre">re</span></code>, <code class="docutils literal notranslate"><span class="pre">json</span></code>, and <code class="docutils literal notranslate"><span class="pre">locale</span></code> 
standard Python modules, as well as the <code class="docutils literal notranslate"><span class="pre">pysys</span></code> module and the contents of the <a class="reference internal" href="../autodocgen/pysys.constants.html#module-pysys.constants" title="pysys.constants"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants</span></code></a> module, 
e.g. <code class="docutils literal notranslate"><span class="pre">IS_WINDOWS</span></code>, and also the BaseTest’s <code class="docutils literal notranslate"><span class="pre">self</span></code> variable.</p>
</p></li>
<li><p><strong>formatparams</strong> – <p>Named parameters for the format string, which 
can be of any type. Use descriptive names for the parameters to produce 
an assertion message that makes it really clear what is being checked.</p>
<p>String parameters will be automatically passed through <code class="xref py py-obj docutils literal notranslate"><span class="pre">repr()</span></code> before 
being formatted, so there is no need to perform additional 
quoting or escaping of strings.</p>
</p></li>
<li><p><strong>abortOnError</strong> – Set to True to make the test immediately abort if the
assertion fails. Unless abortOnError=True this method only throws 
an exception if the format string is invalid; failure to execute the 
eval(…) results in a BLOCKED outcome but no exception.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the assertion succeeds, False if a failure outcome was appended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.assertThat">
<code class="sig-name descname">assertThat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conditionstring</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">positional_arguments</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.assertThat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.assertThat" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs equality/range tests or any general-purpose validation by evaluating a Python <code class="docutils literal notranslate"><span class="pre">eval()</span></code> expression 
in the context of some named values.</p>
<p>This method is designed to produce very clear and informative logging and failure reasons if the assertion is 
unsuccessful (using the <a class="reference internal" href="#pysys.basetest.BaseTest.logValueDiff" title="pysys.basetest.BaseTest.logValueDiff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logValueDiff</span></code></a> method).</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Equality comparison of an &#39;actual&#39; vs &#39;expected&#39; message from when our server started; </span>
<span class="c1"># note the use of a descriptive name for the &#39;actualXXX=&#39; keyword to produce a nice clear message if it fails</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s2">&quot;actualStartupMessage == expected&quot;</span><span class="p">,</span> <span class="n">expected</span><span class="o">=</span><span class="s1">&#39;Started successfully&#39;</span><span class="p">,</span> <span class="n">actualStartupMessage</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

<span class="c1"># This produces the self-describing log messages like: </span>
<span class="c1">#   Assert that (actualStartupMessage == expected) with expected=&#39;Started successfully&#39;, actualStartupMessage=&#39;Started unsuccessfully&#39; ... passed</span>

<span class="c1"># Always design tests to give clear messages if there&#39;s a failure. Here&#39;s an example of adding an extra </span>
<span class="c1"># parameter (fromLogFile) that&#39;s not used in the condition string, to indicate which server we&#39;re testing here</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s1">&#39;actualUser == expected&#39;</span><span class="p">,</span> <span class="n">expected</span><span class="o">=</span><span class="s1">&#39;myuser&#39;</span><span class="p">,</span> <span class="n">actualUser</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">fromLogFile</span><span class="o">=</span><span class="s1">&#39;server1.log&#39;</span><span class="p">)</span>

<span class="c1"># Any valid Python expression is permitted (not only equality testing):</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s2">&quot;actualStartupMessage.endswith(&#39;successfully&#39;)&quot;</span><span class="p">,</span> <span class="n">actualStartupMessage</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s2">&quot;re.match(expected, actualStartupMessage)&quot;</span><span class="p">,</span> <span class="n">expected</span><span class="o">=</span><span class="s2">&quot;.* successfully&quot;</span><span class="p">,</span> <span class="n">actualStartupMessage</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s2">&quot;(0 &lt;= actualValue &lt; max) and type(actualValue)!=float&quot;</span><span class="p">,</span> <span class="n">actualValue</span><span class="o">=</span><span class="n">v</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># Use ``is`` for comparisons to True/False/None as in Python ``==``/``!=`` don&#39;t always do what you&#39;d </span>
<span class="c1"># expect for these types. </span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s2">&quot;actualValue is not None&quot;</span><span class="p">,</span> <span class="n">actualValue</span><span class="o">=</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
<p>This method is powerful enough for almost any validation that the other assert methods don’t 
handle, and by enforcing the discipline of naming values it generates self-describing log messages and 
outcome reasons to make it really obvious what is going on.
For best results, make sure that your keyword= parameters have clear and unique names so it’s obvious 
how each assertThat() differs from the other ones, and ensure that all values you’re going to want to see 
are included as one of the named parameter values (rather than buried deep inside the main conditionstring).</p>
<p>The condition string is just a Python expression, which will be passed to <code class="docutils literal notranslate"><span class="pre">eval()</span></code> and can use any 
of the <code class="docutils literal notranslate"><span class="pre">keyword=</span></code> argument values passed to this method (but not the caller’s local variables).
The evaluation is performed in a namespace that also includes the current <a class="reference internal" href="#pysys.basetest.BaseTest" title="pysys.basetest.BaseTest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseTest</span></code></a> instance (<code class="docutils literal notranslate"><span class="pre">self</span></code>), 
some standard Python modules (<code class="docutils literal notranslate"><span class="pre">os.path</span></code>, <code class="docutils literal notranslate"><span class="pre">math</span></code>, <code class="docutils literal notranslate"><span class="pre">sys</span></code>, <code class="docutils literal notranslate"><span class="pre">re</span></code>, <code class="docutils literal notranslate"><span class="pre">json</span></code>, and <code class="docutils literal notranslate"><span class="pre">locale</span></code>), the <a class="reference internal" href="../autodocgen/pysys.html#module-pysys" title="pysys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys</span></code></a> module, and 
the contents of the <a class="reference internal" href="../autodocgen/pysys.constants.html#module-pysys.constants" title="pysys.constants"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants</span></code></a> module, e.g. <code class="docutils literal notranslate"><span class="pre">IS_WINDOWS</span></code>. If necessary, symbols for additional modules 
can be imported dynamically using <code class="docutils literal notranslate"><span class="pre">import_module()</span></code>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s2">&quot;IS_WINDOWS or re.match(expected, actual)&quot;</span><span class="p">,</span> <span class="n">actual</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">expected</span><span class="o">=</span><span class="s2">&quot;f.*&quot;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s2">&quot;import_module(&#39;tarfile&#39;).is_tarfile(self.output+file) is False&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="s1">&#39;/foo.zip&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Sometimes the differences between assertThat expressions are hard to describe in the parameter names themselves, 
and for these cases you can get self-describing behaviour with a parameter ending in the suffix 
<code class="docutils literal notranslate"><span class="pre">__eval</span></code> whose value is itself a Python expression to be evaluated, using any local variable in the 
namespace of the calling code, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myDataStructure</span> <span class="o">=</span> <span class="o">...</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s2">&quot;actual == expected&quot;</span><span class="p">,</span> <span class="n">actual__eval</span><span class="o">=</span><span class="s2">&quot;myDataStructure[&#39;item1&#39;][-1].getId()&quot;</span><span class="p">,</span> <span class="n">expected</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s2">&quot;actual == expected&quot;</span><span class="p">,</span> <span class="n">actual__eval</span><span class="o">=</span><span class="s2">&quot;myDataStructure[&#39;item2&#39;][-1].getId()&quot;</span><span class="p">,</span> <span class="n">expected</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s2">&quot;actual == expected&quot;</span><span class="p">,</span> <span class="n">actual__eval</span><span class="o">=</span><span class="s2">&quot;myDataStructure[&#39;item3&#39;][-1].getId()&quot;</span><span class="p">,</span> <span class="n">expected</span><span class="o">=</span><span class="s2">&quot;baz&quot;</span><span class="p">)</span>

<span class="c1"># Produces self-describing log messages like this:</span>
<span class="c1">#  Assert that (actual == expected) with actual (myDataStructure[&#39;item1&#39;][-1].getId()) =&#39;foo&#39;, expected=&#39;foo&#39; ... passed</span>
<span class="c1">#  Assert that (actual == expected) with actual (myDataStructure[&#39;item2&#39;][-1].getId()) =&#39;bar&#39;, expected=&#39;bar&#39; ... passed</span>
<span class="c1">#  Assert that (actual == expected) with actual (myDataStructure[&#39;item3&#39;][-1].getId()) =&#39;baZaar&#39;, expected=&#39;baz&#39; ... failed</span>
<span class="c1">#       actual: &#39;baZaar&#39;</span>
<span class="c1">#     expected: &#39;baz&#39;</span>
<span class="c1">#                 ^</span>
</pre></div>
</div>
<p>As shown above, when (at least) two named parameters are provided and the condition string is a simple 
comparison using exactly two of the parameters, additional lines are logged if the 
assertion fails, showing at what point the two arguments differ (based on finding the longest common substring). 
So it’s a good idea to include both the actual and expected value as named parameters rather than as literals 
inside the condition string.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.5.1: </span>The ability to pass named keyword= parameters was added in 1.5.1 
(prior to that this method was deprecated).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conditionstring</strong> (<em>str</em>) – <p>A string containing Python code that will be evaluated using <code class="docutils literal notranslate"><span class="pre">eval()</span></code> 
as a boolean expression, for example <code class="docutils literal notranslate"><span class="pre">actualXXX</span> <span class="pre">==</span> <span class="pre">expected</span></code>, where XXX is a brief description of 
what value is being tested.</p>
<p>It’s best to put expected values into a separate named parameter (rather than using literals inside the 
conditionstring), since this will produce more informative messages if there is a failure.</p>
<p>Do not be tempted to use a Python f-string here, as that would deprive PySys of the 
opportunity to provide a self-describing message and outcome reason.</p>
</p></li>
<li><p><strong>**kwargs</strong> – All additional keyword arguments are treated as values which will be made available 
when evaluating the condition string. Any keyword ending in the special suffix <code class="docutils literal notranslate"><span class="pre">__eval</span></code> will be treated 
as a Python expression string (rather than a string literal) and will be be evaluated in a namespace 
containing the local variables of the calling code and (on Python 3.6+) any preceding named parameters.</p></li>
<li><p><strong>*positional_arguments</strong> – (deprecated) Unnamed positional arguments will be 
substituted into the condition string using the old <code class="docutils literal notranslate"><span class="pre">%</span></code> format string mechanism, before it is evaluated. 
This feature is deprecated as it provides poor diagnostic information, requires string parameters to be 
explicitly escaped using <code class="docutils literal notranslate"><span class="pre">repr()</span></code>, and only permits stringifiable 
data structures to be used by the conditionstring. Instead use named <code class="docutils literal notranslate"><span class="pre">keyword=</span></code> in all new tests.</p></li>
<li><p><strong>failureOutcome=FAILED</strong> – The outcome that will be added if the condition fails. For example you could 
set this to <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.BADPERF" title="pysys.constants.BADPERF"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants.BADPERF</span></code></a> for a performance assertion. Added in PySys v2.1.</p></li>
<li><p><strong>abortOnError=False</strong> – Set to True to make the test immediately abort if the
assertion fails. By default this method produces a BLOCKED output 
but does not throw if the eval(…) cannot be executed.</p></li>
<li><p><strong>assertMessage=''</strong> (<em>str</em>) – A high-level description of what the assertion is achieving, used in log messages and 
the outcome reason. For example “Check the startup logging”. Alternatively, to add some <em>additional</em> 
information to the default message message (e.g. which file/server it pertains to etc), just add the info as 
a string value with an extra keyword argument e.g. <code class="docutils literal notranslate"><span class="pre">server=&quot;server1&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the assertion succeeds, False if a failure outcome was appended (and abortOnError=False).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.logValueDiff">
<code class="sig-name descname">logValueDiff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">actual</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">expected</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">logFunction</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">namedvalues</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.logValueDiff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.logValueDiff" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs the differences between two values in a human-friendly way, on multiple lines (as displayed by <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a>).</p>
<p>Special handling is provided for common types such as strings, lists and dicts (note that this isn’t intended 
for use with data structures whose string representation is too big to display on the console).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual</strong> (<em>obj</em>) – The actual value. 
Alternatively, this parameter can be ignored and a value with a different key provided as a keyword argument instead.</p></li>
<li><p><strong>expected</strong> (<em>obj</em>) – The baseline/expected value from which a diff will be computed to the actual value. 
Alternatively, this parameter can be ignored and a value with a different key provided as a keyword argument instead.</p></li>
<li><p><strong>logFunction</strong> (<em>function</em>) – By default each line is logged at INFO level using <code class="docutils literal notranslate"><span class="pre">log.info()</span></code>, but an alternative 
log function with the same signature can be provided if desired.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.assertTrue">
<code class="sig-name descname">assertTrue</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expr</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">assertMessage</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.assertTrue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.assertTrue" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a validation assert on the supplied expression evaluating to true.</p>
<dl class="field-list simple">
<dt class="field-odd">Deprecated</dt>
<dd class="field-odd"><p>Use <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a> instead of this method, which produces 
clearer messages if the assertion fails.</p>
</dd>
</dl>
<p>If the supplied expression evaluates to true a <code class="xref py py-obj docutils literal notranslate"><span class="pre">PASSED</span></code> outcome is added to the 
outcome list. Should the expression evaluate to false, a <code class="xref py py-obj docutils literal notranslate"><span class="pre">FAILED</span></code> outcome is added.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expr</strong> – The expression, as a boolean, to check for the True | False value</p></li>
<li><p><strong>abortOnError</strong> – Set to True to make the test immediately abort if the
assertion fails.</p></li>
<li><p><strong>assertMessage</strong> – Overrides the string used to describe this 
assertion in log messages and the outcome reason.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the assertion succeeds, False if a failure outcome was appended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.assertFalse">
<code class="sig-name descname">assertFalse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expr</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">assertMessage</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.assertFalse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.assertFalse" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a validation assert on the supplied expression evaluating to false.</p>
<dl class="field-list simple">
<dt class="field-odd">Deprecated</dt>
<dd class="field-odd"><p>Use <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a> instead of this method, which produces 
clearer messages if the assertion fails.</p>
</dd>
</dl>
<p>If the supplied expression evaluates to false a <code class="xref py py-obj docutils literal notranslate"><span class="pre">PASSED</span></code> outcome is added to the 
outcome list. Should the expression evaluate to true, a <code class="xref py py-obj docutils literal notranslate"><span class="pre">FAILED</span></code> outcome is added.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expr</strong> – The expression to check for the true | false value</p></li>
<li><p><strong>abortOnError</strong> – Set to True to make the test immediately abort if the
assertion fails.</p></li>
<li><p><strong>assertMessage</strong> – Overrides the string used to describe this 
assertion in log messages and the outcome reason.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the assertion succeeds, False if a failure outcome was appended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.assertDiff">
<code class="sig-name descname">assertDiff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file1</span></em>, <em class="sig-param"><span class="n">file2</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">filedir1</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">filedir2</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ignores</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">sort</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">replace</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">includes</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">assertMessage</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stripWhitespace</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.assertDiff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.assertDiff" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a validation by comparing the contents of two text files, typically a file from the 
output directory against a file in the <code class="docutils literal notranslate"><span class="pre">&lt;testdir&gt;/Reference/</span></code> directory containing the expected output.</p>
<p>Differences in line ending are always ignored, and depending on the value of <code class="docutils literal notranslate"><span class="pre">stripWhitespace</span></code> leading 
and trailing whitespace may also be ignored.</p>
<p>The files can be pre-processed prior to the comparison to either ignore particular lines, 
sort their constituent lines, replace matches to regular 
expressions in a line with an alternate value, or to only include particular lines. 
However, it is often easier to instead use 
<a class="reference internal" href="#pysys.basetest.BaseTest.copy" title="pysys.basetest.BaseTest.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code></a> to perform the transformations (e.g. stripping out timestamps, finding lines of interest etc)
and then separately call assertDiff on the file generated by copy. This makes it easier to generate a suitable 
reference file and to diagnose test failures. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">assertDiff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s1">&#39;myfile.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;myfile-processed.txt&#39;</span><span class="p">,</span> <span class="n">mappers</span><span class="o">=</span><span class="p">[</span><span class="n">RegexReplace</span><span class="p">(</span><span class="n">RegexReplace</span><span class="o">.</span><span class="n">DATETIME_REGEX</span><span class="p">,</span> <span class="s1">&#39;&lt;timestamp&gt;&#39;</span><span class="p">)])))</span>
</pre></div>
</div>
<p>The above example shows a very compact form of assertDiff, which uses the fact that copy() returns 
the path of the destination file, and that there is no need to specify assertDiff’s file2 (reference) 
parameter if it’s the same basename as the first argument (just located in a different directory). In practice 
it’s very convenient to use the same basename for both the reference file and the output file it’s compared to.</p>
<p>Should the files after pre-processing be equivalent a <code class="xref py py-obj docutils literal notranslate"><span class="pre">PASSED</span></code> outcome is added to the test outcome list, 
otherwise a <code class="xref py py-obj docutils literal notranslate"><span class="pre">FAILED</span></code> outcome is added.</p>
<p>If you have any serialized dictionary/map data structures in the comparison files, or any lists that come from 
a directory listing, be really careful to ensure there is deterministic sorting of the keys/filenames, as 
by default the ordering is often subject to unpredictable changes when upgrading tools or switching between 
OSes, and you don’t want to have to update lots of testcases every time the sorting changes. If you are able 
to get the data into a Python data structure (e.g. by serializing from JSON), 
Python’s <code class="docutils literal notranslate"><span class="pre">json.dump(...,</span> <span class="pre">sort_keys=True)</span></code> can be a convenient way to produce a predictable order for 
dictionary keys.</p>
<p>If you have a large set of test reference files which need to be updated after a behaviour or output formatting 
change, you can use a special command line option which makes <code class="docutils literal notranslate"><span class="pre">assertDiff</span></code> overwrite the reference files with 
a copy of the actual comparison file in cases where the diff would otherwise fail. 
Use this feature with caution, since it overwrites reference files with no backup. In 
particular, make sure you have committed all reference files to version control before running the command, and 
the afterwards be sure to carefully check the resulting diff to make sure the changes were as expected before 
committing. To use 
this feature, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pysys</span><span class="o">.</span><span class="n">py</span> <span class="n">run</span> <span class="o">-</span><span class="n">XautoUpdateAssertDiffReferences</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file1</strong> (<em>str</em>) – The actual (or first) file to be compared; can be an absolute path or relative to the test output directory.</p></li>
<li><p><strong>file2</strong> (<em>str</em>) – The expected/reference (or second) file to be compared; can be an absolute path or relative to the Reference directory.
The default is for file2 to be the same basename as file1 (but located in the Reference/ directory).</p></li>
<li><p><strong>filedir1</strong> (<em>str</em>) – The dirname of the first file (defaults to the testcase output subdirectory)</p></li>
<li><p><strong>filedir2</strong> (<em>str</em>) – The dirname of the second file (defaults to the testcase reference directory)</p></li>
<li><p><strong>ignores</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – A list of regular expressions used to denote lines in the files which should be ignored</p></li>
<li><p><strong>sort</strong> (<em>bool</em>) – Boolean flag to indicate if the lines in the files should be sorted prior to the comparison</p></li>
<li><p><strong>list</strong><strong>[</strong><strong>(</strong><strong>regexp:str</strong><strong>,</strong><strong>repl:str</strong><strong>)</strong><strong>,</strong><strong>..</strong><strong>]</strong><strong>replace</strong> – List of tuples of the form (‘regexpr’, ‘replacement’). For each regular expression in the 
list, any occurences in the files are replaced with the replacement value prior to the comparison being 
carried out. This is often useful to replace timestamps in logfiles etc.</p></li>
<li><p><strong>stripWhitespace</strong> (<em>bool</em>) – If True, every line has leading and trailing whitespace stripped before comparison, 
which means indentation differences and whether the file ends with a blank line do not affect the outcome. 
If the value is <code class="docutils literal notranslate"><span class="pre">None</span></code>, delegates to the value of the project property <code class="docutils literal notranslate"><span class="pre">defaultAssertDiffStripWhitespace</span></code> 
(which is True for old projects, but recommended to be False for new projects).</p></li>
<li><p><strong>includes</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – A list of regular expressions used to denote lines in the files which should be used in the 
comparison. Only lines which match an expression in the list are used for the comparison.</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – The encoding to use to open the file. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>abortOnError</strong> (<em>bool</em>) – Set to True to make the test immediately abort if the
assertion fails.</p></li>
<li><p><strong>assertMessage</strong> (<em>str</em>) – An additional high-level description of what this assertion is checking, 
e.g. “Assert message contents match expected values”. 
Used in log messages and the outcome reason.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the assertion succeeds, False if a failure outcome was appended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.assertThatGrep">
<code class="sig-name descname">assertThatGrep</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">grepRegex</span></em>, <em class="sig-param"><span class="n">conditionstring</span><span class="o">=</span><span class="default_value">'value == expected'</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reFlags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">mappers</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargsForAssertThat</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.assertThatGrep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.assertThatGrep" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a validation by using a regular expression to extract a “value” from a text file and then check 
the extracted value using an <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a> conditionstring.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is the typical case - &quot;value&quot; is assigned to the first (...) regex group, and keyword parameters </span>
<span class="c1"># (e.g. &quot;expected=&quot;) are used to validate that the &quot;value&quot; is correct</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertThatGrep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;Successfully authenticated user &quot;([^&quot;]*)&quot;&#39;</span><span class="p">,</span> 
        <span class="s2">&quot;value == expected&quot;</span><span class="p">,</span> <span class="n">expected</span><span class="o">=</span><span class="s1">&#39;myuser&#39;</span><span class="p">)</span>

<span class="c1"># In cases where you need multiple regex groups for matching purpose, name the one containing the value using (?P&lt;value&gt;...)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertThatGrep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;Successfully authenticated user &quot;([^&quot;]*)&quot; in (?P&lt;value&gt;[^ ]+) seconds&#39;</span><span class="p">,</span> 
        <span class="s2">&quot;0.0 &lt;= float(value) &lt;= 60.0&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This method is implemented using <a class="reference internal" href="#pysys.basetest.BaseTest.grep" title="pysys.basetest.BaseTest.grep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grep</span></code></a> and <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a>, so see those methods for more detailed 
information on the parameters.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – The name or relative/absolute path of the file to be searched.</p></li>
<li><p><strong>grepRegex</strong> (<em>str</em>) – The regular expression to use for extracting the value of interest from the file. 
Typically this will use a <code class="docutils literal notranslate"><span class="pre">(...)</span></code> regular expression group to identify the part of the expression 
containing the value; alternatively a single <code class="docutils literal notranslate"><span class="pre">(?P&lt;value&gt;...)</span></code> named group may be used.</p></li>
<li><p><strong>conditionstring</strong> (<em>str</em>) – <p>A string containing Python code that will be evaluated using <code class="docutils literal notranslate"><span class="pre">eval()</span></code> 
to validate that “value” is correct. For example <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">==</span> <span class="pre">expected</span></code>.</p>
<p>It’s best to put expected values into a separate named parameter (rather than using literals inside the 
conditionstring), since this will produce more informative messages if there is a failure.</p>
<p>Do not be tempted to use a Python f-string here, as that would deprive PySys of the 
opportunity to provide a self-describing message and outcome reason.</p>
</p></li>
<li><p><strong>mappers</strong> (<em>List</em><em>[</em><em>callable</em><em>[</em><em>str</em><em>]</em><em>-&gt;str</em><em>]</em>) – <p>A list of filter functions that will be used to pre-process each 
line from the file (returning None if the line is to be filtered out). This provides a very powerful 
capability for filtering the file, for example <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.IncludeLinesBetween" title="pysys.mappers.IncludeLinesBetween"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.IncludeLinesBetween</span></code></a> 
provides the ability to filter in/out sections of a file.</p>
<p>Do not share mapper instances across multiple tests or threads as this can cause race conditions.</p>
</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – The encoding to use to open the file. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>reFlags</strong> (<em>int</em>) – <p>Zero or more flags controlling how the behaviour of regular expression matching, 
combined together using the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator, for example <code class="docutils literal notranslate"><span class="pre">reFlags=re.VERBOSE</span> <span class="pre">|</span> <span class="pre">re.IGNORECASE</span></code>.</p>
<p>For details see the <code class="docutils literal notranslate"><span class="pre">re</span></code> module in the Python standard library. Note that <code class="docutils literal notranslate"><span class="pre">re.MULTILINE</span></code> cannot 
be used because expressions are matched against one line at a time.</p>
</p></li>
<li><p><strong>abortOnError</strong> (<em>bool</em>) – Set to True to make the test immediately abort if the
assertion fails. By default this method produces a BLOCKED output 
but does not throw if the eval(…) cannot be executed.</p></li>
<li><p><strong>assertMessage=''</strong> (<em>str</em>) – A high-level description of what the assertion is achieving, used in log messages and 
the outcome reason. For example “Check the startup logging”. Alternatively, to add some <em>additional</em> 
information to the default message message (e.g. which file/server it pertains to etc), just add the info as 
a string value with an extra keyword argument e.g. <code class="docutils literal notranslate"><span class="pre">server=&quot;server1&quot;</span></code>.</p></li>
<li><p><strong>**kwargs</strong> – All additional keyword arguments are treated as values which will be made available 
when evaluating the condition string. Any keyword ending in the special suffix <code class="docutils literal notranslate"><span class="pre">__eval</span></code> will be treated 
as a Python expression string (rather than a string literal) and will be be evaluated in a namespace 
containing the local variables of the calling code and (on Python 3.6+) any preceding named parameters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the assertion succeeds, False if a failure outcome was appended (and abortOnError=False).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.assertGrep">
<code class="sig-name descname">assertGrep</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">_expr</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">_unused</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">contains</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ignores</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">literal</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">assertMessage</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reFlags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">mappers</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">expr</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">filedir</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.assertGrep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.assertGrep" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a validation by checking for the presence or absence of a regular expression in the specified text file.</p>
<p>Note that if your goal is to check that a value in the file matches some criteria, it is better to 
use <a class="reference internal" href="#pysys.basetest.BaseTest.assertThatGrep" title="pysys.basetest.BaseTest.assertThatGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThatGrep</span></code></a> instead of this function, as assertThatGrep can produce better messages on failure, and 
also allows for more powerful matching using a full Python expression 
(e.g. numeric range checks, pre-processing strings to normalize case, etc). If you need to extract a string for 
further processing without updating the test outcome, consider using <a class="reference internal" href="#pysys.basetest.BaseTest.grep" title="pysys.basetest.BaseTest.grep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grep</span></code></a> instead.</p>
<p>The assertGrep method is good for checking in a log to confirm that something happened, or to check that 
there are no error messages. 
When contains=True it adds a <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.PASSED" title="pysys.constants.PASSED"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PASSED</span></code></a> outcome if found or a 
<a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.FAILED" title="pysys.constants.FAILED"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FAILED</span></code></a> outcome if not found (except when where are named groups in the expression 
in which case <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.BLOCKED" title="pysys.constants.BLOCKED"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BLOCKED</span></code></a> is used to indicate that the return value is not valid).
When contains=False this is inverted so a <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.PASSED" title="pysys.constants.PASSED"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PASSED</span></code></a> outcome is added if not found 
and <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.FAILED" title="pysys.constants.FAILED"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FAILED</span></code></a> if found.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">assertGrep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39; ERROR .*&#39;</span><span class="p">,</span> <span class="n">contains</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># If error messages may be accompanied by stack traces you can use a mapper to join them into the same line </span>
<span class="c1"># so if your test fails, the outcome reason includes all the information. This also allows ignoring errors </span>
<span class="c1"># based on the stack trace:</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertGrep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39; (ERROR|FATAL) .*&#39;</span><span class="p">,</span> <span class="n">contains</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
        <span class="n">mappers</span><span class="o">=</span><span class="p">[</span><span class="n">pysys</span><span class="o">.</span><span class="n">mappers</span><span class="o">.</span><span class="n">JoinLines</span><span class="o">.</span><span class="n">JavaStackTrace</span><span class="p">()],</span>     
        <span class="n">ignores</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Caused by: java.lang.RuntimeError: My expected exception&#39;</span><span class="p">])</span>

<span class="c1"># In Python 3+, f-Strings can be used to substitute in parameters, including in-line escaping of regex literals:</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertGrep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Successfully authenticated user &quot;</span><span class="si">{</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">username</span><span class="p">)</span><span class="si">}</span><span class="s1">&quot; in .* seconds[.]&#39;</span><span class="p">)</span>

<span class="c1"># If you need to use \ characters use a raw r&#39;...&#39; string to avoid the need for Python \ escaping in </span>
<span class="c1"># addition to regex escaping. Square brackets are often the clearest way to escape regular expression </span>
<span class="c1"># characters such as \ . and ()</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertGrep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;c:[\]Foo[\]bar[.]txt&#39;</span><span class="p">)</span>

<span class="c1"># The IncludeLinesBetween mapper is very useful if you want to grep within a subset of the lines:</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertGrep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;MyClass&#39;</span><span class="p">,</span> <span class="n">mappers</span><span class="o">=</span><span class="p">[</span>
        <span class="n">pysys</span><span class="o">.</span><span class="n">mappers</span><span class="o">.</span><span class="n">IncludeLinesBetween</span><span class="p">(</span><span class="s1">&#39;Error message.* - stack trace is:&#39;</span><span class="p">,</span> <span class="n">stopBefore</span><span class="o">=</span><span class="s1">&#39;^$&#39;</span><span class="p">),</span>
<span class="p">])</span>
</pre></div>
</div>
<p>The behaviour of the regular expression can be controlled using <code class="docutils literal notranslate"><span class="pre">reFlags=</span></code>. For example, to perform 
case-insensitive matching and to use Python’s verbose regular expression syntax which permits whitespace 
and comments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">assertGrep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">reFlags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="n">r</span>\<span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        in\   </span>
<span class="s2">        \d +  # the integral part</span>
<span class="s2">        \.    # the decimal point</span>
<span class="s2">        \d *  # some fractional digits</span>
<span class="s2">        \ seconds\. # in verbose regex mode we escape spaces with a slash</span>
<span class="s2">        </span><span class="se">\&quot;</span><span class="s2">&quot;&quot;)</span>
</pre></div>
</div>
<p>Remember to escape regular expression special characters such as <code class="docutils literal notranslate"><span class="pre">.</span></code>, <code class="docutils literal notranslate"><span class="pre">(</span></code>, <code class="docutils literal notranslate"><span class="pre">[</span></code>, <code class="docutils literal notranslate"><span class="pre">{</span></code> and <code class="docutils literal notranslate"><span class="pre">\</span></code> if you want them to 
be treated as literal values. If you have a regular expression string with backslashes, it’s best to use a ‘raw’ 
Python string so that you don’t need to double-escape them, e.g. <code class="docutils literal notranslate"><span class="pre">self.assertGrep(...,</span> <span class="pre">expr=r'c:\\Foo\\filename\.txt')</span></code>.</p>
<p>If you want to search for a string that needs lots of regex escaping, a nice trick is to use a 
substitution string (containing only A-Z chars) for the regex special characters and pass everything else 
through re.escape:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">assertGrep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;A&quot;string[with \lots*] of crazy characters e.g. VALUE.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;VALUE&#39;</span><span class="p">,</span> <span class="s1">&#39;(.*)&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.5.1: </span>The return value and reFlags were added in 1.5.1.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – The name or relative/absolute path of the file to be searched.</p></li>
<li><p><strong>expr</strong> (<em>str</em>) – <p>The regular expression to check for in the file (or a string literal if literal=True), 
for example <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">ERROR</span> <span class="pre">.*&quot;</span></code>.</p>
<p>Remember to escape regular expression special characters such as <code class="docutils literal notranslate"><span class="pre">.</span></code>, <code class="docutils literal notranslate"><span class="pre">(</span></code>, <code class="docutils literal notranslate"><span class="pre">[</span></code>, <code class="docutils literal notranslate"><span class="pre">{</span></code> and <code class="docutils literal notranslate"><span class="pre">\</span></code> if you want them to 
be treated as literal values.</p>
<p>If you wish to do something with the text inside the match you can use the <code class="docutils literal notranslate"><span class="pre">re</span></code> named 
group syntax <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> to specify a name for parts of the regular expression.</p>
<p>For contains=False matches, you should end the expr with <code class="xref py py-obj docutils literal notranslate"><span class="pre">*</span></code> if you wish to include just the 
matching text in the outcome failure reason. If contains=False and expr does not end with a <code class="xref py py-obj docutils literal notranslate"><span class="pre">*</span></code> 
then the entire matching line will be included in the outcome failure reason.</p>
</p></li>
<li><p><strong>contains</strong> (<em>bool</em>) – Boolean flag to specify if the expression should or should not be seen in the file.</p></li>
<li><p><strong>ignores</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – Optional list of regular expressions that will be 
ignored when reading the file. Ignore expressions are applied <em>after</em> any mappers.</p></li>
<li><p><strong>mappers</strong> (<em>List</em><em>[</em><em>callable</em><em>[</em><em>str</em><em>]</em><em>-&gt;str</em><em>]</em>) – <p>A list of filter functions that will be used to pre-process each 
line from the file (returning None if the line is to be filtered out). This provides a very powerful 
capability for filtering the file, for example <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.IncludeLinesBetween" title="pysys.mappers.IncludeLinesBetween"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.IncludeLinesBetween</span></code></a> 
provides the ability to filter in/out sections of a file and <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.JoinLines" title="pysys.mappers.JoinLines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.JoinLines</span></code></a> can combine related 
error lines such as stack trace to provide all the information in the test outcome reason.</p>
<p>Mappers must always preserve the final <code class="docutils literal notranslate"><span class="pre">\n</span></code> of each line (if present).</p>
<p>Do not share mapper instances across multiple tests or threads as this can cause race conditions.</p>
<p>Added in PySys 1.6.0.</p>
</p></li>
<li><p><strong>literal</strong> (<em>bool</em>) – By default expr is treated as a regex, but set this to True to pass in 
a string literal instead.</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – The encoding to use to open the file. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>abortOnError</strong> (<em>bool</em>) – Set to True to make the test immediately abort if the
assertion fails.</p></li>
<li><p><strong>assertMessage</strong> (<em>str</em>) – An additional high-level description of what this assertion is checking, 
e.g. “Check for expected error message”. 
Used in log messages and the outcome reason.</p></li>
<li><p><strong>filedir</strong> (<em>str</em>) – The directory of the file (defaults to the testcase output subdirectory); this is 
deprecated, as it’s simpler to just include the directory in the file parameter.</p></li>
<li><p><strong>reFlags</strong> (<em>int</em>) – <p>Zero or more flags controlling how the behaviour of regular expression matching, 
combined together using the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator, for example <code class="docutils literal notranslate"><span class="pre">reFlags=re.VERBOSE</span> <span class="pre">|</span> <span class="pre">re.IGNORECASE</span></code>.</p>
<p>For details see the <code class="docutils literal notranslate"><span class="pre">re</span></code> module in the Python standard library. Note that <code class="docutils literal notranslate"><span class="pre">re.MULTILINE</span></code> cannot 
be used because expressions are matched against one line at a time. Added in PySys 1.5.1.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>The <code class="docutils literal notranslate"><span class="pre">re.Match</span></code> object, or None if there was no match (note the return value is not affected by 
the contains=True/False parameter).</p>
<p>However if the expr contains any <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups, then a dict is returned 
containing <code class="docutils literal notranslate"><span class="pre">dict(groupName:</span> <span class="pre">str,</span> <span class="pre">matchValue:</span> <span class="pre">str</span> <span class="pre">or</span> <span class="pre">None)</span></code> (or an empty <code class="docutils literal notranslate"><span class="pre">{}</span></code> dict if there is no match) 
which allows the assertGrep result to be passed to <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a> for further checking (typically 
unpacked using the <code class="docutils literal notranslate"><span class="pre">**</span></code> operator; see example above).</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.assertLastGrep">
<code class="sig-name descname">assertLastGrep</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">_expr</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">_unused</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">contains</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ignores</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">includes</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">assertMessage</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reFlags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">expr</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">filedir</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.assertLastGrep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.assertLastGrep" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a validation assert on a regular expression occurring in the last line of a text file.</p>
<p>Rather than using this method, use <a class="reference internal" href="#pysys.basetest.BaseTest.grepAll" title="pysys.basetest.BaseTest.grepAll"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grepAll</span></code></a> with <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a> for better error messages and more 
maintainable tests, e.g. you can extract the last line of a file easily 
with <code class="docutils literal notranslate"><span class="pre">self.grepAll(file,</span> <span class="pre">'.')[0]</span></code>.</p>
<p>When the <code class="xref py py-obj docutils literal notranslate"><span class="pre">contains</span></code> input argument is set to true, this method will add a <code class="xref py py-obj docutils literal notranslate"><span class="pre">PASSED</span></code> outcome 
to the test outcome list if the supplied regular expression is seen in the file; otherwise a 
<code class="xref py py-obj docutils literal notranslate"><span class="pre">FAILED</span></code> outcome is added. Should <code class="xref py py-obj docutils literal notranslate"><span class="pre">contains</span></code> be set to false, a <code class="xref py py-obj docutils literal notranslate"><span class="pre">PASSED</span></code> outcome will only 
be added should the regular expression not be seen in the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – The basename of the file used in the grep</p></li>
<li><p><strong>filedir</strong> – The dirname of the file (defaults to the testcase output subdirectory)</p></li>
<li><p><strong>expr</strong> – The regular expression to check for in the last line of the file</p></li>
<li><p><strong>contains</strong> – Boolean flag to denote if the expression should or should not be seen in the file</p></li>
<li><p><strong>ignores</strong> – A list of regular expressions used to denote lines in the file which should be ignored</p></li>
<li><p><strong>includes</strong> – A list of regular expressions used to denote lines in the file which should be used in the assertion.#</p></li>
<li><p><strong>encoding</strong> – The encoding to use to open the file. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>abortOnError</strong> – Set to True to make the test immediately abort if the
assertion fails.</p></li>
<li><p><strong>assertMessage</strong> (<em>str</em>) – An additional high-level description of what this assertion is checking, 
e.g. “Assert error message is as expected”. 
Used in log messages and the outcome reason.</p></li>
<li><p><strong>reFlags</strong> (<em>int</em>) – <p>Zero or more flags controlling how the behaviour of regular expression matching, 
combined together using the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator, for example <code class="docutils literal notranslate"><span class="pre">reFlags=re.VERBOSE</span> <span class="pre">|</span> <span class="pre">re.IGNORECASE</span></code>.</p>
<p>For details see the <code class="docutils literal notranslate"><span class="pre">re</span></code> module in the Python standard library. Note that <code class="docutils literal notranslate"><span class="pre">re.MULTILINE</span></code> cannot 
be used because expressions are matched against one line at a time. Added in PySys 1.5.1.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>The <code class="docutils literal notranslate"><span class="pre">re.Match</span></code> object, or None if there was no match (note the return value is not affected by 
the contains=True/False parameter).</p>
<p>However if the expr contains any <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups, then a dict is returned 
containing <code class="docutils literal notranslate"><span class="pre">dict(groupName:</span> <span class="pre">str,</span> <span class="pre">matchValue:</span> <span class="pre">str</span> <span class="pre">or</span> <span class="pre">None)</span></code> (or an empty <code class="docutils literal notranslate"><span class="pre">{}</span></code> dict if there is no match) 
which allows the result to be passed to <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a> for further checking (typically 
unpacked using the <code class="docutils literal notranslate"><span class="pre">**</span></code> operator; see <a class="reference internal" href="#pysys.basetest.BaseTest.assertGrep" title="pysys.basetest.BaseTest.assertGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertGrep</span></code></a> for a similar example).</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.assertOrderedGrep">
<code class="sig-name descname">assertOrderedGrep</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">_exprList</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">_unused</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">contains</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">assertMessage</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reFlags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">exprList</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">filedir</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.assertOrderedGrep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.assertOrderedGrep" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a validation assert on a list of regular expressions occurring in specified order in a text file.</p>
<p>When the <code class="xref py py-obj docutils literal notranslate"><span class="pre">contains</span></code> input argument is set to true, this method will append a <code class="xref py py-obj docutils literal notranslate"><span class="pre">PASSED</span></code> outcome 
to the test outcome list if the supplied regular expressions in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">exprList</span></code> are seen in the file
in the order they appear in the list; otherwise a <code class="xref py py-obj docutils literal notranslate"><span class="pre">FAILED</span></code> outcome is added. Should <code class="xref py py-obj docutils literal notranslate"><span class="pre">contains</span></code> be set 
to false, a <code class="xref py py-obj docutils literal notranslate"><span class="pre">PASSED</span></code> outcome will only be added should the regular expressions not be seen in the file in 
the order they appear in the list.</p>
<p>Warning: while this assertion method can be very convenient for checking the order of a small number of expressions, 
it becomes unwieldy when the number of expressions grows beyond a handful, and this is definitely not the 
best tool for the job if what you’re doing is really about checking that a subset of data from an output file 
matches expectations. For that use case, it’s better to do a filtered <a class="reference internal" href="#pysys.basetest.BaseTest.copy" title="pysys.basetest.BaseTest.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy()</span></code></a> of the file to remove 
prefixes (e.g. timestamps) and lines that are not important, and then use <a class="reference internal" href="#pysys.basetest.BaseTest.assertDiff" title="pysys.basetest.BaseTest.assertDiff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertDiff</span></code></a> to check the extracted 
text matches expectations. This approach makes it easier to write tests, and crucially makes it much easier 
to figure out what went wrong if they fail.</p>
<p>Similarly, if you need to check that an expression appears between two other lines (e.g. for a start/end of 
section) this method will not give you a reliable way to do that if there’s a chance the section markers 
could appear more than once in the file, so instead use the filtered <a class="reference internal" href="#pysys.basetest.BaseTest.copy" title="pysys.basetest.BaseTest.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy()</span></code></a> approach described above, or use 
<a class="reference internal" href="#pysys.basetest.BaseTest.assertGrep" title="pysys.basetest.BaseTest.assertGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertGrep</span></code></a> with a <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.IncludeLinesBetween" title="pysys.mappers.IncludeLinesBetween"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.IncludeLinesBetween</span></code></a> mapper.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – The basename of the file used in the ordered grep</p></li>
<li><p><strong>filedir</strong> – The dirname of the file (defaults to the testcase output subdirectory)</p></li>
<li><p><strong>exprList</strong> – A list of regular expressions which should occur in the file in the order they appear in the list</p></li>
<li><p><strong>contains</strong> – Boolean flag to denote if the expressions should or should not be seen in the file in the order specified</p></li>
<li><p><strong>encoding</strong> – The encoding to use to open the file. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>abortOnError</strong> – Set to True to make the test immediately abort if the
assertion fails.</p></li>
<li><p><strong>assertMessage</strong> (<em>str</em>) – An additional high-level description of what this assertion is checking, 
e.g. “Assert error messages are as expected”. 
Used in log messages and the outcome reason.</p></li>
<li><p><strong>reFlags</strong> (<em>int</em>) – <p>Zero or more flags controlling how the behaviour of regular expression matching, 
combined together using the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator, for example <code class="docutils literal notranslate"><span class="pre">reFlags=re.VERBOSE</span> <span class="pre">|</span> <span class="pre">re.IGNORECASE</span></code>.</p>
<p>For details see the <code class="docutils literal notranslate"><span class="pre">re</span></code> module in the Python standard library. Note that <code class="docutils literal notranslate"><span class="pre">re.MULTILINE</span></code> cannot 
be used because expressions are matched against one line at a time. Added in PySys 1.5.1.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the assertion succeeds, False if a failure outcome was appended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.assertLineCount">
<code class="sig-name descname">assertLineCount</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">_expr</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">_unused</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">condition</span><span class="o">=</span><span class="default_value">'&gt;=1'</span></em>, <em class="sig-param"><span class="n">ignores</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">assertMessage</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reFlags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">expr</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">filedir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mappers</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.assertLineCount"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.assertLineCount" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a validation assert on the count of lines in a text file matching a specific regular expression.</p>
<p>This method will add a <code class="xref py py-obj docutils literal notranslate"><span class="pre">PASSED</span></code> outcome to the outcome list if the number of lines in the 
file matching the specified regular expression evaluate to true when evaluated against 
the supplied <code class="docutils literal notranslate"><span class="pre">condition</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – The basename of the file used in the line count</p></li>
<li><p><strong>filedir</strong> – The dirname of the file (defaults to the testcase output subdirectory)</p></li>
<li><p><strong>expr</strong> – The regular expression string used to match a line of the file</p></li>
<li><p><strong>condition</strong> – The condition to be met for the number of lines matching the regular expression</p></li>
<li><p><strong>ignores</strong> – A list of regular expressions that will cause lines to be excluded from the count.
Ignore expressions are applied <em>after</em> any mappers.</p></li>
<li><p><strong>encoding</strong> – The encoding to use to open the file. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>mappers</strong> (<em>List</em><em>[</em><em>callable</em><em>[</em><em>str</em><em>]</em><em>-&gt;str</em><em>]</em>) – <p>A list of filter functions that will be used to pre-process each 
line from the file (returning None if the line is to be filtered out). This provides a very powerful 
capability for filtering the file, for example <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.IncludeLinesBetween" title="pysys.mappers.IncludeLinesBetween"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.IncludeLinesBetween</span></code></a> 
provides the ability to filter in/out sections of a file and <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.JoinLines" title="pysys.mappers.JoinLines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.JoinLines</span></code></a> can combine related 
error lines such as stack trace to provide all the information in the test outcome reason.</p>
<p>Mappers must always preserve the final <code class="docutils literal notranslate"><span class="pre">\n</span></code> of each line (if present).</p>
<p>Do not share mapper instances across multiple tests or threads as this can cause race conditions.</p>
<p>Added in PySys 2.0.</p>
</p></li>
<li><p><strong>abortOnError</strong> – Set to True to make the test immediately abort if the
assertion fails.</p></li>
<li><p><strong>assertMessage</strong> (<em>str</em>) – An additional high-level description of what this assertion is checking, 
e.g. “Assert all messages received”. 
Used in log messages and the outcome reason.</p></li>
<li><p><strong>reFlags</strong> (<em>int</em>) – <p>Zero or more flags controlling how the behaviour of regular expression matching, 
combined together using the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator, for example <code class="docutils literal notranslate"><span class="pre">reFlags=re.VERBOSE</span> <span class="pre">|</span> <span class="pre">re.IGNORECASE</span></code>.</p>
<p>For details see the <code class="docutils literal notranslate"><span class="pre">re</span></code> module in the Python standard library. Note that <code class="docutils literal notranslate"><span class="pre">re.MULTILINE</span></code> cannot 
be used because expressions are matched against one line at a time. Added in PySys 1.5.1.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the assertion succeeds, False if a failure outcome was appended.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.reportPerformanceResult">
<code class="sig-name descname">reportPerformanceResult</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">resultKey</span></em>, <em class="sig-param"><span class="n">unit</span></em>, <em class="sig-param"><span class="n">toleranceStdDevs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">resultDetails</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.reportPerformanceResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.reportPerformanceResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Reports a new performance number to the configured performance reporters, with an associated unique string key 
that identifies it for comparison purposes.</p>
<p>Where possible it is better to report the rate at which an operation can be performed (e.g. throughput)
rather than the total time taken, since this allows the number of iterations to be increased without affecting 
historical comparisons. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">reportPerformanceResult</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">calctime</span><span class="p">),</span> 
        <span class="s1">&#39;Fibonacci sequence calculation rate&#39;</span><span class="p">,</span> <span class="s1">&#39;/s&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>If your test runs in multiple modes, make sure you include some information about the mode in the resultKey:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">reportPerformanceResult</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">calctime</span><span class="p">),</span> 
        <span class="s1">&#39;Fibonacci sequence calculation rate using </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span> <span class="s1">&#39;/s&#39;</span><span class="p">,</span> 
        <span class="n">resultDetails</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">)])</span>
</pre></div>
</div>
<p>While use of standard units such as ‘/s’, ‘s’ or ‘ns’ (nano-seconds) is recommended, custom units can be 
provided when needed using <a class="reference internal" href="../autodocgen/pysys.perf.api.html#pysys.perf.api.PerformanceUnit" title="pysys.perf.api.PerformanceUnit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.perf.api.PerformanceUnit</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">reportPerformanceResult</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">calctime</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="p">,</span> 
        <span class="s1">&#39;Fibonacci sequence calculation rate using </span><span class="si">%s</span><span class="s1"> with different units&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span> 
        <span class="n">unit</span><span class="o">=</span><span class="n">PerformanceUnit</span><span class="p">(</span><span class="s1">&#39;kilo_fibonacci/s&#39;</span><span class="p">,</span> <span class="n">biggerIsBetter</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
<p>If the current test is executed with unusual options (e.g. enabling a profiler or code coverage) that would 
invalidate performance numbers, you can set <code class="docutils literal notranslate"><span class="pre">self.disablePerformanceReporting</span> <span class="pre">=</span> <span class="pre">True</span></code> to prevent 
<code class="docutils literal notranslate"><span class="pre">reportPerformanceResult</span></code> calls from doing anything.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – The numeric value to be reported. If a str is provided, it will be converted to a float.</p></li>
<li><p><strong>resultKey</strong> – A unique string that fully identifies what was measured, which will be
used to compare results from different test runs. For example “HTTP transport message sending throughput
using with 3 connections in SSL mode”. The resultKey must be unique across all test cases and modes. It should be fully
self-describing (without the need to look up extra information such as the associated testId). Do not include
the test id or units in the resultKey string. It must be stable across different runs, so cannot contain
process identifiers, date/times or other numbers that will vary. If possible resultKeys should be written
so that related results will be together when all performance results are sorted by resultKey, which usually
means putting general information near the start of the string and specifics (throughput/latency, sending/receiving)
towards the end of the string. It should be as concise as possible (given the above).</p></li>
<li><p><strong>unit</strong> – Identifies the unit the value is measured in, including whether bigger numbers are better or
worse (used to determine improvement or regression). Must be an instance of <a class="reference internal" href="../autodocgen/pysys.perf.api.html#pysys.perf.api.PerformanceUnit" title="pysys.perf.api.PerformanceUnit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.perf.api.PerformanceUnit</span></code></a>.
In most cases, use <code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.perf.api.PerformanceUnit.SECONDS</span></code> (e.g. for latency) or
<code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.perf.api.PerformanceUnit.PER_SECOND</span></code> (e.g. for throughput); the string literals ‘s’ and ‘/s’ can be
used as a shorthand for those PerformanceUnit instances.</p></li>
<li><p><strong>toleranceStdDevs</strong> – (optional) A float that indicates how many standard deviations away from the mean a
result needs to be to be considered a regression.</p></li>
<li><p><strong>resultDetails</strong> – (optional) A dictionary of detailed information about this specific result 
and/or test that should be recorded together with the result, for example detailed information about what mode 
or versions the test is measuring. Note this is result-specific, unlike the global “run details” shared across 
all tests in this PySys execution, which can be customized with a runner plugin.
If no resultDetails are specified explicitly then parameters from the test’s mode will be used if present.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.getDefaultFileEncoding">
<code class="sig-name descname">getDefaultFileEncoding</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">xargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.getDefaultFileEncoding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies what encoding should be used to read or write the specified 
text file. The default implementation for BaseTest delegates to the 
runner, which in turn gets its defaults from the <code class="docutils literal notranslate"><span class="pre">pysyproject.xml</span></code> 
configuration.</p>
<p>See <a class="reference internal" href="../autodocgen/pysys.process.user.html#pysys.process.user.ProcessUser.getDefaultFileEncoding" title="pysys.process.user.ProcessUser.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.user.ProcessUser.getDefaultFileEncoding</span></code></a> for more details.</p>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.abort">
<code class="sig-name descname">abort</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">outcome</span></em>, <em class="sig-param"><span class="n">outcomeReason</span></em>, <em class="sig-param"><span class="n">callRecord</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.abort" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise an AbortException with the specified outcome and reason.</p>
<p>See also <a class="reference internal" href="#pysys.basetest.BaseTest.skipTest" title="pysys.basetest.BaseTest.skipTest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">skipTest</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>outcome</strong> – The outcome, which will override any existing outcomes previously recorded.</p></li>
<li><p><strong>outcomeReason</strong> – A string summarizing the reason for the outcome.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.addCleanupFunction">
<code class="sig-name descname">addCleanupFunction</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fn</span></em>, <em class="sig-param"><span class="n">ignoreErrors</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.addCleanupFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a function that will be called as part of the <a class="reference internal" href="#pysys.basetest.BaseTest.cleanup" title="pysys.basetest.BaseTest.cleanup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanup</span></code></a> of this object.</p>
<p>Cleanup functions should have no arguments, and are invoked in reverse order with the most recently added first (LIFO), and
before the automatic termination of any remaining processes associated with this object.</p>
<p>Typical cleanup tasks are to cleanly shutdown processes (which is sometimes necessary to obtain code coverage 
information), and to (attempt to) delete large files/directories created by the test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">addCleanupFunction</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleanlyShutdownMyProcess</span><span class="p">(</span><span class="n">params</span><span class="p">))</span>
<span class="bp">self</span><span class="o">.</span><span class="n">addCleanupFunction</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">deleteDir</span><span class="p">(</span><span class="s1">&#39;my-large-dir&#39;</span><span class="p">),</span> <span class="n">ignoreErrors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">addCleanupFunction</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">deleteFile</span><span class="p">(</span><span class="s1">&#39;my-large-file.log&#39;</span><span class="p">),</span> <span class="n">ignoreErrors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> (<em>Callable</em><em>[</em><em>]</em>) – The cleanup function.</p></li>
<li><p><strong>ignoreErrors</strong> (<em>bool</em>) – By default, errors from cleanup functions will result in a test failure; set this to 
True to log them but not produce a test failure. This parameter was added in 1.6.0.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.addOutcome">
<code class="sig-name descname">addOutcome</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">outcome</span></em>, <em class="sig-param"><span class="n">outcomeReason</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">printReason</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">callRecord</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">override</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.addOutcome" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a validation outcome (and optionally a reason string) to the validation list.</p>
<p>The method provides the ability to add a validation outcome to the internal data structure 
storing the list of validation outcomes. Multiple validations may be performed, the current
supported validation outcomes of which are described in <a class="reference internal" href="#assertions-and-outcomes"><span class="std std-ref">Assertions and outcomes</span></a>.</p>
<p>The outcomes are considered to have a precedence order, as defined by the order of the outcomes listed
above. Thus a <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.BLOCKED" title="pysys.constants.BLOCKED"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants.BLOCKED</span></code></a> outcome has a higher precedence than a <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.PASSED" title="pysys.constants.PASSED"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants.PASSED</span></code></a> 
outcome. The outcomes are defined in <a class="reference internal" href="../autodocgen/pysys.constants.html#module-pysys.constants" title="pysys.constants"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants</span></code></a>.</p>
<p>This method is thread-safe.</p>
<p>Although this method exists on all subclasses of <a class="reference internal" href="../autodocgen/pysys.process.user.html#pysys.process.user.ProcessUser" title="pysys.process.user.ProcessUser"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.user.ProcessUser</span></code></a>, in practice only 
<a class="reference internal" href="#pysys.basetest.BaseTest" title="pysys.basetest.BaseTest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.basetest.BaseTest</span></code></a> subclasses actually do anything with the resulting outcome.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>outcome</strong> (<a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.Outcome" title="pysys.constants.Outcome"><em>pysys.constants.Outcome</em></a>) – The outcome to add, e.g. <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.FAILED" title="pysys.constants.FAILED"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants.FAILED</span></code></a>.</p></li>
<li><p><strong>outcomeReason</strong> (<em>str</em>) – A string summarizing the reason for the outcome, 
for example “Grep on x.log contains ‘ERROR: server failed’”.</p></li>
<li><p><strong>printReason</strong> (<em>bool</em>) – If True the specified outcomeReason will be printed</p></li>
<li><p><strong>abortOnError</strong> (<em>bool</em>) – If true abort the test on any error outcome. This should usually be set to 
False for assertions, or the configured <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.defaultAbortOnError</span></code> setting (typically True) for 
operations that involve waiting.</p></li>
<li><p><strong>callRecord</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – An array of strings of the form path:lineno indicating the call stack that lead 
to this outcome. This will be appended to the log output for better test triage.</p></li>
<li><p><strong>override</strong> (<em>bool</em>) – Remove any existing test outcomes when adding this one, ensuring 
that this outcome is the one and only one reported even if an existing outcome 
has higher precedence.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.allocateUniqueStdOutErr">
<code class="sig-name descname">allocateUniqueStdOutErr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">processKey</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.allocateUniqueStdOutErr" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate unique filenames of the form <code class="docutils literal notranslate"><span class="pre">processKey[.n].out/.err</span></code> 
which can be used for the <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a> <code class="docutils literal notranslate"><span class="pre">stdouterr</span></code> parameter.</p>
<p>The first time this is called it will return names like 
<code class="docutils literal notranslate"><span class="pre">('outdir/myprocess.out',</span> <span class="pre">'outdir/myprocess.err')</span></code>, the second time it will return 
<code class="docutils literal notranslate"><span class="pre">('outdir/myprocess.1.out',</span> <span class="pre">'outdir/myprocess.1.err')</span></code>, then 
<code class="docutils literal notranslate"><span class="pre">('outdir/myprocess.2.out',</span> <span class="pre">'outdir/myprocess.2.err')</span></code> etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>processKey</strong> (<em>str</em>) – A user-defined identifier that will form the prefix onto which <code class="docutils literal notranslate"><span class="pre">[.n].out</span></code> is appended</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A STDOUTERR_TUPLE named tuple of (stdout, stderr), where each is an absolute path.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../autodocgen/pysys.process.user.html#pysys.process.user.STDOUTERR_TUPLE" title="pysys.process.user.STDOUTERR_TUPLE">STDOUTERR_TUPLE</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.compareVersions">
<em class="property">static </em><code class="sig-name descname">compareVersions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">v1</span></em>, <em class="sig-param"><span class="n">v2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.compareVersions" title="Permalink to this definition">¶</a></dt>
<dd><p>Compares two alphanumeric dotted version strings to see which is more recent.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="n">thisversion</span><span class="p">,</span> <span class="s1">&#39;1.2.alpha-3&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="o">...</span> <span class="c1"># thisversion is newer than 1.2.alpha-3 </span>
</pre></div>
</div>
<p>The comparison algorithm ignores case, and normalizes separators ./-/_ 
so that <code class="docutils literal notranslate"><span class="pre">'1.alpha2'=='1Alpha2'</span></code>. Any string components are compared 
lexicographically with other strings, and compared to numbers 
strings are always considered greater.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="s1">&#39;10-alpha5.dev10&#39;</span><span class="p">,</span> <span class="s1">&#39;10alpha-5-dEv_10&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="c1"># normalization of case and separators</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;1....alpha.2&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;1Alpha2&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="c1"># ascii byte and unicode strings both supported</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="s1">&#39;1.2.0&#39;</span><span class="p">,</span> <span class="s1">&#39;1.2&#39;</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="s1">&#39;1.02&#39;</span><span class="p">,</span> <span class="s1">&#39;1.2&#39;</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="p">()</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="s1">&#39;1.2.3&#39;</span><span class="p">,</span> <span class="s1">&#39;1.2&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="s1">&#39;1.2&#39;</span><span class="p">,</span> <span class="s1">&#39;1.2.3&#39;</span><span class="p">)</span>
<span class="go">-1</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="s1">&#39;10.2&#39;</span><span class="p">,</span> <span class="s1">&#39;1.2&#39;</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="s1">&#39;1.2.text&#39;</span><span class="p">,</span> <span class="s1">&#39;1.2.0&#39;</span><span class="p">)</span> <span class="c1"># letters are &gt; numbers</span>
<span class="go">1</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="s1">&#39;1.2.text&#39;</span><span class="p">,</span> <span class="s1">&#39;1.2&#39;</span><span class="p">)</span> <span class="c1"># letters are &gt; numbers </span>
<span class="go">1</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="s1">&#39;10.2alpha1&#39;</span><span class="p">,</span> <span class="s1">&#39;10.2alpha&#39;</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="s1">&#39;10.2dev&#39;</span><span class="p">,</span> <span class="s1">&#39;10.2alpha&#39;</span><span class="p">)</span> <span class="c1"># letters are compared lexicographically</span>
<span class="go">1</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProcessUser</span><span class="o">.</span><span class="n">compareVersions</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>v1</strong> – A string containing a version number, with any number of components.</p></li>
<li><p><strong>v2</strong> – A string containing a version number, with any number of components.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an integer &gt; 0 if v1&gt;v2, 
an integer &lt; 0 if v1&lt;v2, 
or 0 if they are semantically the same.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">dest</span></em>, <em class="sig-param"><span class="n">mappers</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">symlinks</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ignoreIf</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">skipMappersIf</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">overwrite</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a directory or a single text or binary file, optionally tranforming the contents by filtering each line through a list of mapping functions.</p>
<p>If any <a class="reference internal" href="../autodocgen/pysys.mappers.html#module-pysys.mappers" title="pysys.mappers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers</span></code></a> are provided, the file is copied in text mode and 
each mapper is given the chance to modify or omit each line, or even reorder the lines of the file. 
If no mappers are provided, the file is copied in binary mode.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s1">&#39;output-raw.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;output-processed.txt&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> 
        <span class="n">mappers</span><span class="o">=</span><span class="p">[</span>
                <span class="k">lambda</span> <span class="n">line</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;Timestamp: &#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">)</span> <span class="k">else</span> <span class="n">line</span><span class="p">,</span> 
                <span class="k">lambda</span> <span class="n">line</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">),</span> 
                <span class="n">pysys</span><span class="o">.</span><span class="n">mappers</span><span class="o">.</span><span class="n">IncludeLinesBetween</span><span class="p">(</span><span class="s1">&#39;Error message .*:&#39;</span><span class="p">,</span> <span class="n">stopBefore</span><span class="o">=</span><span class="s1">&#39;^$&#39;</span><span class="p">),</span>
                <span class="n">pysys</span><span class="o">.</span><span class="n">mappers</span><span class="o">.</span><span class="n">RegexReplace</span><span class="p">(</span><span class="n">pysys</span><span class="o">.</span><span class="n">mappers</span><span class="o">.</span><span class="n">RegexReplace</span><span class="o">.</span><span class="n">DATETIME_REGEX</span><span class="p">,</span> <span class="s1">&#39;&lt;timestamp&gt;&#39;</span><span class="p">),</span>
        <span class="p">])</span>
</pre></div>
</div>
<p>In addition to the file contents the attributes such as modification time and 
executable permission will be copied where possible.</p>
<p>This function is useful for creating a modified version of an 
output file that’s more suitable for later validation steps such as 
diff-ing, and also for copying required files from the input to the 
output directory.</p>
<p>It can also be used for copying a whole directory, 
similar to <code class="docutils literal notranslate"><span class="pre">shutil.copytree</span></code> but with the advantages of support 
for long paths on Windows, better error safety, and that relative paths 
are evaluated relative to the self.output directory (which is both convenient, and 
safer than shutil’s evaluation relative to the current working 
directory).</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s1">&#39;src.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;dest.txt&#39;</span><span class="p">)</span>  <span class="c1"># copies to outputdir/dest.txt</span>
<span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s1">&#39;src.txt&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">)</span> <span class="c1"># copies to outputdir/src.txt, since self.output is an existing directory</span>
<span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s1">&#39;src.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;foo/&#39;</span><span class="p">)</span>      <span class="c1"># copies to outputdir/foo/src.txt since destination ends with a slash</span>
<span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s1">&#39;srcdirname&#39;</span><span class="p">,</span> <span class="s1">&#39;foo/&#39;</span><span class="p">)</span>   <span class="c1"># copies to outputdir/foo/srcdirname since destination ends with a slash</span>
</pre></div>
</div>
<p>For more information about pre-defined mappers, see <a class="reference internal" href="../autodocgen/pysys.mappers.html#module-pysys.mappers" title="pysys.mappers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers</span></code></a>. Custom mappers can be specified as simple 
functions or lambdas, however for advanced use cases you can 
additionally provide <code class="docutils literal notranslate"><span class="pre">mapper.fileStarted([self,]</span> <span class="pre">srcPath,</span> <span class="pre">destPath,</span> <span class="pre">srcFile,</span> <span class="pre">destFile)</span></code> and/or  
<code class="docutils literal notranslate"><span class="pre">mapper.fileFinished(...)</span></code> methods to allow stateful operations, or to perform extra read/write operations 
before lines are read/written. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CustomLineMapper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">fileStarted</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">srcPath</span><span class="p">,</span> <span class="n">destPath</span><span class="p">,</span> <span class="n">srcFile</span><span class="p">,</span> <span class="n">destFile</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">src</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">srcPath</span><span class="p">)</span>

        <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
                <span class="k">return</span> <span class="s1">&#39;&quot;&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">src</span><span class="o">+</span><span class="s1">&#39;&quot;: &#39;</span><span class="o">+</span><span class="n">line</span>

        <span class="k">def</span> <span class="nf">fileFinished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">srcPath</span><span class="p">,</span> <span class="n">destPath</span><span class="p">,</span> <span class="n">srcFile</span><span class="p">,</span> <span class="n">destFile</span><span class="p">):</span>
                <span class="n">destFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;footer added by CustomLineMapper&#39;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s1">&#39;src.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;dest.txt&#39;</span><span class="p">,</span> <span class="n">mappers</span><span class="o">=</span><span class="p">[</span><span class="n">CustomLineMapper</span><span class="p">()])</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.6.0: </span>Ability to copy directories was added, along with the <code class="docutils literal notranslate"><span class="pre">overwrite=</span></code>, <code class="docutils literal notranslate"><span class="pre">symlinks=</span></code>, 
<code class="docutils literal notranslate"><span class="pre">ignoreIf=</span></code> and <code class="docutils literal notranslate"><span class="pre">skipMappersIf=</span></code> arguments. </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src</strong> (<em>str</em>) – The source filename or directory, which can be an absolute path, or 
a path relative to the <code class="docutils literal notranslate"><span class="pre">self.output</span></code> directory. 
Use <code class="docutils literal notranslate"><span class="pre">src=self.input+'/myfile'</span></code> if you wish to copy a file from the test 
input directory.</p></li>
<li><p><strong>dest</strong> (<em>str</em>) – <p>The destination file or directory name, which can be an absolute path, or 
a path relative to the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.output</span></code> directory. Destination file(s) are overwritten if the 
dest already exists.</p>
<p>The dest and src can be the same for file copies (but not directory copies).</p>
<p>As a convenience to avoid repeating the same text in the src and destination, 
if the dest ends with a slash, or the src is a file and the dest is an existing directory, 
the dest is taken as a parent directory into which the src will be copied in retaining its current name.</p>
<p>It is best to avoid copies where the src dir already contains the dest (which would be recursive) such as 
copying the test dir (possibly configured as <code class="docutils literal notranslate"><span class="pre">self.input</span></code>) to destination <code class="docutils literal notranslate"><span class="pre">self.output</span></code>, however if this 
is attempted PySys will log a warning and copy everything else except the recursive part.</p>
</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) – If True, source files will be allowed to 
overwrite destination files, if False an exception will be raised if a destination file already exists. 
By default overwrite=None which means it’s enabled for single file copy() but disabled for directory copies.</p></li>
<li><p><strong>mappers</strong> (<em>List</em><em>[</em><em>callable</em><em>[</em><em>str</em><em>]</em><em>-&gt;str</em><em>]</em>) – <p>A list of filter functions that will be applied, 
in order, to map each line from source to destination. Each function accepts a string for 
the current line as input and returns either a string to write or 
None if the line is to be omitted. Any <code class="docutils literal notranslate"><span class="pre">None</span></code> items in the mappers list will be ignored. 
Mappers must always preserve the final <code class="docutils literal notranslate"><span class="pre">\n</span></code> of each line (if present).</p>
<p>See <a class="reference internal" href="../autodocgen/pysys.mappers.html#module-pysys.mappers" title="pysys.mappers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers</span></code></a> for some useful predefined mappers such as <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.IncludeLinesBetween" title="pysys.mappers.IncludeLinesBetween"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.IncludeLinesBetween</span></code></a>, 
<a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.RegexReplace" title="pysys.mappers.RegexReplace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.RegexReplace</span></code></a> and <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.SortLines" title="pysys.mappers.SortLines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.SortLines</span></code></a>.</p>
<p>If present the <code class="docutils literal notranslate"><span class="pre">mapper.fileStarted(...)</span></code> and/or <code class="docutils literal notranslate"><span class="pre">mapper.fileFinished(...)</span></code> methods will be called on each 
mapper in the list at the start and end of each file; see above for an example.</p>
<p>Do not share mapper instances across multiple tests or threads as this can cause race conditions.</p>
</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – The encoding to use to open the file (only used if mappers are provided; if not, it is 
opened in binary mode). 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>symlinks</strong> (<em>bool</em>) – Set to True if symbolic links in the source tree should be represented as symbolic 
links in the destination (rather than just being copied).</p></li>
<li><p><strong>ignoreIf</strong> (<em>callable</em><em>[</em><em>str</em><em>]</em><em>-&gt;bool</em>) – A callable that accepts a source path and returns True if 
this file/directory should be omitted from a directory copy. 
For example: <code class="docutils literal notranslate"><span class="pre">ignoreIf=lambda</span> <span class="pre">src:</span> <span class="pre">src.endswith(('.tmp',</span> <span class="pre">'.log')))</span></code></p></li>
<li><p><strong>skipMappersIf</strong> (<em>callable</em><em>[</em><em>str</em><em>]</em><em>-&gt;bool</em>) – A callable that accepts a source path and returns True if 
this file should be copied in binary mode (as if no mappers had been specified). 
For example: <code class="docutils literal notranslate"><span class="pre">skipMappersIf=lambda</span> <span class="pre">src:</span> <span class="pre">not</span> <span class="pre">src.endswith(('.xml',</span> <span class="pre">'.properties')))</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return str</dt>
<dd class="field-even"><p>the absolute path of the destination file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.createEnvirons">
<code class="sig-name descname">createEnvirons</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">overrides</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">addToLibPath</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">addToExePath</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">command</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.createEnvirons" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new customized dictionary of environment variables suitable 
for passing to <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess()</span></code></a>’s <code class="docutils literal notranslate"><span class="pre">environs=</span></code> argument.</p>
<p>As a starting point, this method uses the value returned by 
<a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultEnvirons" title="pysys.basetest.BaseTest.getDefaultEnvirons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultEnvirons()</span></code></a> for this <code class="xref py py-obj docutils literal notranslate"><span class="pre">command</span></code>. See the documentation on 
that method for more details. If you don’t care about minimizing the 
risk of your local environment affecting the test processes you start, 
just use <code class="xref py py-obj docutils literal notranslate"><span class="pre">environs=os.environ</span></code> to allow child processes to inherit the 
entire parent environment instead of using this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>overrides</strong> – A dictionary of environment variables whose 
values will be used instead of any existing values. 
You can use <code class="xref py py-obj docutils literal notranslate"><span class="pre">os.getenv('VARNAME','')</span></code> if you need to pass selected 
variables from the current process as part of the overrides list. 
If the value is set to None then any variable of this name will be 
deleted. Use unicode strings if possible (byte strings will be 
converted depending on the platform). 
A list of dictionaries can be specified, in which case the latest 
will override the earlier if there are any conflicts.</p></li>
<li><p><strong>addToLibPath</strong> – A path or list of paths to be prepended to the 
default value for the environment variable used to load libraries 
(or the value specified in overrides, if any), 
i.e. <code class="docutils literal notranslate"><span class="pre">[DY]LD_LIBRARY_PATH</span></code> on Unix or <code class="docutils literal notranslate"><span class="pre">PATH</span></code> on Windows. This is usually 
more convenient than adding it directly to <code class="xref py py-obj docutils literal notranslate"><span class="pre">overrides</span></code>.</p></li>
<li><p><strong>addToExePath</strong> – A path or list of paths to be prepended to the 
default value for the environment variable used to locate executables 
(or the value specified in overrides, if any), 
i.e. <code class="docutils literal notranslate"><span class="pre">PATH</span></code> on both Unix and Windows. This is usually 
more convenient than adding it directly to <code class="docutils literal notranslate"><span class="pre">overrides</span></code>.</p></li>
<li><p><strong>command</strong> – If known, the full path of the executable for which 
a default environment is being created (passed to <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultEnvirons" title="pysys.basetest.BaseTest.getDefaultEnvirons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultEnvirons</span></code></a>).</p></li>
<li><p><strong>kwargs</strong> – Overrides of this method should pass any additional 
kwargs down to the super implementation, to allow for future extensions.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new dictionary containing the environment variables.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.deleteDir">
<code class="sig-name descname">deleteDir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.deleteDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively delete the specified directory.</p>
<p>Does nothing if it does not exist. Raises an exception if the deletion fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – The path to be deleted. This can be an absolute path or 
relative to the testcase output directory.</p></li>
<li><p><strong>kwargs</strong> – Any additional arguments such as <code class="docutils literal notranslate"><span class="pre">retries</span></code> and <code class="docutils literal notranslate"><span class="pre">ignore_errors</span></code> are passed to 
<a class="reference internal" href="../autodocgen/pysys.utils.fileutils.html#pysys.utils.fileutils.deletedir" title="pysys.utils.fileutils.deletedir"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.utils.fileutils.deletedir()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.deleteFile">
<code class="sig-name descname">deleteFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.deleteFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the specified file, with optional retries and ignoring of errors.</p>
<p>Does nothing if it does not exist. Raises an exception if the deletion fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – The path to be deleted. This can be an absolute path or 
relative to the testcase output directory.</p></li>
<li><p><strong>kwargs</strong> – Any additional arguments such as <code class="docutils literal notranslate"><span class="pre">retries</span></code> and <code class="docutils literal notranslate"><span class="pre">ignore_errors</span></code> are passed to 
<a class="reference internal" href="../autodocgen/pysys.utils.fileutils.html#pysys.utils.fileutils.deletefile" title="pysys.utils.fileutils.deletefile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.utils.fileutils.deletefile()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.disableLogging">
<code class="sig-name descname">disableLogging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.disableLogging" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporarily stops logging for the current thread.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">disableLogging</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startProcess</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that this method will do nothing if the log level if pysys is run with <code class="docutils literal notranslate"><span class="pre">-vDEBUG</span></code> or <code class="docutils literal notranslate"><span class="pre">-vdisabledLogging=DEBUG</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.getBoolProperty">
<code class="sig-name descname">getBoolProperty</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">propertyName</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.getBoolProperty" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a True/False indicating whether the specified attribute is set 
on this object (typically as a result of specifying -X on the command 
line), or else from the project configuration.</p>
<p>See also <code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.baserunner.getXArg()</span></code> and <a class="reference internal" href="../autodocgen/pysys.config.project.html#pysys.config.project.Project.getProperty" title="pysys.config.project.Project.getProperty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.config.project.Project.getProperty()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>propertyName</strong> – The name of a property set on the command line 
or project configuration.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.getDefaultEnvirons">
<code class="sig-name descname">getDefaultEnvirons</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">command</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.getDefaultEnvirons" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new dictionary of environment variables, suitable for passing to 
<a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess()</span></code></a>, with a minimal clean set of environment variables 
for this platform, unaffected (as much as possible) by the 
environment that the tests are being run under.</p>
<p>This environment contains a minimal PATH/LD_LIBRARY_PATH but does not 
attempt to replicate the full set of default environment variables 
on each OS, and in particular it does not include any that identify 
the current username or home area. Additional environment 
variables can be added as needed with <a class="reference internal" href="#pysys.basetest.BaseTest.createEnvirons" title="pysys.basetest.BaseTest.createEnvirons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">createEnvirons</span></code></a> overrides. If 
you don’t care about minimizing the risk of your local environment 
affecting the test processes you start, just use <code class="xref py py-obj docutils literal notranslate"><span class="pre">environs=os.environ</span></code> 
to allow child processes to inherit the entire parent environment.</p>
<p>The <a class="reference internal" href="#pysys.basetest.BaseTest.createEnvirons" title="pysys.basetest.BaseTest.createEnvirons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">createEnvirons()</span></code></a> and <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess()</span></code></a> methods use this as the 
basis for creating a new set of default environment variables.</p>
<p>If needed this method can be overridden in subclasses to add common 
environment variables for every process invoked by startProcess, for 
example to enable options such as code coverage for Java/Python/etc. 
This is also a good place to customize behaviour for different 
operating systems.</p>
<p>Some features of this method can be configured by setting project 
properties:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">defaultEnvirons.ENV_KEY</span></code>: if any properties with this prefix are 
defined, an environment variable with the ENV_KEY is set by this method 
(unless the property value is empty). For example, to set a default 
JVM heap size for all processes with the <code class="docutils literal notranslate"><span class="pre">JAVA_TOOL_OPTIONS</span></code> environment 
variable you could set <code class="docutils literal notranslate"><span class="pre">defaultEnvirons.JAVA_TOOL_OPTIONS</span> <span class="pre">=</span> <span class="pre">-Xmx512M</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">defaultEnvironsDefaultLang</span></code>: if set to a value such as <code class="docutils literal notranslate"><span class="pre">en_US.UTF-8</span></code> 
the specified value is set for the LANG= variable on Unix; otherwise, 
the LANG variable is not set (which might result in use of the 
legacy POSIX/C encoding).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">defaultEnvironsTempDir</span></code>: if set the expression will be passed to 
Python <code class="docutils literal notranslate"><span class="pre">eval()</span></code> and used to set the OS-specific temp directory 
environment variables. A typical value is <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.output</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">defaultEnvironsLegacyMode</span></code>: set to true to enable compatibility 
mode which keeps the behaviour the same as PySys v1.1, 1.2 and 1.3, 
namely using a completely empty default environment on Unix, and 
a copy of the entire parent environment on Windows. This is not 
recommended unless you have a lot of legacy tests that cannot 
easily be changed to only set minimal required environment 
variables using <a class="reference internal" href="#pysys.basetest.BaseTest.createEnvirons" title="pysys.basetest.BaseTest.createEnvirons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">createEnvirons()</span></code></a>.</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> – <p>If known, the full path of the executable for which 
a default environment is being created (when called from <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a> 
this is always set). This allows default environment variables to be 
customized for different process types e.g. Java, Python, etc.</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">command=sys.executable</span></code> to launch another copy of the 
current Python executable, extra items from this process’s path 
environment variables are added to the returned dictionary so that it 
can start correctly. On Unix-based systems this includes copying all of 
the load library path environment variable from the parent process.</p>
</p></li>
<li><p><strong>kwargs</strong> – Overrides of this method should pass any additional 
kwargs down to the super implementation, to allow for future extensions.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new dictionary containing the environment variables.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.getExprFromFile">
<code class="sig-name descname">getExprFromFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">expr</span></em>, <em class="sig-param"><span class="n">groups</span><span class="o">=</span><span class="default_value">[1]</span></em>, <em class="sig-param"><span class="n">returnAll</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">returnNoneIfMissing</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reFlags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">mappers</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.getExprFromFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches for a regular expression in the specified file, and returns it.</p>
<p>Use of this function is discouraged - consider using <a class="reference internal" href="#pysys.basetest.BaseTest.grep" title="pysys.basetest.BaseTest.grep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grep</span></code></a> / <a class="reference internal" href="#pysys.basetest.BaseTest.grepOrNone" title="pysys.basetest.BaseTest.grepOrNone"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grepOrNone</span></code></a> / <a class="reference internal" href="#pysys.basetest.BaseTest.grepAll" title="pysys.basetest.BaseTest.grepAll"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grepAll</span></code></a> instead.</p>
<p>If the regex contains unnamed groups using <code class="docutils literal notranslate"><span class="pre">(expr)</span></code> syntax, the specified group is returned. 
If the expression is not found, an exception is raised,
unless returnAll=True or returnNoneIfMissing=True. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myKey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getExprFromFile</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;myKey=&quot;(.*)&quot;&#39;</span><span class="p">)</span> <span class="c1"># on a file containing &#39;myKey=&quot;foobar&quot;&#39; would return &quot;foobar&quot;</span>
<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getExprFromFile</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;ERROR .*&#39;</span><span class="p">)</span> <span class="c1"># on a file containing &#39;ERROR It went wrong&#39; would return &quot;that entire string&quot;</span>
</pre></div>
</div>
<p>If you have a complex expression with multiple values to extract, it is usually clearer to 
use <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups rather than unnamed groups referenced by index. This produces a 
dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">authInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getExprFromFile</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;Successfully authenticated user &quot;(?P&lt;username&gt;[^&quot;]*)&quot; in (?P&lt;authSecs&gt;[^ ]+) seconds\.&#39;</span><span class="p">))</span>

<span class="n">allAuthList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getExprFromFile</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;Successfully authenticated user &quot;(?P&lt;username&gt;[^&quot;]*)&quot; in (?P&lt;authSecs&gt;[^ ]+) seconds\.&#39;</span><span class="p">,</span> <span class="n">returnAll</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#pysys.basetest.BaseTest.assertThatGrep" title="pysys.basetest.BaseTest.assertThatGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.basetest.BaseTest.assertThatGrep</span></code></a> which should be used when instead of just finding out what’s 
in the file you want to assert that a specific expression is matched. The documentation for assertGrep also 
provides some helpful examples of regular expressions that could also be applied to this method, and tips for 
dealing with escaping in regular expressions.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.6.0: </span>Support for named groups was added in 1.6.0.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – file to search (located in the output dir unless an absolute path is specified)</p></li>
<li><p><strong>expr</strong> (<em>str</em>) – <p>the regular expression, optionally containing the regex group operator <code class="docutils literal notranslate"><span class="pre">(...)</span></code></p>
<p>Remember to escape regular expression special characters such as <code class="docutils literal notranslate"><span class="pre">.</span></code>, <code class="docutils literal notranslate"><span class="pre">(</span></code>, <code class="docutils literal notranslate"><span class="pre">[</span></code>, <code class="docutils literal notranslate"><span class="pre">{</span></code> and <code class="docutils literal notranslate"><span class="pre">\</span></code> if you want them to 
be treated as literal values. If you have a string with regex backslashes, it’s best to use a ‘raw’ 
Python string so that you don’t need to double-escape them, e.g. <code class="docutils literal notranslate"><span class="pre">expr=r'function[(]&quot;str&quot;,</span> <span class="pre">123[.]4,</span> <span class="pre">(\d+),</span> <span class="pre">.*[)]'</span></code>.</p>
</p></li>
<li><p><strong>groups</strong> (<em>List</em><em>[</em><em>int</em><em>]</em>) – which numeric regex group numbers (as indicated by brackets in the regex) should be returned; 
default is <code class="docutils literal notranslate"><span class="pre">[1]</span></code> meaning the first group. 
If more than one group is specified, the result will be a tuple of group values, otherwise the
result will be the value of the group at the specified index as a str.
This parameter is ignored if the regular expression contains any <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups.</p></li>
<li><p><strong>returnAll</strong> (<em>bool</em>) – returns a list containing all matching lines if True, the first matching line otherwise.</p></li>
<li><p><strong>returnNoneIfMissing</strong> (<em>bool</em>) – True to return None instead of raising an exception
if the regex is not found in the file (not needed when returnAll is used).</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – The encoding to use to open the file. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>mappers</strong> (<em>List</em><em>[</em><em>callable</em><em>[</em><em>str</em><em>]</em><em>-&gt;str</em><em>]</em>) – <p>A list of filter functions that will be used to pre-process each 
line from the file (returning None if the line is to be filtered out). This provides a very powerful 
capability for filtering the file, for example <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.IncludeLinesBetween" title="pysys.mappers.IncludeLinesBetween"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.IncludeLinesBetween</span></code></a> 
provides the ability to filter in/out sections of a file.</p>
<p>Do not share mapper instances across multiple tests or threads as this can cause race conditions.</p>
<p>Added in PySys 1.6.0.</p>
</p></li>
<li><p><strong>reFlags</strong> (<em>int</em>) – <p>Zero or more flags controlling how the behaviour of regular expression matching, 
combined together using the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator, for example <code class="docutils literal notranslate"><span class="pre">reFlags=re.VERBOSE</span> <span class="pre">|</span> <span class="pre">re.IGNORECASE</span></code>.</p>
<p>For details see the <code class="docutils literal notranslate"><span class="pre">re</span></code> module in the Python standard library. Note that <code class="docutils literal notranslate"><span class="pre">re.MULTILINE</span></code> cannot 
be used because expressions are matched against one line at a time. Added in PySys 1.5.1.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>For a regular expression with one unnamed group, the match value is a str; 
if there are multiple unnamed numeric groups it is List[str] (with values corresponding to the groups= argument); 
if it contains any <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups a dict[str,str] is returned where the keys are the groupNames.</p>
<p>If returnAll=True, the return value is a list of all the match values, with types as above.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.getInstanceCount">
<code class="sig-name descname">getInstanceCount</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">displayName</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.getInstanceCount" title="Permalink to this definition">¶</a></dt>
<dd><p>(Deprecated) Return the number of processes started within the testcase matching the supplied displayName.</p>
<dl class="field-list simple">
<dt class="field-odd">Deprecated</dt>
<dd class="field-odd"><p>The recommended way to allocate unique names is now <a class="reference internal" href="#pysys.basetest.BaseTest.allocateUniqueStdOutErr" title="pysys.basetest.BaseTest.allocateUniqueStdOutErr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">allocateUniqueStdOutErr</span></code></a></p>
</dd>
</dl>
<p>The ProcessUser class maintains a reference count of processes started within the class instance 
via the <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess()</span></code></a> method. The reference count is maintained against a logical name for 
the process, which is the <code class="xref py py-obj docutils literal notranslate"><span class="pre">displayName</span></code> used in the method call to <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess()</span></code></a>, or the 
basename of the command if no displayName was supplied. The method returns the number of 
processes started with the supplied logical name, or 0 if no processes have been started.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>displayName</strong> – The process display name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of processes started matching the command basename</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.getNextAvailableTCPPort">
<code class="sig-name descname">getNextAvailableTCPPort</code><span class="sig-paren">(</span><em class="sig-param">hosts=['', 'localhost'], socketAddressFamily=&lt;AddressFamily.AF_INET: 2&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.getNextAvailableTCPPort" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate a free TCP port which can be used for starting a server on this machine.</p>
<p>The port is taken from the pool of available server (non-ephemeral) ports on this machine, and will not 
be available for use by any other code in the current PySys process until this object’s <a class="reference internal" href="#pysys.basetest.BaseTest.cleanup" title="pysys.basetest.BaseTest.cleanup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanup</span></code></a> method is 
called to return it to the pool of available ports. For advanced options such as port exclusions see 
<a class="reference internal" href="../autodocgen/pysys.utils.allocport.html#module-pysys.utils.allocport" title="pysys.utils.allocport"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.utils.allocport</span></code></a>.</p>
<p>To allocate an IPv4 port for use only on this host:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNextAvailableTCPPort</span><span class="p">(</span><span class="n">hosts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;localhost&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.5.1: </span>Added hosts and socketAddressFamily parameters.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hosts</strong> (<em>list</em><em>(</em><em>Str</em><em>)</em>) – <p>A list of the host names or IP addresses to check when establishing that a potential 
allocated port isn’t already in use by a process outside the PySys framework. 
By default we check <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> (which corresponds to <code class="docutils literal notranslate"><span class="pre">INADDR_ANY</span></code> and depending on the OS means 
either one or all non-localhost IPv4 addresses) and also <code class="docutils literal notranslate"><span class="pre">localhost</span></code>.</p>
<p>Many machines have multiple network cards each with its own host IP address, and typically you’ll only be using 
one of them in your test, most commonly <code class="docutils literal notranslate"><span class="pre">localhost</span></code>. If you do know which host/IP you’ll actually be using, 
just specify that directly to save time, and avoid needlessly opening remote ports on hosts you’re not using. 
A list of available host addresses can be found from 
<code class="docutils literal notranslate"><span class="pre">socket.getaddrinfo('',</span> <span class="pre">None)</span></code>.</p>
</p></li>
<li><p><strong>socketAddressFamily</strong> – The socket address family e.g. IPv4 vs IPv6. See Python’s <code class="docutils literal notranslate"><span class="pre">socket</span></code> module for 
details.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.getOutcome">
<code class="sig-name descname">getOutcome</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.getOutcome" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the final outcome for this test, based on the precedence order defined in <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.OUTCOMES" title="pysys.constants.OUTCOMES"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants.OUTCOMES</span></code></a>.</p>
<p>To find out whether this test has failed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getOutcome</span><span class="p">()</span><span class="o">.</span><span class="n">isFailure</span><span class="p">():</span>
        <span class="o">...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return pysys.constants.Outcome</dt>
<dd class="field-odd"><p>The overall outcome. Use <code class="docutils literal notranslate"><span class="pre">%s</span></code> or <code class="docutils literal notranslate"><span class="pre">str()</span></code> to convert to a display name.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.getOutcomeLocation">
<code class="sig-name descname">getOutcomeLocation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.getOutcomeLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the location in the Python source file where this location was added.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return (str,str)</dt>
<dd class="field-odd"><p>The absolute filename, and the line number. Returns (None,None) if not known.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.getOutcomeReason">
<code class="sig-name descname">getOutcomeReason</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.getOutcomeReason" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the reason string for the current overall outcome (if specified).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The overall test outcome reason or ‘’ if not specified</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.grep">
<code class="sig-name descname">grep</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">expr</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reFlags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">mappers</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.grep" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the first occurrence of a regular expression in the specified file, or raises an exception if not found.</p>
<p>See also <a class="reference internal" href="#pysys.basetest.BaseTest.grepOrNone" title="pysys.basetest.BaseTest.grepOrNone"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grepOrNone</span></code></a> and <a class="reference internal" href="#pysys.basetest.BaseTest.grepAll" title="pysys.basetest.BaseTest.grepAll"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grepAll</span></code></a> or no-error-on-missing and return-all behaviour.</p>
<p>If you want to use a grep to set the outcome of the test, use <a class="reference internal" href="#pysys.basetest.BaseTest.assertThatGrep" title="pysys.basetest.BaseTest.assertThatGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.basetest.BaseTest.assertThatGrep</span></code></a> or 
<a class="reference internal" href="#pysys.basetest.BaseTest.assertGrep" title="pysys.basetest.BaseTest.assertGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.basetest.BaseTest.assertGrep</span></code></a> instead. The documentation for assertGrep also 
provides some helpful examples of regular expressions that could also be used with this method, and tips for 
escaping in regular expressions.</p>
<p>If you have a complex expression with multiple values to extract, you can use <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups 
in which case a dictionary is returned providing access to the individual elements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">authInfoDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;Successfully authenticated user &quot;(?P&lt;username&gt;[^&quot;]*)&quot; in (?P&lt;authSecs&gt;[^ ]+) seconds\.&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>For extracting a single value you can use an unnamed group using <code class="docutils literal notranslate"><span class="pre">(expr)</span></code> syntax, in which case that group is returned:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myKey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;myKey=&quot;(.*)&quot;&#39;</span><span class="p">)</span> <span class="c1"># on a file containing &#39;myKey=&quot;foobar&quot;&#39; would return &quot;foobar&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – file to search (located in the output dir unless an absolute path is specified)</p></li>
<li><p><strong>expr</strong> (<em>str</em>) – <p>the regular expression, optionally containing named groups.</p>
<p>Remember to escape regular expression special characters such as <code class="docutils literal notranslate"><span class="pre">.</span></code>, <code class="docutils literal notranslate"><span class="pre">(</span></code>, <code class="docutils literal notranslate"><span class="pre">[</span></code>, <code class="docutils literal notranslate"><span class="pre">{</span></code> and <code class="docutils literal notranslate"><span class="pre">\</span></code> if you want them to 
be treated as literal values. If you have a string with regex backslashes, it’s best to use a ‘raw’ 
Python string so that you don’t need to double-escape them, e.g. <code class="docutils literal notranslate"><span class="pre">expr=r'function[(]&quot;str&quot;,</span> <span class="pre">123[.]4,</span> <span class="pre">(\d+),</span> <span class="pre">.*[)]'</span></code>.</p>
</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – The encoding to use to open the file. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>mappers</strong> (<em>List</em><em>[</em><em>callable</em><em>[</em><em>str</em><em>]</em><em>-&gt;str</em><em>]</em>) – <p>A list of filter functions that will be used to pre-process each 
line from the file (returning None if the line is to be filtered out). This provides a very powerful 
capability for filtering the file, for example <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.IncludeLinesBetween" title="pysys.mappers.IncludeLinesBetween"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.IncludeLinesBetween</span></code></a> 
provides the ability to filter in/out sections of a file.</p>
<p>Do not share mapper instances across multiple tests or threads as this can cause race conditions.</p>
<p>Added in PySys 1.6.0.</p>
</p></li>
<li><p><strong>reFlags</strong> (<em>int</em>) – <p>Zero or more flags controlling how the behaviour of regular expression matching, 
combined together using the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator, for example <code class="docutils literal notranslate"><span class="pre">reFlags=re.VERBOSE</span> <span class="pre">|</span> <span class="pre">re.IGNORECASE</span></code>.</p>
<p>For details see the <code class="docutils literal notranslate"><span class="pre">re</span></code> module in the Python standard library. Note that <code class="docutils literal notranslate"><span class="pre">re.MULTILINE</span></code> cannot 
be used because expressions are matched against one line at a time. Added in PySys 1.5.1.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A str containing the matching expression, or if the expr contains any <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups 
a dict[str,str] is returned where the keys are the groupNames.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.grepAll">
<code class="sig-name descname">grepAll</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">expr</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reFlags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">mappers</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.grepAll" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the occurrences of a regular expression in the specified file.</p>
<p>See also <a class="reference internal" href="#pysys.basetest.BaseTest.grep" title="pysys.basetest.BaseTest.grep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grep</span></code></a> and <a class="reference internal" href="#pysys.basetest.BaseTest.grepOrNone" title="pysys.basetest.BaseTest.grepOrNone"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grepOrNone</span></code></a> for return-first-only behaviour.</p>
<p>If you have a complex expression with multiple values to extract, you can use <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups 
in which case each item in the returned list is a dictionary is returned providing access to the individual elements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">authInfoDictList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grepAll</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;Successfully authenticated user &quot;(?P&lt;username&gt;[^&quot;]*)&quot; in (?P&lt;authSecs&gt;[^ ]+) seconds\.&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>For extracting a single value you can use an unnamed group using <code class="docutils literal notranslate"><span class="pre">(expr)</span></code> syntax, in which case that group is returned:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myKey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grepAll</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;myKey=&quot;(.*)&quot;&#39;</span><span class="p">)</span> <span class="c1"># on a file containing &#39;myKey=&quot;foobar&quot;&#39; would return [&quot;foobar&quot;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – file to search (located in the output dir unless an absolute path is specified)</p></li>
<li><p><strong>expr</strong> (<em>str</em>) – <p>the regular expression, optionally containing named groups.</p>
<p>Remember to escape regular expression special characters such as <code class="docutils literal notranslate"><span class="pre">.</span></code>, <code class="docutils literal notranslate"><span class="pre">(</span></code>, <code class="docutils literal notranslate"><span class="pre">[</span></code>, <code class="docutils literal notranslate"><span class="pre">{</span></code> and <code class="docutils literal notranslate"><span class="pre">\</span></code> if you want them to 
be treated as literal values. If you have a string with regex backslashes, it’s best to use a ‘raw’ 
Python string so that you don’t need to double-escape them, e.g. <code class="docutils literal notranslate"><span class="pre">expr=r'function[(]&quot;str&quot;,</span> <span class="pre">123[.]4,</span> <span class="pre">(\d+),</span> <span class="pre">.*[)]'</span></code>.</p>
</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – The encoding to use to open the file. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>mappers</strong> (<em>List</em><em>[</em><em>callable</em><em>[</em><em>str</em><em>]</em><em>-&gt;str</em><em>]</em>) – <p>A list of filter functions that will be used to pre-process each 
line from the file (returning None if the line is to be filtered out). This provides a very powerful 
capability for filtering the file, for example <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.IncludeLinesBetween" title="pysys.mappers.IncludeLinesBetween"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.IncludeLinesBetween</span></code></a> 
provides the ability to filter in/out sections of a file.</p>
<p>Do not share mapper instances across multiple tests or threads as this can cause race conditions.</p>
<p>Added in PySys 1.6.0.</p>
</p></li>
<li><p><strong>reFlags</strong> (<em>int</em>) – <p>Zero or more flags controlling how the behaviour of regular expression matching, 
combined together using the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator, for example <code class="docutils literal notranslate"><span class="pre">reFlags=re.VERBOSE</span> <span class="pre">|</span> <span class="pre">re.IGNORECASE</span></code>.</p>
<p>For details see the <code class="docutils literal notranslate"><span class="pre">re</span></code> module in the Python standard library. Note that <code class="docutils literal notranslate"><span class="pre">re.MULTILINE</span></code> cannot 
be used because expressions are matched against one line at a time. Added in PySys 1.5.1.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list where each item is a str containing the matching expression, or if the expr contains any 
<code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups each item is a dict[str,str] where the keys are the groupNames.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.grepOrNone">
<code class="sig-name descname">grepOrNone</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">expr</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reFlags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">mappers</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.grepOrNone" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the first occurrence of a regular expression in the specified file, or None if not found.</p>
<p>See also <a class="reference internal" href="#pysys.basetest.BaseTest.grep" title="pysys.basetest.BaseTest.grep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grep</span></code></a> and <a class="reference internal" href="#pysys.basetest.BaseTest.grepAll" title="pysys.basetest.BaseTest.grepAll"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grepAll</span></code></a> for error-on-missing and return-all behaviour.</p>
<p>If you want to use a grep to set the outcome of the test, use <a class="reference internal" href="#pysys.basetest.BaseTest.assertThatGrep" title="pysys.basetest.BaseTest.assertThatGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.basetest.BaseTest.assertThatGrep</span></code></a> or 
<a class="reference internal" href="#pysys.basetest.BaseTest.assertGrep" title="pysys.basetest.BaseTest.assertGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.basetest.BaseTest.assertGrep</span></code></a> instead. The documentation for assertGrep also 
provides some helpful examples of regular expressions that could also be used with this method, and tips for 
escaping in regular expressions.</p>
<p>If you have a complex expression with multiple values to extract, you can use <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups 
in which case a dictionary is returned providing access to the individual elements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">authInfoDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grepOrNone</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> 
                <span class="n">expr</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;Successfully authenticated user &quot;(?P&lt;username&gt;[^&quot;]*)&quot; in (?P&lt;authSecs&gt;[^ ]+) seconds\.&#39;</span><span class="p">)</span>
        <span class="p">)</span> <span class="ow">or</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span><span class="s1">&#39;myuser&#39;</span><span class="p">,</span> <span class="s1">&#39;authSecs&#39;</span><span class="p">:</span> <span class="s1">&#39;0.0&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>For extracting a single value you can use an unnamed group using <code class="docutils literal notranslate"><span class="pre">(expr)</span></code> syntax, in which case that group is returned:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myKey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grepOrNone</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;myKey=&quot;(.*)&quot;&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;mydefault&#39;</span> <span class="c1"># on a file containing &#39;myKey=&quot;foobar&quot;&#39; would return &quot;foobar&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – file to search (located in the output dir unless an absolute path is specified)</p></li>
<li><p><strong>expr</strong> (<em>str</em>) – <p>the regular expression, optionally containing named groups.</p>
<p>Remember to escape regular expression special characters such as <code class="docutils literal notranslate"><span class="pre">.</span></code>, <code class="docutils literal notranslate"><span class="pre">(</span></code>, <code class="docutils literal notranslate"><span class="pre">[</span></code>, <code class="docutils literal notranslate"><span class="pre">{</span></code> and <code class="docutils literal notranslate"><span class="pre">\</span></code> if you want them to 
be treated as literal values. If you have a string with regex backslashes, it’s best to use a ‘raw’ 
Python string so that you don’t need to double-escape them, e.g. <code class="docutils literal notranslate"><span class="pre">expr=r'function[(]&quot;str&quot;,</span> <span class="pre">123[.]4,</span> <span class="pre">(\d+),</span> <span class="pre">.*[)]'</span></code>.</p>
</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – The encoding to use to open the file. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>mappers</strong> (<em>List</em><em>[</em><em>callable</em><em>[</em><em>str</em><em>]</em><em>-&gt;str</em><em>]</em>) – <p>A list of filter functions that will be used to pre-process each 
line from the file (returning None if the line is to be filtered out). This provides a very powerful 
capability for filtering the file, for example <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.IncludeLinesBetween" title="pysys.mappers.IncludeLinesBetween"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.IncludeLinesBetween</span></code></a> 
provides the ability to filter in/out sections of a file.</p>
<p>Do not share mapper instances across multiple tests or threads as this can cause race conditions.</p>
<p>Added in PySys 1.6.0.</p>
</p></li>
<li><p><strong>reFlags</strong> (<em>int</em>) – <p>Zero or more flags controlling how the behaviour of regular expression matching, 
combined together using the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator, for example <code class="docutils literal notranslate"><span class="pre">reFlags=re.VERBOSE</span> <span class="pre">|</span> <span class="pre">re.IGNORECASE</span></code>.</p>
<p>For details see the <code class="docutils literal notranslate"><span class="pre">re</span></code> module in the Python standard library. Note that <code class="docutils literal notranslate"><span class="pre">re.MULTILINE</span></code> cannot 
be used because expressions are matched against one line at a time. Added in PySys 1.5.1.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A str containing the matching expression, None if there are no matches, 
or if the expr contains any <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups 
a dict[str,str] is returned where the keys are the groupNames.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.logFileContents">
<code class="sig-name descname">logFileContents</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">includes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">excludes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maxLines</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">tail</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">logFunction</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reFlags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">stripWhitespace</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">mappers</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">color</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.logFileContents" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs some or all of the lines from the specified file.</p>
<p>If the file does not exist or cannot be opened, does nothing. The method is useful for providing key
diagnostic information (e.g. error messages from tools executed by the test) directly in run.log, or
to make test failures easier to triage quickly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – May be an absolute, or relative to the test output directory.</p></li>
<li><p><strong>includes</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – Optional list of regex strings. If specified, only matches of these regexes will be logged.</p></li>
<li><p><strong>excludes</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – <p>Optional list of regex strings. If specified, no line containing these will be logged.</p>
<p>The variable <code class="docutils literal notranslate"><span class="pre">self.logFileContentsDefaultExcludes</span></code> (= <code class="docutils literal notranslate"><span class="pre">[]</span></code> by default) is used when this method 
is called with the default argument of <code class="docutils literal notranslate"><span class="pre">excludes=None</span></code>, and can be used to provide a global set of 
default exclusion lines shared by all your tests, which is particularly useful if some processes always 
log some unimportant text to stderr (or stdout) that would be distracting to log out.</p>
<p>Added in PySys 1.6.0.</p>
</p></li>
<li><p><strong>mappers</strong> (<em>List</em><em>[</em><em>callable</em><em>[</em><em>str</em><em>]</em><em>-&gt;str</em><em>]</em>) – <p>A list of filter functions that will be used to pre-process each 
line from the file (returning None if the line is to be filtered out). This provides a very powerful 
capability for filtering the file, for example <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.IncludeLinesBetween" title="pysys.mappers.IncludeLinesBetween"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.IncludeLinesBetween</span></code></a> 
provides the ability to filter in/out sections of a file.</p>
<p>Do not share mapper instances across multiple tests or threads as this can cause race conditions.</p>
<p>Added in PySys 2.0.</p>
</p></li>
<li><p><strong>maxLines</strong> (<em>int</em>) – Upper limit on the number of lines from the file that will be logged. Set to zero for unlimited</p></li>
<li><p><strong>tail</strong> (<em>bool</em>) – Prints the _last_ ‘maxLines’ in the file rather than the first ‘maxLines’.</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – The encoding to use to open the file. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>logFunction</strong> (<em>Callable</em><em>[</em><em>[</em><em>line</em><em>]</em><em>,</em><em>None</em><em>]</em>) – <p>The function that will be used to log individual lines from the file. 
Usually this is <code class="docutils literal notranslate"><span class="pre">self.log.info(u'</span>&#160; <span class="pre">%s',</span> <span class="pre">line,</span> <span class="pre">extra=BaseLogFormatter.tag(LOG_FILE_CONTENTS))</span></code> 
but a custom implementation can be provided, for example to provide a different color using 
<a class="reference internal" href="../autodocgen/pysys.utils.logutils.html#pysys.utils.logutils.BaseLogFormatter.tag" title="pysys.utils.logutils.BaseLogFormatter.tag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.utils.logutils.BaseLogFormatter.tag</span></code></a>.</p>
<p>Added in PySys 1.5.1.</p>
</p></li>
<li><p><strong>reFlags</strong> (<em>int</em>) – <p>Zero or more flags controlling how the behaviour of regular expression matching, 
combined together using the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator, for example <code class="docutils literal notranslate"><span class="pre">reFlags=re.VERBOSE</span> <span class="pre">|</span> <span class="pre">re.IGNORECASE</span></code>.</p>
<p>For details see the <code class="docutils literal notranslate"><span class="pre">re</span></code> module in the Python standard library. Note that <code class="docutils literal notranslate"><span class="pre">re.MULTILINE</span></code> cannot 
be used because expressions are matched against one line at a time. Added in PySys 1.5.1.</p>
</p></li>
<li><p><strong>stripWhitespace</strong> (<em>bool</em>) – By default blank lines are removed; set this to False to disable that behaviour. 
Added in PySys 2.0.</p></li>
<li><p><strong>color</strong> (<em>bool</em>) – By default logged lines are colored blue to distinguish from the rest of the log contents. 
Set this to False to disable coloring. Added in PySys 2.1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if anything was logged, False if not.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.mkdir">
<code class="sig-name descname">mkdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a directory, with recursive creation of any parent directories.</p>
<p>This function does nothing (does not raise an except) if the directory already exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – The path to be created. This can be an absolute path or 
relative to the testcase output directory.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the absolute path of the new directory, to facilitate fluent-style method calling.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.pollWait">
<code class="sig-name descname">pollWait</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">secs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.pollWait" title="Permalink to this definition">¶</a></dt>
<dd><p>Sleeps the current thread for the specified number of seconds, between polling/checking for some condition 
to be met.</p>
<p>Unlike <a class="reference internal" href="#pysys.basetest.BaseTest.wait" title="pysys.basetest.BaseTest.wait"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.basetest.BaseTest.wait</span></code></a> (which should be used for larger waits inside tests), pollWait does not 
log anything.</p>
<p>Use this method instead of <code class="docutils literal notranslate"><span class="pre">time.sleep</span></code> as it provides PySys the chance to abort test execution early when 
requested.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>secs</strong> (<em>float</em>) – The time to sleep for, typically a few hundred milliseconds. Do not use this method for 
really long waits.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.pythonDocTest">
<code class="sig-name descname">pythonDocTest</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pythonFile</span></em>, <em class="sig-param"><span class="n">pythonPath</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">output</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">environs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pysys/basetest.html#BaseTest.pythonDocTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pysys.basetest.BaseTest.pythonDocTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the Python doctests that exist in the specified python file; 
adds a FAILED outcome if any do not pass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pythonFile</strong> – the absolute path to a python file name.</p></li>
<li><p><strong>pythonPath</strong> – a list of directories to be added to the PYTHONPATH.</p></li>
<li><p><strong>output</strong> – the output file; if not specified, ‘%s-doctest.txt’ is used with 
the basename of the python file.</p></li>
<li><p><strong>kwargs</strong> – extra arguments are passed to startProcess/startPython.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.signalProcess">
<code class="sig-name descname">signalProcess</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">process</span></em>, <em class="sig-param"><span class="n">signal</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.signalProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a signal to a running process.</p>
<p>This method uses the <a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process.signal" title="pysys.process.Process.signal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.Process.signal</span></code></a> method to send a signal to a 
running process.</p>
<p>Should the request to send the signal to the running process fail, a <code class="xref py py-obj docutils literal notranslate"><span class="pre">BLOCKED</span></code> outcome will be added to the
outcome list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>process</strong> – The process handle returned from the <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a> method</p></li>
<li><p><strong>signal</strong> – The integer value of the signal to send</p></li>
<li><p><strong>abortOnError</strong> – If True aborts the test with an exception on any error, if False just log it as a warning. 
(defaults to the defaultAbortOnError project setting)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.skipTest">
<code class="sig-name descname">skipTest</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">outcomeReason</span></em>, <em class="sig-param"><span class="n">callRecord</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.skipTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise an AbortException that will set the test outcome to SKIPPED and 
ensure that the rest of the execute() and validate() methods do not execute.</p>
<p>This is useful when a test should not be executed in the current mode or platform.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>outcomeReason</strong> – A string summarizing the reason the test is being skipped, for example
“Feature X is not supported on Windows”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.startProcess">
<code class="sig-name descname">startProcess</code><span class="sig-paren">(</span><em class="sig-param">command</em>, <em class="sig-param">arguments</em>, <em class="sig-param">environs=None</em>, <em class="sig-param">workingDir=None</em>, <em class="sig-param">state=None</em>, <em class="sig-param">timeout=600</em>, <em class="sig-param">stdout=None</em>, <em class="sig-param">stderr=None</em>, <em class="sig-param">displayName=None</em>, <em class="sig-param">abortOnError=None</em>, <em class="sig-param">expectedExitStatus='==0'</em>, <em class="sig-param">ignoreExitStatus=None</em>, <em class="sig-param">onError=None</em>, <em class="sig-param">quiet=False</em>, <em class="sig-param">stdouterr=None</em>, <em class="sig-param">background=False</em>, <em class="sig-param">info={}</em>, <em class="sig-param">processFactory=&lt;class 'pysys.process.helper.ProcessImpl'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.startProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>Start a process running in the foreground or background, and return 
the <a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process" title="pysys.process.Process"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.Process</span></code></a> object.</p>
<p>Typical use is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myexecutable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">startProcess</span><span class="p">(</span><span class="s1">&#39;path_to_my_executable&#39;</span><span class="p">,</span> 
        <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;myoperation&#39;</span><span class="p">,</span> <span class="s1">&#39;arg1&#39;</span><span class="p">,</span><span class="s1">&#39;arg2&#39;</span><span class="p">],</span>
        <span class="n">environs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">createEnvirons</span><span class="p">(</span><span class="n">addToLibPath</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;my_ld_lib_path&#39;</span><span class="p">]),</span> <span class="c1"># if a customized environment is needed</span>
        <span class="n">stdouterr</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">allocateUniqueStdOutErr</span><span class="p">(</span><span class="s1">&#39;myoperation&#39;</span><span class="p">),</span> <span class="c1"># for stdout/err files, pick a suitable logical name for what it&#39;s doing</span>
        <span class="n">background</span><span class="o">=</span><span class="kc">True</span> <span class="c1"># or remove for default behaviour of executing in foreground</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>The method allows spawning of new processes in a platform independent way. The command, arguments,
environment and working directory to run the process in can all be specified in the arguments to the
method, along with the filenames used for capturing the stdout and stderr of the process. Processes may
be started in the foreground, in which case the method does not return until the process has completed
or a time out occurs, or in the background in which case the method returns immediately to the caller
returning a handle to the process to allow manipulation at a later stage, typically with <a class="reference internal" href="#pysys.basetest.BaseTest.waitProcess" title="pysys.basetest.BaseTest.waitProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitProcess</span></code></a>.</p>
<p>All processes started in the background are automatically killed on completion of the test via the <a class="reference internal" href="#pysys.basetest.BaseTest.cleanup" title="pysys.basetest.BaseTest.cleanup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cleanup()</span></code></a> 
destructor. To wait for background processes to complete during <a class="reference internal" href="#pysys.basetest.BaseTest.execute" title="pysys.basetest.BaseTest.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute</span></code></a> and/or before <code class="xref py py-obj docutils literal notranslate"><span class="pre">verify</span></code> commences, 
call <a class="reference internal" href="#pysys.basetest.BaseTest.waitForBackgroundProcesses" title="pysys.basetest.BaseTest.waitForBackgroundProcesses"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForBackgroundProcesses()</span></code></a>. This is especially useful when you have a test that needs to execute 
lots of processes asynchronously, since having them all execute concurrently in the background and then calling 
<a class="reference internal" href="#pysys.basetest.BaseTest.waitForBackgroundProcesses" title="pysys.basetest.BaseTest.waitForBackgroundProcesses"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForBackgroundProcesses()</span></code></a> will be a lot quicker than executing them serially in the foreground.</p>
<p>When starting a process that will listen on a server socket, use <a class="reference internal" href="#pysys.basetest.BaseTest.getNextAvailableTCPPort" title="pysys.basetest.BaseTest.getNextAvailableTCPPort"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getNextAvailableTCPPort</span></code></a> 
to allocate a free port before calling this method.</p>
<p>Note that although is is possible to use this command to execute OS shell commands, that should only used for 
testing of shell scripts - other logic such as file system operations can be executed more easily and robustly 
using built-in Python (<code class="docutils literal notranslate"><span class="pre">os</span></code> module) or PySys (e.g. <a class="reference internal" href="#pysys.basetest.BaseTest.copy" title="pysys.basetest.BaseTest.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseTest.copy</span></code></a>) functions.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.6.0: </span>Added onError parameter and default behaviour of logging stderr/out when there’s a failure.
Added info parameter. </p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span>Added processFactory parameter.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> (<em>str</em>) – The path to the executable to be launched (should include the full path)</p></li>
<li><p><strong>arguments</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – A list of arguments to pass to the command. Any non-string values in the list are 
converted to strings automatically.</p></li>
<li><p><strong>environs</strong> (<em>dict</em><em>(</em><em>str</em><em>,</em><em>str</em><em>)</em>) – A dictionary specifying the environment to run the process in. 
If a None or empty dictionary is passed, <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultEnvirons" title="pysys.basetest.BaseTest.getDefaultEnvirons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultEnvirons</span></code></a> will be invoked to 
produce a suitable clean default environment for this <code class="xref py py-obj docutils literal notranslate"><span class="pre">command</span></code>, containing a minimal set of variables. 
If you wish to specify a customized environment, <a class="reference internal" href="#pysys.basetest.BaseTest.createEnvirons" title="pysys.basetest.BaseTest.createEnvirons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">createEnvirons()</span></code></a> is a great way to create it.</p></li>
<li><p><strong>workingDir</strong> (<em>str</em>) – The working directory for the process to run in (defaults to the testcase output subdirectory)</p></li>
<li><p><strong>background</strong> (<em>bool</em>) – Set to True to start the process in the background. By default processes are started 
in the foreground, meaning execution of the test will continue only once the process has terminated.</p></li>
<li><p><strong>state</strong> – Alternative way to set <code class="docutils literal notranslate"><span class="pre">background=True</span></code>. 
Run the process either in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">FOREGROUND</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">BACKGROUND</span></code> (defaults to <code class="xref py py-obj docutils literal notranslate"><span class="pre">FOREGROUND</span></code>). Setting 
state=BACKGROUND is equivalent to setting background=True; in new tests using background=True is the 
preferred way to do this.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The number of seconds after which to terminate processes running in the foreground. For processes 
that complete in a few seconds or less, it is best to avoid overriding this and stick with the default. 
However for long-running foreground processes it will be necessary to set a larger number, for example 
if running a soak test where the process needs to run for up to 2 hours you could set <code class="docutils literal notranslate"><span class="pre">timeout=2*60*60</span></code>.</p></li>
<li><p><strong>stdouterr</strong> (<em>str</em>) – The filename prefix to use for the stdout and stderr of the process 
(<code class="xref py py-obj docutils literal notranslate"><span class="pre">out</span></code>/<code class="xref py py-obj docutils literal notranslate"><span class="pre">err</span></code> will be appended), or a tuple of (stdout,stderr) as returned from 
<a class="reference internal" href="#pysys.basetest.BaseTest.allocateUniqueStdOutErr" title="pysys.basetest.BaseTest.allocateUniqueStdOutErr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">allocateUniqueStdOutErr</span></code></a>. 
The stdouterr prefix is also used to form a default display name for the process if none is explicitly provided. 
The files are created relative to the test output directory. 
The filenames can be accessed from the returned process object using <code class="docutils literal notranslate"><span class="pre">.stdout/err</span></code> from 
<a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process" title="pysys.process.Process"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.Process</span></code></a>.</p></li>
<li><p><strong>stdout</strong> (<em>str</em>) – The filename used to capture the stdout of the process. It is usually simpler to use <code class="xref py py-obj docutils literal notranslate"><span class="pre">stdouterr</span></code> instead of this.</p></li>
<li><p><strong>stderr</strong> (<em>str</em>) – The filename used to capture the stderr of the process. It is usually simpler to use <code class="xref py py-obj docutils literal notranslate"><span class="pre">stdouterr</span></code> instead of this.</p></li>
<li><p><strong>displayName</strong> (<em>str</em>) – Logical name of the process used for display in log messages, and the str(…) 
representation of the returned process object 
(defaults to a string generated from the stdouterr and/or the command).</p></li>
<li><p><strong>abortOnError</strong> (<em>bool</em>) – If true abort the test on any error outcome (defaults to the defaultAbortOnError
project setting)</p></li>
<li><p><strong>expectedExitStatus</strong> (<em>str</em>) – The condition string used to determine whether the exit status/code 
returned by the process is correct. The default is ‘==0’, as an exit code of zero usually indicates success, but if you 
are expecting a non-zero exit status (for example because you are testing correct handling of 
a failure condition) this could be set to ‘!=0’ or a specific value such as ‘==5’.</p></li>
<li><p><strong>ignoreExitStatus</strong> (<em>bool</em>) – <p>If False, a BLOCKED outcome is added if the process terminates with an 
exit code that doesn’t match expectedExitStatus (or if the command cannot be run at all). 
This can be set to True in cases where you do not care whether the command succeeds or fails, or wish to handle the 
exit status separately with more complicated logic.</p>
<p>The default value of ignoreExitStatus=None means the value will 
be taken from the project property defaultIgnoreExitStatus, which can be configured in the project XML 
(the recommended default property value is defaultIgnoreExitStatus=False), or is set to True for 
compatibility with older PySys releases if no project property is set.</p>
</p></li>
<li><p><strong>onError</strong> (<em>Callable</em><em>[</em><a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process" title="pysys.process.Process"><em>pysys.process.Process</em></a><em>]</em><em>-&gt;str</em>) – <p>A function that will be called 
if the process times out or returns an unexpected exit status (unless ignoreExitStatus=True), before 
any abort exception is raised. This provides a convenient place to add logging of 
diagnostic information (perhaps using the stdout/err of the process) and/or extracting and returning an 
error message from the output, for example: <code class="docutils literal notranslate"><span class="pre">onError=lambda</span> <span class="pre">process:</span> <span class="pre">self.logFileContents(process.stderr,</span> <span class="pre">tail=True)</span> <span class="pre">or</span> <span class="pre">self.logFileContents(process.stdout,</span> <span class="pre">tail=True)</span></code>.</p>
<p>If a string value is returned from it will be added to the failure reason, e.g. <code class="docutils literal notranslate"><span class="pre">onError=lambda</span> <span class="pre">process:</span> <span class="pre">self.logFileContents(process.stderr,</span> <span class="pre">tail=True)</span> <span class="pre">and</span> <span class="pre">self.grepOrNone(process.stderr,</span> <span class="pre">'Error:</span> <span class="pre">(.*)')</span></code>.</p>
<p>If no onError function is specified, the default is to log the last few lines of stderr (or if empty, stdout) 
when a process fails and abortOnError=True.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">self.logFileContentsDefaultExcludes</span></code> variable can be used to add regular expressions to exclude 
unimportant lines of output such as standard startup lines (see <a class="reference internal" href="#pysys.basetest.BaseTest.logFileContents" title="pysys.basetest.BaseTest.logFileContents"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logFileContents</span></code></a>).</p>
</p></li>
<li><p><strong>quiet</strong> (<em>bool</em>) – If True, this method will not do any INFO or WARN level logging 
(only DEBUG level), unless a failure outcome is appended. This parameter can be 
useful to avoid filling up the log where it is necessary to repeatedly execute a 
command check for completion of some operation until it succeeds; in such cases 
you should usually set ignoreExitStatus=True as well since both success and 
failure exit statuses are valid.</p></li>
<li><p><strong>info</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>obj</em><em>]</em>) – A dictionary of user-defined information about this process that will be set as 
a field on the returned Process instance. This is useful for keeping track of things like server port 
numbers and log file paths.</p></li>
<li><p><strong>processFactory</strong> (<em>callable</em><em>[</em><em>kwargs</em><em>]</em>) – <p>A callable (such as a class constructor) that returns an instance or 
subclass of <code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.helper.ProcessImpl</span></code>. This can be used either to provide a custom process subclass 
with extra features, or to make modifications to the arguments or environment that were specified by the code 
that invoked <code class="docutils literal notranslate"><span class="pre">startProcess()</span></code>.</p>
<p>The signature must consist of a <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> parameter, the members of which will be populated by 
the parameters listed in the constructor of <a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process" title="pysys.process.Process"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.Process</span></code></a>, and can be modified by the factory. For 
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">myProcessFactory</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;my_extra_arg&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">pysys</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">ProcessImpl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The process object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process" title="pysys.process.Process">pysys.process.Process</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.startPython">
<code class="sig-name descname">startPython</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span></em>, <em class="sig-param"><span class="n">disableCoverage</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.startPython" title="Permalink to this definition">¶</a></dt>
<dd><p>Start a Python process with the specified arguments.</p>
<p>Uses the same Python process the tests are running under.</p>
<p>If PySys was run with the argument <code class="docutils literal notranslate"><span class="pre">-XcodeCoverage</span></code> or <code class="docutils literal notranslate"><span class="pre">-XpythonCoverage</span></code> then 
<a class="reference internal" href="#pysys.basetest.BaseTest.startPython" title="pysys.basetest.BaseTest.startPython"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startPython</span></code></a> will add the necessary arguments to enable generation of 
code coverage. Note that this requried the coverage.py library to be 
installed. If a project property called <code class="xref py py-obj docutils literal notranslate"><span class="pre">pythonCoverageArgs</span></code> exists 
then its value will be added as (space-delimited) arguments to the 
coverage tool.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arguments</strong> – The arguments to pass to the Python executable. 
Typically the first one be either the name of a Python script 
to execute, or <code class="docutils literal notranslate"><span class="pre">-m</span></code> followed by a module name.</p></li>
<li><p><strong>kwargs</strong> – See <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a> for detail on available arguments.</p></li>
<li><p><strong>disableCoverage</strong> – Disables code coverage for this specific 
process. Coverage can also be disabled by setting 
<code class="docutils literal notranslate"><span class="pre">self.disableCoverage==True</span></code> on this test instance.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The process handle of the process.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process" title="pysys.process.Process">pysys.process.Process</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.stopProcess">
<code class="sig-name descname">stopProcess</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">process</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.stopProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the specified process, if it is currently running.</p>
<p>Does nothing if the process is not running.</p>
<p>This is equivalent to calling <a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process.stop" title="pysys.process.Process.stop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.Process.stop()</span></code></a>, except it also 
logs an info message when the process is stopped.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>process</strong> – The process handle returned from the <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a> method</p></li>
<li><p><strong>abortOnError</strong> – If True abort the test on any error outcome (defaults to the defaultAbortOnError
project setting), if False a failure to stop the process will just be logged as a warning.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.unpackArchive">
<code class="sig-name descname">unpackArchive</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">archive</span></em>, <em class="sig-param"><span class="n">dest</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">autoCleanup</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.unpackArchive" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpacks the specified file(s) from an archive to a directory. Supports archive format such as zip/tar.gz/gz/tar.xz/xz.</p>
<p>It is a good idea to store large textual Input/ assets (such as log files, which usually compress very well) 
as compressed archives to reduce disk space in your version control system.</p>
<p>By default this method will automatically delete the extracted file/dir during test cleanup so it doesn’t sit 
around on disk (or in CI uploaded failure archives) consuming space; if the file/dir is mutated by the test you 
may wish to disable this so you can manually inspect them by setting <code class="docutils literal notranslate"><span class="pre">autoCleanup=False</span></code>.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unpacked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unpackArchive</span><span class="p">(</span><span class="s1">&#39;mybigfile.log.xz&#39;</span><span class="p">)</span>
<span class="c1"># do something with &quot;unpacked&quot;...</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">.xz</span></code> (for single files) and <code class="docutils literal notranslate"><span class="pre">.tar.xz</span></code> (for multiple files) are recommended for optimal compression, and 
these (and <code class="docutils literal notranslate"><span class="pre">.gz</span></code>) are <em>significantly</em> better than zip, which performs poorly when compressing 
multiple similar text files into one archive. Don’t use more than one single archive per testcase (if possible) 
to ensure you benefit from similarities between the various files.</p>
<p>Files are decompressed in binary mode, so if you require platform-native line endings you should use <a class="reference internal" href="#pysys.basetest.BaseTest.copy" title="pysys.basetest.BaseTest.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code></a> to 
post-process them after decompressing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>archive</strong> (<em>str</em>) – The path of the archive to unpack, by default from the test input directory. Alternatively 
you could provide an absolute path using <code class="docutils literal notranslate"><span class="pre">self.project.testRootDir</span></code> or similar if an archive is shared across 
multiple test cases.</p></li>
<li><p><strong>dest</strong> (<em>str</em>) – The directory in which the contents of the archive will be written; by default this is the test 
output directory for archive types that are always single-file, and a subdirectory named after the archive if not. 
This dir will be created if needed.</p></li>
<li><p><strong>autoCleanup</strong> (<em>bool</em>) – Automatically deletes the unpackaged file/directory during test cleanup to save 
disk space (even if the test fails).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The full path to the decompressed file or directory.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.waitForBackgroundProcesses">
<code class="sig-name descname">waitForBackgroundProcesses</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">includes</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">excludes</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">600</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">checkExitStatus</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.waitForBackgroundProcesses" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for any running background processes to terminate, then check that all background processes 
completed with the expected exit status.</p>
<p>This can be useful for speeding up a test that needs to run many processes, by executing all its subprocesses 
in parallel in the background (and then waiting for completion) rather than one-by-one in the foreground.</p>
<p>Timeouts will result in a TIMEDOUT outcome and an exception unless the project property <code class="docutils literal notranslate"><span class="pre">defaultAbortOnError==False</span></code> 
is set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>includes</strong> (<em>list</em><em>[</em><a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process" title="pysys.process.Process"><em>pysys.process.Process</em></a><em>]</em>) – A list of processes to wait for, each returned by <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess()</span></code></a>. 
If none are specified, this method will wait for (and check the exit status of) all background processes.</p></li>
<li><p><strong>excludes</strong> (<em>list</em><em>[</em><a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process" title="pysys.process.Process"><em>pysys.process.Process</em></a><em>]</em>) – A list of processes which are not expected to have terminated yet 
(this is only useful when not setting includes=[]).</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The total time in seconds to wait for all processes to have completed, for example <code class="docutils literal notranslate"><span class="pre">timeout=TIMEOUTS['WaitForProcess']</span></code>.</p></li>
<li><p><strong>abortOnError</strong> (<em>bool</em>) – If True aborts the test with an exception on any error, if False appends an outcome but does not 
raise an exception.</p></li>
<li><p><strong>checkExitStatus</strong> (<em>bool</em>) – By default this method not only waits for completion but also checks the exit status of 
all (included) background processes (regardless of when they completed), but set this argument to False 
to disable checking that the exit status of the processes matches the <code class="docutils literal notranslate"><span class="pre">expectedExitStatus</span></code> specified in 
the call to <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a> (typically <code class="docutils literal notranslate"><span class="pre">==0</span></code>). 
The last few lines of the stderr (or stdout) will be logged if the exit status is wrong.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.waitForFile">
<code class="sig-name descname">waitForFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">filedir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">30</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.waitForFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for a file to exist on disk.</p>
<p>This method blocks until a file is created on disk. This is useful for test timing where 
a component under test creates a file (e.g. for logging) indicating it has performed all 
initialisation actions and is ready for the test execution steps. If a file is not created 
on disk within the specified timeout interval, the method returns to the caller.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – The basename of the file used to wait to be created</p></li>
<li><p><strong>filedir</strong> – The dirname of the file (defaults to the testcase output subdirectory)</p></li>
<li><p><strong>timeout</strong> – The timeout in seconds to wait for the file to be created</p></li>
<li><p><strong>abortOnError</strong> – If true abort the test on any failure (defaults to the defaultAbortOnError
project setting)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.waitForGrep">
<code class="sig-name descname">waitForGrep</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">expr</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">condition</span><span class="o">=</span><span class="default_value">'&gt;=1'</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">60</span></em>, <em class="sig-param"><span class="n">poll</span><span class="o">=</span><span class="default_value">0.25</span></em>, <em class="sig-param"><span class="n">ignores</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">process</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">errorExpr</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">errorIf</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">detailMessage</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">filedir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reFlags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">mappers</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">quiet</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.waitForGrep" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for a regular expression line to be seen (one or more times) in a text file in the output 
directory (waitForGrep was formerly known as <a class="reference internal" href="#pysys.basetest.BaseTest.waitForSignal" title="pysys.basetest.BaseTest.waitForSignal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForSignal</span></code></a>).</p>
<p>This method provides some parameters that give helpful fail-fast behaviour with a descriptive outcome reason; 
use these whenever possible:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">process=</span></code> to abort if success becomes impossible due to premature termination of the process that’s 
generating the output</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">errorExpr=</span></code> to abort if an error message/expression is written to the file being grepped</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">errorIf=</span></code> to abort if the specified lambda function returns an error string (which can be used if the 
error messages go to a different file than that being grepped</p></li>
</ul>
</div></blockquote>
<p>This will generate much clearer outcome reasons, which makes test failures easy to triage, 
and also avoids wasting time waiting for something that will never happen.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">waitForGrep</span><span class="p">(</span><span class="s1">&#39;myprocess.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="s1">&#39;INFO .*Started successfully&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
        <span class="n">process</span><span class="o">=</span><span class="n">myprocess</span><span class="p">,</span> <span class="n">errorExpr</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39; (ERROR|FATAL) &#39;</span><span class="p">,</span> <span class="s1">&#39;Failed to start&#39;</span><span class="p">])</span>

<span class="bp">self</span><span class="o">.</span><span class="n">waitForGrep</span><span class="p">(</span><span class="s1">&#39;myoutput.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="s1">&#39;My message&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
        <span class="n">process</span><span class="o">=</span><span class="n">myprocess</span><span class="p">,</span> <span class="n">errorIf</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">grepOrNone</span><span class="p">(</span><span class="s1">&#39;myprocess.err&#39;</span><span class="p">,</span> <span class="s1">&#39; ERROR .*&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Note that waitForGrep fails the test if the expression is not found (unless abortOnError was set to False, 
which isn’t recommended), so there is no need to add duplication with an 
<a class="reference internal" href="#pysys.basetest.BaseTest.assertGrep" title="pysys.basetest.BaseTest.assertGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertGrep</span></code></a> to check for the same expression in your validation logic.</p>
<p>You can extract information from the matched expression, optionally perform assertions on it, by 
using one or more <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups in the expression. A common 
pattern is to unpack the resulting dict using <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> syntax and pass to <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseTest.assertThat</span></code></a>. For 
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="s1">&#39;username == expected&#39;</span><span class="p">,</span> <span class="n">expected</span><span class="o">=</span><span class="s1">&#39;myuser&#39;</span><span class="p">,</span>
        <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">waitForGrep</span><span class="p">(</span><span class="s1">&#39;myserver.log&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;Successfully authenticated user &quot;(?P&lt;username&gt;[^&quot;]*)&quot;&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.1.</span></p>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>str</em>) – The path of the file to be searched. Usually this is a name/path relative to the 
<code class="docutils literal notranslate"><span class="pre">self.output</span></code> directory, but alternatively an absolute path can be specified.</p></li>
<li><p><strong>expr</strong> (<em>str</em>) – The regular expression to search for in the text file.</p></li>
<li><p><strong>condition</strong> (<em>str</em>) – The condition to be met for the number of lines matching the regular expression; by default 
we wait until there is at least one occurrence.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The number of seconds to wait for the regular expression before giving up and aborting 
the test with <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.TIMEDOUT" title="pysys.constants.TIMEDOUT"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants.TIMEDOUT</span></code></a> (unless abortOnError=False in which case execution will continue).</p></li>
<li><p><strong>process</strong> (<a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process" title="pysys.process.Process"><em>pysys.process.Process</em></a>) – The process that is generating the specified 
file, to allow the wait to fail fast (instead of timing out) if the process dies before the expected signal 
appears. Can be None if the process is not known or is expected to terminate itself during this period.</p></li>
<li><p><strong>errorExpr</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – Optional list of regular expressions, which if found in the file will cause waiting 
for the main expression to be aborted with a <a class="reference internal" href="../autodocgen/pysys.constants.html#pysys.constants.BLOCKED" title="pysys.constants.BLOCKED"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.constants.BLOCKED</span></code></a> outcome. This is useful to avoid waiting 
a long time for the expected expression when an ERROR is logged that means it will never happen, and 
also provides much clearer test failure messages in this case.</p></li>
<li><p><strong>errorIf</strong> (<em>callable-&gt;str</em>) – <p>A zero-arg function that returns False/None when there is no error, or a non-empty 
string if an error is detected which should cause us to abort looking for the grep expression. 
This function will be executed frequently (every <code class="docutils literal notranslate"><span class="pre">poll</span></code> seconds) so avoid 
doing anything time-consuming here unless you set a large polling interval. 
See above for an example.</p>
<p>Added in PySys 1.6.0.</p>
</p></li>
<li><p><strong>ignores</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – A list of regular expressions used to identify lines in the files which should be ignored 
when matching both <code class="xref py py-obj docutils literal notranslate"><span class="pre">expr</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">errorExpr</span></code>.</p></li>
<li><p><strong>mappers</strong> (<em>List</em><em>[</em><em>callable</em><em>[</em><em>str</em><em>]</em><em>-&gt;str</em><em>]</em>) – <p>A list of filter functions that will be used to pre-process each 
line from the file (returning None if the line is to be filtered out). This provides a very powerful 
capability for filtering the file, for example <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.IncludeLinesBetween" title="pysys.mappers.IncludeLinesBetween"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.IncludeLinesBetween</span></code></a> 
provides the ability to filter in/out sections of a file, and <a class="reference internal" href="../autodocgen/pysys.mappers.html#pysys.mappers.JoinLines" title="pysys.mappers.JoinLines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.mappers.JoinLines</span></code></a> can be used to put 
exception stack traces onto the same line as the error message.</p>
<p>Do not share mapper instances across multiple tests or threads as this can cause race conditions.</p>
<p>Added in PySys 1.6.0.</p>
</p></li>
<li><p><strong>poll</strong> (<em>float</em>) – The time in seconds between to poll the file looking for the regular expression and to check against the condition</p></li>
<li><p><strong>abortOnError</strong> (<em>bool</em>) – If True abort the test on any error outcome (defaults to the defaultAbortOnError
project setting, which for a modern project will be True).</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – The encoding to use to open the file and convert from bytes to characters. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
<li><p><strong>detailMessage</strong> (<em>str</em>) – <p>An extra string to add to the start of the message logged when waiting to provide extra 
information about the wait condition. e.g. <code class="docutils literal notranslate"><span class="pre">detailMessage='Wait</span> <span class="pre">for</span> <span class="pre">server</span> <span class="pre">startup:</span> <span class="pre">'</span></code>.</p>
<p>Added in v1.5.1. From v2.1+ the detail string is added at the beginning not the end.</p>
</p></li>
<li><p><strong>reFlags</strong> (<em>int</em>) – <p>Zero or more flags controlling how the behaviour of regular expression matching, 
combined together using the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator, for example <code class="docutils literal notranslate"><span class="pre">reFlags=re.VERBOSE</span> <span class="pre">|</span> <span class="pre">re.IGNORECASE</span></code>.</p>
<p>For details see the <code class="docutils literal notranslate"><span class="pre">re</span></code> module in the Python standard library. Note that <code class="docutils literal notranslate"><span class="pre">re.MULTILINE</span></code> cannot 
be used because expressions are matched against one line at a time. Added in PySys 1.5.1.</p>
</p></li>
<li><p><strong>filedir</strong> (<em>str</em>) – Can be used to provide a directory name to add to the beginning of the <code class="docutils literal notranslate"><span class="pre">file</span></code> parameter; 
however usually it is clearer just to specify that directory in the <code class="docutils literal notranslate"><span class="pre">file</span></code>.</p></li>
<li><p><strong>quiet</strong> (<em>bool</em>) – Set this to true to suppress INFO-level logging, which can be useful when you wish to 
print your own progress message in a more high-level fashion.</p></li>
</ul>
</dd>
<dt class="field-even">Return list[re.Match]</dt>
<dd class="field-even"><p>Usually this returns a list of <code class="docutils literal notranslate"><span class="pre">re.Match</span></code> objects found for the <code class="docutils literal notranslate"><span class="pre">expr</span></code>, or an 
empty list if there was no match.</p>
<p>If the expr contains any <code class="docutils literal notranslate"><span class="pre">(?P&lt;groupName&gt;...)</span></code> named groups, and assuming the condition is still the 
default of “&gt;=1” (i.e. not trying to find multiple matches), then instead of a list, a dict is returned 
containing <code class="docutils literal notranslate"><span class="pre">dict(groupName:</span> <span class="pre">str,</span> <span class="pre">matchValue:</span> <span class="pre">str</span> <span class="pre">or</span> <span class="pre">None)</span></code> (or an empty <code class="docutils literal notranslate"><span class="pre">{}</span></code> dict if there is no match) 
which allows the result to be passed to <a class="reference internal" href="#pysys.basetest.BaseTest.assertThat" title="pysys.basetest.BaseTest.assertThat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assertThat</span></code></a> for further checking of the matched groups (typically 
unpacked using the <code class="docutils literal notranslate"><span class="pre">**</span></code> operator; see example above).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.waitForSignal">
<code class="sig-name descname">waitForSignal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">filedir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">expr</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">waitForGrepArgs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.waitForSignal" title="Permalink to this definition">¶</a></dt>
<dd><p>Old alias for <a class="reference internal" href="#pysys.basetest.BaseTest.waitForGrep" title="pysys.basetest.BaseTest.waitForGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForGrep</span></code></a>; please use <a class="reference internal" href="#pysys.basetest.BaseTest.waitForGrep" title="pysys.basetest.BaseTest.waitForGrep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForGrep</span></code></a> in new tests.</p>
<p>All parameters are the same, except that in waitForSignal the (rarely used) <code class="docutils literal notranslate"><span class="pre">filedir</span></code> argument can be 
specified as the 2nd positional argument (after <code class="docutils literal notranslate"><span class="pre">file</span></code> and before <code class="docutils literal notranslate"><span class="pre">expr</span></code>) whereas in waitForGrep it can 
only be specified as a <code class="docutils literal notranslate"><span class="pre">filedir=</span></code> keyword argument.</p>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.waitForSocket">
<code class="sig-name descname">waitForSocket</code><span class="sig-paren">(</span><em class="sig-param">port</em>, <em class="sig-param">host='localhost'</em>, <em class="sig-param">timeout=60</em>, <em class="sig-param">abortOnError=None</em>, <em class="sig-param">process=None</em>, <em class="sig-param">socketAddressFamily=&lt;AddressFamily.AF_INET: 2&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.waitForSocket" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait until it is possible to establish a socket connection to a 
server running on the specified local or remote port.</p>
<p>This method blocks until connection to a particular host:port pair can be established. This is useful for
test timing where a component under test creates a socket for client server interaction - calling of this
method ensures that on return of the method call the server process is running and a client is able to
create connections to it. If a connection cannot be made within the specified timeout interval, the method
returns to the caller, or aborts the test if abortOnError=True.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.5.1: </span>Added host and socketAddressFamily parameters.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>port</strong> – The port value in the socket host:port pair</p></li>
<li><p><strong>host</strong> – The host value in the socket host:port pair</p></li>
<li><p><strong>timeout</strong> – The timeout in seconds to wait for connection to the socket</p></li>
<li><p><strong>abortOnError</strong> – If true abort the test on any failure (defaults to the defaultAbortOnError
project setting)</p></li>
<li><p><strong>process</strong> – If a handle to a process is specified, the wait will abort if 
the process dies before the socket becomes available. It is recommended to set this wherever possible.</p></li>
<li><p><strong>socketAddressFamily</strong> – The socket address family e.g. IPv4 vs IPv6. See Python’s <code class="docutils literal notranslate"><span class="pre">socket</span></code> module for 
details.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.waitProcess">
<code class="sig-name descname">waitProcess</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">process</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">600</span></em>, <em class="sig-param"><span class="n">abortOnError</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">checkExitStatus</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.waitProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for a background process to terminate.</p>
<p>For a convenient way to wait for all remaining background processes to complete, see <a class="reference internal" href="#pysys.basetest.BaseTest.waitForBackgroundProcesses" title="pysys.basetest.BaseTest.waitForBackgroundProcesses"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waitForBackgroundProcesses</span></code></a>.</p>
<p>Timeouts will result in an exception and TIMEDOUT outcome unless the project property <code class="docutils literal notranslate"><span class="pre">defaultAbortOnError==False</span></code> 
is set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>process</strong> (<a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process" title="pysys.process.Process"><em>pysys.process.Process</em></a>) – The process handle returned from the <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a> method</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The timeout value in seconds to wait before returning, for example <code class="docutils literal notranslate"><span class="pre">timeout=TIMEOUTS['WaitForProcess']</span></code>.</p></li>
<li><p><strong>abortOnError</strong> (<em>bool</em>) – If True aborts the test with an exception on any error, if False just log it as a warning. 
(defaults to the defaultAbortOnError project setting)</p></li>
<li><p><strong>checkExitStatus</strong> (<em>bool</em>) – By default this method does not check the exit status, but set this argument to True 
to check that the exit status matches the <code class="docutils literal notranslate"><span class="pre">expectedExitStatus</span></code> specified in the call to <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess</span></code></a> 
(typically <code class="docutils literal notranslate"><span class="pre">==0</span></code>). 
Note that this argument is not affected by the <code class="docutils literal notranslate"><span class="pre">defaultIgnoreExitStatus</span></code> project property. 
The last few lines of the stderr (or stdout) will be logged if the exit status is wrong.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The process’s <code class="docutils literal notranslate"><span class="pre">exitStatus</span></code>. This will be None if the process timed out and abortOnError is disabled.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.writeProcess">
<code class="sig-name descname">writeProcess</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">process</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">addNewLine</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.writeProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>Write binary data to the stdin of a process.</p>
<p>This method uses <a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process.write" title="pysys.process.Process.write"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysys.process.Process.write</span></code></a> to write binary data to the stdin of a process. This
wrapper around the write method of the process helper only adds checking of the process running status prior
to the write being performed, and logging to the testcase run log to detail the write.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>process</strong> (<a class="reference internal" href="../autodocgen/pysys.process.html#pysys.process.Process" title="pysys.process.Process"><em>pysys.process.Process</em></a>) – The process handle returned from the <a class="reference internal" href="#pysys.basetest.BaseTest.startProcess" title="pysys.basetest.BaseTest.startProcess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startProcess()</span></code></a> method</p></li>
<li><p><strong>data</strong> (<em>bytes</em>) – The data to write to the process stdin. 
As only binary data can be written to a process stdin, 
if a character string rather than a byte object is passed as the data,
it will be automatically converted to a bytes object using the encoding 
given by PREFERRED_ENCODING.</p></li>
<li><p><strong>addNewLine</strong> (<em>bool</em>) – True if a new line character is to be added to the end of the data string</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pysys.basetest.BaseTest.write_text">
<code class="sig-name descname">write_text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">text</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysys.basetest.BaseTest.write_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the specified characters to a file in the output directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – The path of the file to write, either an absolute path or 
relative to the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.output</span></code> directory.</p></li>
<li><p><strong>text</strong> – <p>The string to write to the file, with <code class="docutils literal notranslate"><span class="pre">\n</span></code> 
for newlines (do not use <code class="xref py py-obj docutils literal notranslate"><span class="pre">os.linesep</span></code> as the file will be opened in 
text mode so platform line separators will be added automatically).</p>
<p>This must be a character string.</p>
</p></li>
<li><p><strong>encoding</strong> – The encoding to use to open the file. 
The default value is None which indicates that the decision will be delegated 
to the <a class="reference internal" href="#pysys.basetest.BaseTest.getDefaultFileEncoding" title="pysys.basetest.BaseTest.getDefaultFileEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDefaultFileEncoding()</span></code></a> method.</p></li>
</ul>
</dd>
<dt class="field-even">Return str</dt>
<dd class="field-even"><p>Return the absolute path of the generated file.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="UserGuide.html" class="btn btn-neutral float-right" title="User Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../GettingStarted.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2006-2022 M.B. Grieve; documentation last updated on 2022-03-17

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>